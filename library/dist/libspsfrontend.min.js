(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["libspsfrontend"] = factory();
	else
		root["libspsfrontend"] = factory();
})(this, function() {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Afk/AfkLogic.ts":
/*!*****************************!*\
  !*** ./src/Afk/AfkLogic.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AfkLogic": () => (/* binding */ AfkLogic)
/* harmony export */ });
/* harmony import */ var _Config_Config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Config/Config */ "./src/Config/Config.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");


var AfkLogic = /** @class */ (function () {
    function AfkLogic(controlScheme, afkTimeout) {
        this.warnTimeout = 0;
        this.closeTimeout = 10;
        this.active = false;
        this.warnTimer = undefined;
        this.countDown = 0;
        this.countDownTimer = undefined;
        this.warnTimeout = afkTimeout;
        this.controlScheme = controlScheme;
    }
    /**
     * The methods that occur when an afk event listener is clicked
     */
    AfkLogic.prototype.onAfkClick = function () {
        this.hideCurrentOverlay();
        clearInterval(this.countDownTimer);
        this.startAfkWarningTimer();
    };
    /**
     * Start the warning timer if a timeout is set greater that 0 seconds
     */
    AfkLogic.prototype.startAfkWarningTimer = function () {
        if (this.warnTimeout > 0) {
            this.active = true;
        }
        else {
            this.active = false;
        }
        this.resetAfkWarningTimer();
    };
    /**
     * Stop the afk warning timer
     */
    AfkLogic.prototype.stopAfkWarningTimer = function () {
        this.active = false;
        clearInterval(this.warnTimer);
        clearInterval(this.countDownTimer);
    };
    /**
     * Pause the timer which when elapsed will warn the user they are inactive.
     */
    AfkLogic.prototype.pauseAfkWarningTimer = function () {
        this.active = false;
    };
    /**
     * If the user interacts then reset the warning timer.
     */
    AfkLogic.prototype.resetAfkWarningTimer = function () {
        var _this = this;
        if (this.active) {
            clearTimeout(this.warnTimer);
            this.warnTimer = setTimeout(function () { return _this.activateAfkEvent(); }, this.warnTimeout * 1000);
        }
    };
    /**
     * Show the AFK overlay and begin the countDown
     */
    AfkLogic.prototype.activateAfkEvent = function () {
        var _this = this;
        // Pause the timer while the user is looking at the inactivity warning overlay
        this.pauseAfkWarningTimer();
        // instantiate a new overlay 
        this.showAfkOverlay();
        // update our countDown timer and overlay contents
        this.countDown = this.closeTimeout;
        this.updateAfkCountdown();
        // if we are in locked mouse exit pointerlock 
        if (this.controlScheme == _Config_Config__WEBPACK_IMPORTED_MODULE_0__.ControlSchemeType.LockedMouse) {
            // minor hack to alleviate ios not supporting pointerlock
            if (document.exitPointerLock) {
                document.exitPointerLock();
            }
        }
        // reset our countDown interval accordingly 
        this.countDownTimer = setInterval(function () {
            _this.countDown--;
            if (_this.countDown == 0) {
                // The user failed to click so hide the overlay and disconnect them.
                _this.hideCurrentOverlay();
                _this.setDisconnectMessageOverride("You have been disconnected due to inactivity");
                _this.closeWebSocket();
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "You have been disconnected due to inactivity");
                // switch off the afk feature as stream has closed 
                _this.stopAfkWarningTimer();
            }
            else {
                // Update the countDown message.
                _this.updateAfkCountdown();
            }
        }, 1000);
    };
    /**
     * An override method for updating the afk countdown number in the overlay
     */
    AfkLogic.prototype.updateAfkCountdown = function () { };
    /**
     * An override method for showing the afk overlay
     */
    AfkLogic.prototype.showAfkOverlay = function () { };
    /**
     * An override method for hiding the afk overlay
     */
    AfkLogic.prototype.hideCurrentOverlay = function () { };
    /**
     * An  override method for setting the override for the disconnect message
     */
    AfkLogic.prototype.setDisconnectMessageOverride = function (message) { };
    /**
     * An override method for closing the websocket connection from the clients side
     */
    AfkLogic.prototype.closeWebSocket = function () { };
    return AfkLogic;
}());



/***/ }),

/***/ "./src/Config/Config.ts":
/*!******************************!*\
  !*** ./src/Config/Config.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Config": () => (/* binding */ Config),
/* harmony export */   "ControlSchemeType": () => (/* binding */ ControlSchemeType)
/* harmony export */ });
var Config = /** @class */ (function () {
    /**
     * @param signallingServerAddress - the address of the signaling server
     * @param playerElement - the player element ID
     */
    function Config(signallingServerAddress, playerElement) {
        // PRESET OPTIONS
        // enable the auto connect of the websocket 
        this.enableSpsAutoConnect = false;
        // enable the autoplay of the video if enabled by browser
        this.enableSpsAutoplay = false;
        // start the video muted
        this.startVideoMuted = false;
        // set the amount of wait time in seconds while there is inactivity for afk to occur 
        this.afkTimeout = 120;
        // The control scheme controls the behaviour of the mouse when it interacts with the WebRTC player.
        this.controlScheme = ControlSchemeType.LockedMouse;
        // Browser keys are those which are typically used by the browser UI. We usually want to suppress these to allow, for example, UE4 to show shader complexity with the F5 key without the web page refreshing.
        this.suppressBrowserKeys = true;
        // UE4 has a fake touches option which fakes a single finger touch when the user drags with their mouse. 
        // We may perform the reverse; a single finger touch may be converted into a mouse drag UE4 side. This allows a non-touch application to be controlled partially via a touch device.
        this.fakeMouseWithTouches = false;
        this.signallingServerAddress = signallingServerAddress;
        this.playerElement = playerElement;
    }
    return Config;
}());

/**
 * The enum associated with the mouse being locked or hovering
 */
var ControlSchemeType;
(function (ControlSchemeType) {
    ControlSchemeType[ControlSchemeType["LockedMouse"] = 0] = "LockedMouse";
    ControlSchemeType[ControlSchemeType["HoveringMouse"] = 1] = "HoveringMouse";
})(ControlSchemeType || (ControlSchemeType = {}));


/***/ }),

/***/ "./src/DataChannel/DataChannelController.ts":
/*!**************************************************!*\
  !*** ./src/DataChannel/DataChannelController.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DataChannelController": () => (/* binding */ DataChannelController)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DataChannelReceiveMessageType */ "./src/DataChannel/DataChannelReceiveMessageType.ts");
/* harmony import */ var _InitialSettings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InitialSettings */ "./src/DataChannel/InitialSettings.ts");
/* harmony import */ var _DataChannel_LatencyTestResults__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../DataChannel/LatencyTestResults */ "./src/DataChannel/LatencyTestResults.ts");




/**
 * Handles the Sending and Receiving of messages to the UE Instance via the Data Channel
 */
var DataChannelController = /** @class */ (function () {
    function DataChannelController() {
        this.isReceivingFreezeFrame = false;
    }
    /**
     * To Create and Set up a Data Channel
     * @param peerConnection - The RTC Peer Connection
     * @param label - Label of the Data Channel
     * @param datachannelOptions - Optional RTC DataChannel options
     */
    DataChannelController.prototype.createDataChannel = function (peerConnection, label, datachannelOptions) {
        var _this = this;
        this.peerConnection = peerConnection;
        this.label = label;
        this.datachannelOptions = datachannelOptions;
        if (datachannelOptions == null) {
            this.datachannelOptions = {};
            this.datachannelOptions.ordered = true;
        }
        this.dataChannel = this.peerConnection.createDataChannel(this.label, this.datachannelOptions);
        //We Want an Array Buffer not a blob
        this.dataChannel.binaryType = "arraybuffer";
        this.dataChannel.onopen = function () { return _this.handleOnOpen(); };
        this.dataChannel.onclose = function () { return _this.handleOnClose(); };
        this.dataChannel.onmessage = function (ev) { return _this.handleOnMessage(ev); };
    };
    /**
     * Handles when the Data Channel is opened
     */
    DataChannelController.prototype.handleOnOpen = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Data Channel: " + this.label + " is opened.", 7);
    };
    /**
     * Handles when the Data Channel is closed
     */
    DataChannelController.prototype.handleOnClose = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Data Channel: " + this.label + " is closed.", 7);
    };
    /**
     * Handles when a message is received
     * @param event - Message Event
     */
    DataChannelController.prototype.handleOnMessage = function (event) {
        var message = new Uint8Array(event.data);
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Message incoming", 6);
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Message:" + message, 6);
        switch (message[0]) {
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.QualityControlOwnership: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.QualityControlOwnership", 6);
                var QualityOwnership = new Boolean(message[1]).valueOf();
                this.onQualityControlOwnership(QualityOwnership);
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.Response: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.Response", 6);
                this.onResponse(message);
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.Command: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.Command", 6);
                this.onCommand(message);
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.FreezeFrame: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.FreezeFrame", 6);
                this.processFreezeFrameMessage(message);
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.UnfreezeFrame: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.FreezeFrame", 6);
                this.isReceivingFreezeFrame = false;
                this.onUnFreezeFrame();
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.VideoEncoderAvgQP: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.VideoEncoderAvgQP", 6);
                var AvgQP = Number(new TextDecoder("utf-16").decode(message.slice(1)));
                this.onVideoEncoderAvgQP(AvgQP);
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.latencyTest: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.latencyTest", 6);
                var latencyAsString = new TextDecoder("utf-16").decode(message.slice(1));
                var iLatencyTestResults = JSON.parse(latencyAsString);
                var latencyTestResults = new _DataChannel_LatencyTestResults__WEBPACK_IMPORTED_MODULE_3__.LatencyTestResults();
                Object.assign(latencyTestResults, iLatencyTestResults);
                latencyTestResults.processFields();
                this.onLatencyTestResult(latencyTestResults);
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.InitialSettings: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.InitialSettings", 6);
                var payloadAsString = new TextDecoder("utf-16").decode(message.slice(1));
                var iInitialSettings = JSON.parse(payloadAsString);
                var initialSettings = new _InitialSettings__WEBPACK_IMPORTED_MODULE_2__.InitialSettings();
                Object.assign(initialSettings, iInitialSettings);
                initialSettings.ueCompatible();
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), payloadAsString, 6);
                this.OnInitialSettings(initialSettings);
                break;
            }
            default: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), message[0].toString());
                var decoded = new TextDecoder("utf-16").decode(message.slice(1));
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), decoded);
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "unknown message sent on the Data channel");
                break;
            }
        }
    };
    /**
     * Fired when a Response message is sent from the UE Instance
     * @param message - Message Data Uint8Array
     */
    DataChannelController.prototype.onResponse = function (message) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.Response", 6);
        var responses = new TextDecoder("utf-16").decode(message.slice(1));
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), responses, 6);
        //add to response handlers 
    };
    /**
     * Fired when a Command message is sent from the UE Instance
     * @param message - Message Data Uint8Array
     */
    DataChannelController.prototype.onCommand = function (message) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.Command", 6);
        var commandAsString = new TextDecoder("utf-16").decode(message.slice(1));
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Data Channel Command: " + commandAsString, 6);
        var command = JSON.parse(commandAsString);
        if (command.command === "onScreenKeyboard") {
            //show on screen Keyboard;
        }
    };
    /**
     * Send Data over the Data channel to the UE Instance
     * @param data - Message Data Array Buffer
     */
    DataChannelController.prototype.sendData = function (data) {
        // reset the afk inactivity
        this.resetAfkWarningTimerOnDataSend();
        if (this.dataChannel && this.dataChannel.readyState == "open") {
            this.dataChannel.send(data);
        }
        else {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Message Failed: " + new Uint8Array(data));
        }
    };
    /**
     * Fired when the UE Instance updates who has Quality Ownership
     * @param hasQualityOwnership - Does the client have Quality Ownership
     */
    DataChannelController.prototype.onQualityControlOwnership = function (hasQualityOwnership) { };
    /**
     * Fired when the UE Instance sends freeze frame data
     * @param message - Freeze Frame Data
     */
    DataChannelController.prototype.processFreezeFrameMessage = function (message) { };
    /**
     * Fired when the UE Instance sends a un Freeze Frame
     */
    DataChannelController.prototype.onUnFreezeFrame = function () { };
    /**
     * Fired when the UE Instance sends the Video Encoder Avg QP
     * @param AvgQP - Avg QP
     */
    DataChannelController.prototype.onVideoEncoderAvgQP = function (AvgQP) { };
    /**
     * Fired when the UE Instance sends Latency test Results
     * @param latencyTestResults - Latency Test Results
     */
    DataChannelController.prototype.onLatencyTestResult = function (latencyTestResults) { };
    /**
     * Fired when the UE Instance sends Initial Settings
     * @param InitialSettings - Initial Settings
     */
    DataChannelController.prototype.OnInitialSettings = function (InitialSettings) { };
    /**
     * An override method for resetting the Afk warning timer when data is sent over the data channel
     */
    DataChannelController.prototype.resetAfkWarningTimerOnDataSend = function () { };
    return DataChannelController;
}());



/***/ }),

/***/ "./src/DataChannel/DataChannelReceiveMessageType.ts":
/*!**********************************************************!*\
  !*** ./src/DataChannel/DataChannelReceiveMessageType.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DataChannelReceiveMessageType": () => (/* binding */ DataChannelReceiveMessageType)
/* harmony export */ });
/**
 * Data Channel Receives Message Type
 */
var DataChannelReceiveMessageType;
(function (DataChannelReceiveMessageType) {
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["QualityControlOwnership"] = 0] = "QualityControlOwnership";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["Response"] = 1] = "Response";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["Command"] = 2] = "Command";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["FreezeFrame"] = 3] = "FreezeFrame";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["UnfreezeFrame"] = 4] = "UnfreezeFrame";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["VideoEncoderAvgQP"] = 5] = "VideoEncoderAvgQP";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["latencyTest"] = 6] = "latencyTest";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["InitialSettings"] = 7] = "InitialSettings";
})(DataChannelReceiveMessageType || (DataChannelReceiveMessageType = {}));


/***/ }),

/***/ "./src/DataChannel/InitialSettings.ts":
/*!********************************************!*\
  !*** ./src/DataChannel/InitialSettings.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Encoder": () => (/* binding */ Encoder),
/* harmony export */   "InitialSettings": () => (/* binding */ InitialSettings),
/* harmony export */   "PixelStreaming": () => (/* binding */ PixelStreaming),
/* harmony export */   "WebRTC": () => (/* binding */ WebRTC)
/* harmony export */ });
/**
 * Latency Test Results Data
 */
var InitialSettings = /** @class */ (function () {
    function InitialSettings() {
        this.PixelStreaming = new PixelStreaming();
        this.Encoder = new Encoder();
        this.WebRTC = new WebRTC();
    }
    InitialSettings.prototype.ueCompatible = function () {
        if (this.WebRTC.MaxFPS != null) {
            this.WebRTC.FPS = this.WebRTC.MaxFPS;
        }
    };
    return InitialSettings;
}());

var PixelStreaming = /** @class */ (function () {
    function PixelStreaming() {
    }
    return PixelStreaming;
}());

var Encoder = /** @class */ (function () {
    function Encoder() {
    }
    return Encoder;
}());

var WebRTC = /** @class */ (function () {
    function WebRTC() {
    }
    return WebRTC;
}());



/***/ }),

/***/ "./src/DataChannel/LatencyTestResults.ts":
/*!***********************************************!*\
  !*** ./src/DataChannel/LatencyTestResults.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LatencyTestResults": () => (/* binding */ LatencyTestResults)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");

/**
 * Latency Test Results Data
 */
var LatencyTestResults = /** @class */ (function () {
    function LatencyTestResults() {
        //Fields Set from the latency payload regardless of version
        this.ReceiptTimeMs = null;
        this.TransmissionTimeMs = null;
        //Fields Set from the latency payload from 4.27.2
        this.PreCaptureTimeMs = null;
        this.PostCaptureTimeMs = null;
        this.PreEncodeTimeMs = null;
        this.PostEncodeTimeMs = null;
        //Fields Set from the latency payload from 5.0
        this.EncodeMs = null;
        this.CaptureToSendMs = null;
        //Fields Set when processed
        this.testStartTimeMs = 0;
        this.browserReceiptTimeMs = 0;
        //Fields set from calculations
        this.latencyExcludingDecode = 0;
        this.testDuration = 0;
        //ueLatency: number = 0;
        this.networkLatency = 0;
        this.browserSendLatency = 0;
        this.frameDisplayDeltaTimeMs = 0;
        this.endToEndLatency = 0;
        //uePixelStreamLatency: number = 0;
        this.encodeLatency = 0;
    }
    /**
     * Sets the Delta Time Milliseconds
     * @param DeltaTimeMs - Delta Time Milliseconds
     */
    LatencyTestResults.prototype.setFrameDisplayDeltaTime = function (DeltaTimeMs) {
        if (this.frameDisplayDeltaTimeMs == 0) {
            this.frameDisplayDeltaTimeMs = Math.round(DeltaTimeMs);
        }
    };
    LatencyTestResults.prototype.processFields = function () {
        if (this.EncodeMs == null && (this.PreEncodeTimeMs != null || this.PostEncodeTimeMs != null)) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Setting Encode Ms \n " + this.PostEncodeTimeMs + " \n " + this.PreEncodeTimeMs, 6);
            this.EncodeMs = this.PostEncodeTimeMs - this.PreEncodeTimeMs;
        }
        if (this.CaptureToSendMs == null && (this.PreCaptureTimeMs != null || this.PostCaptureTimeMs != null)) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Setting CaptureToSendMs Ms \n " + this.PostCaptureTimeMs + " \n " + this.PreCaptureTimeMs, 6);
            this.CaptureToSendMs = this.PostCaptureTimeMs - this.PreCaptureTimeMs;
        }
    };
    return LatencyTestResults;
}());



/***/ }),

/***/ "./src/Delegate/DelegateBase.ts":
/*!**************************************!*\
  !*** ./src/Delegate/DelegateBase.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DelegateBase": () => (/* binding */ DelegateBase)
/* harmony export */ });
/**
 * Provides common base functionality for delegates that implement the IDelegate interface
*/
var DelegateBase = /** @class */ (function () {
    /**
     * @param config - A newly instantiated config object
     * returns the base delegate object with the config inside it along with a new instance of the Overlay controller class
     */
    function DelegateBase(config) {
        this.showActionOrErrorOnDisconnect = true;
        this.config = config;
    }
    /**
     * Shows the disconnect overlay
     */
    DelegateBase.prototype.showDisconnectOverlay = function (updateText) {
        this.hideCurrentOverlay();
        this.updateDisconnectOverlay(updateText);
        this.disconnectOverlay.show();
        this.currentOverlay = this.disconnectOverlay;
    };
    /**
     * Update the disconnect overlays span text
     * @param updateText the new countdown number
     */
    DelegateBase.prototype.updateDisconnectOverlay = function (updateText) {
        this.disconnectOverlay.update(updateText);
    };
    /**
     * Activates the disconnect overlays action
     */
    DelegateBase.prototype.onDisconnectionAction = function () {
        this.disconnectOverlay.activate();
    };
    /**
     * Hides the current overlay
     */
    DelegateBase.prototype.hideCurrentOverlay = function () {
        if (this.currentOverlay != null) {
            this.currentOverlay.hide();
            this.currentOverlay = null;
        }
    };
    /**
     * Shows the connect overlay
     */
    DelegateBase.prototype.showConnectOverlay = function () {
        this.hideCurrentOverlay();
        this.connectOverlay.show();
        this.currentOverlay = this.connectOverlay;
    };
    /**
     * Shows the play overlay
     */
    DelegateBase.prototype.showPlayOverlay = function () {
        this.hideCurrentOverlay();
        this.playOverlay.show();
        this.currentOverlay = this.playOverlay;
    };
    /**
     * Shows the text overlay
     */
    DelegateBase.prototype.showTextOverlay = function (text) {
        this.hideCurrentOverlay();
        this.infoOverlay.update(text);
        this.infoOverlay.show();
        this.currentOverlay = this.infoOverlay;
    };
    /**
     * Shows the error overlay
     */
    DelegateBase.prototype.showErrorOverlay = function (text) {
        this.hideCurrentOverlay();
        this.errorOverlay.update(text);
        this.errorOverlay.show();
        this.currentOverlay = this.errorOverlay;
    };
    /**
     * Activates the connect overlays action
     */
    DelegateBase.prototype.onConnectAction = function () {
        this.connectOverlay.activate();
    };
    /**
     * Activates the play overlays action
     */
    DelegateBase.prototype.onPlayAction = function () {
        this.playOverlay.activate();
    };
    /**
     * Shows the afk overlay
     * @param countDown the countdown number for the afk countdown
     */
    DelegateBase.prototype.showAfkOverlay = function (countDown) {
        this.hideCurrentOverlay();
        this.updateAfkOverlay(countDown);
        this.afkOverlay.show();
        this.currentOverlay = this.afkOverlay;
    };
    /**
     * Update the afk overlays countdown number
     * @param countDown the new countdown number
     */
    DelegateBase.prototype.updateAfkOverlay = function (countDown) {
        this.afkOverlay.updateCountdown(countDown);
    };
    /**
     * Activates the afk overlays action
     */
    DelegateBase.prototype.onAfkAction = function () {
        this.afkOverlay.activate();
    };
    /**
     * Instantiate the WebRTCPlayerController interface to provide WebRTCPlayerController functionality within this class and set up anything that requires it
     * @param iWebRtcPlayerController
     */
    DelegateBase.prototype.setIWebRtcPlayerController = function (iWebRtcPlayerController) {
        var _this = this;
        this.iWebRtcController = iWebRtcPlayerController;
        this.iWebRtcController.resizePlayerStyle();
        this.disconnectOverlay.onAction(function () {
            _this.onWebRtcAutoConnect();
            _this.iWebRtcController.connectToSignallingServer();
        });
        // Build the webRtc connect overlay Event Listener and show the connect overlay
        this.connectOverlay.onAction(function () { return _this.iWebRtcController.connectToSignallingServer(); });
        // set up the afk overlays action 
        this.afkOverlay.onAction(function () { return _this.iWebRtcController.onAfkClick(); });
        // set up the play overlays action 
        this.playOverlay.onAction(function () {
            _this.onStreamLoading();
            _this.iWebRtcController.playStream();
        });
        // set up the connect overlays action
        this.showConnectOrAutoConnectOverlays();
    };
    /**
     * Show the Connect Overlay or auto connect
     */
    DelegateBase.prototype.showConnectOrAutoConnectOverlays = function () {
        // set up if the auto play will be used or regular click to start
        if (!this.config.enableSpsAutoConnect) {
            this.showConnectOverlay();
        }
        else {
            // if autoplaying show an info overlay while while waiting for the connection to begin 
            this.onWebRtcAutoConnect();
            this.iWebRtcController.connectToSignallingServer();
        }
    };
    /**
     * Show the webRtcAutoConnect Overlay and connect
     */
    DelegateBase.prototype.onWebRtcAutoConnect = function () {
        this.showTextOverlay("Auto Connecting Now");
        this.showActionOrErrorOnDisconnect = true;
    };
    /**
     * Set up functionality to happen when an instance state change occurs
     * @param instanceState - the message instance state
     */
    DelegateBase.prototype.onInstanceStateChange = function (instanceState) { };
    /**
     * Set up functionality to happen when receiving an auth response
     * @param authResponse - the auth response message type
     */
    DelegateBase.prototype.onAuthenticationResponse = function (authResponse) { };
    /**
     * Set up functionality to happen when receiving a webRTC answer
     */
    DelegateBase.prototype.onWebRtcAnswer = function () {
        this.showTextOverlay("RTC Answer");
    };
    /**
     * Shows a text overlay to alert the user the stream is currently loading
     */
    DelegateBase.prototype.onStreamLoading = function () {
        this.showTextOverlay("Loading Stream");
    };
    /**
     * Event fired when the video is disconnected
     */
    DelegateBase.prototype.onDisconnect = function (eventString) {
        // if we have overridden the default disconnection messsage, assign the new value here
        if (this.iWebRtcController.getDisconnectMessageOverride() != "" && this.iWebRtcController.getDisconnectMessageOverride() !== undefined && this.iWebRtcController.getDisconnectMessageOverride() != null) {
            eventString = this.iWebRtcController.getDisconnectMessageOverride();
            this.iWebRtcController.setDisconnectMessageOverride('');
        }
        if (this.showActionOrErrorOnDisconnect == false) {
            this.showErrorOverlay("Disconnected: " + eventString);
            this.showActionOrErrorOnDisconnect = true;
        }
        else {
            this.showDisconnectOverlay("Disconnected: " + eventString + "  \n Click To Restart");
        }
    };
    /**
     * Handles when Web Rtc is connecting
     */
    DelegateBase.prototype.onWebRtcConnecting = function () {
        this.showTextOverlay("Starting connection to server, please wait");
    };
    /**
     * Handles when Web Rtc has connected
     */
    DelegateBase.prototype.onWebRtcConnected = function () {
        this.showTextOverlay("WebRTC connected, waiting for video");
    };
    /**
     * Handles when Web Rtc fails to connect
     */
    DelegateBase.prototype.onWebRtcFailed = function () {
        this.showErrorOverlay("Unable to setup video");
    };
    /**
     * Set up methods and functions to run when the video is initialised
     */
    DelegateBase.prototype.onVideoInitialised = function () { };
    /**
     * Set up functionality to happen when receiving latency test results
     * @param latency - latency test results object
     */
    DelegateBase.prototype.onLatencyTestResult = function (latency) { };
    /**
     * Set up functionality to happen when receiving video statistics
     * @param videoStats - video statistics as a aggregate stats object
     */
    DelegateBase.prototype.onVideoStats = function (videoStats) { };
    /**
     * Set up functionality to happen when calculating the average video encoder qp
     * @param QP - the quality number of the stream
     */
    DelegateBase.prototype.onVideoEncoderAvgQP = function (QP) { };
    /**
     * Set up functionality to happen when receiving and handling initial settings for the UE app
     * @param settings - initial UE app settings
     */
    DelegateBase.prototype.onInitialSettings = function (settings) { };
    /**
     * Set up functionality to happen when setting quality control ownership of a stream
     * @param hasQualityOwnership - does this user have quality ownership of the stream true / false
     */
    DelegateBase.prototype.onQualityControlOwnership = function (hasQualityOwnership) { };
    return DelegateBase;
}());



/***/ }),

/***/ "./src/FreezeFrame/FreezeFrame.ts":
/*!****************************************!*\
  !*** ./src/FreezeFrame/FreezeFrame.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FreezeFrame": () => (/* binding */ FreezeFrame)
/* harmony export */ });
/**
 * A class for managing the freeze frame object
 */
var FreezeFrame = /** @class */ (function () {
    /**
     * Construct a freeze frame
     * @param rootDiv the div that a freeze frame element will be created into
     */
    function FreezeFrame(rootDiv) {
        this.freezeFrameHeight = 0;
        this.freezeFrameWidth = 0;
        this.rootDiv = rootDiv;
        // create the overlay
        this.rootElement = document.createElement('div');
        this.rootElement.id = 'freezeFrame';
        this.rootElement.style.display = 'none';
        this.rootElement.style.pointerEvents = 'none';
        this.rootElement.style.position = 'absolute';
        this.rootElement.style.zIndex = '20';
        // create the image place holder
        this.imageElement = document.createElement('img');
        this.imageElement.style.position = 'absolute';
        // append the image into the root element and append the element to the root div
        this.rootElement.appendChild(this.imageElement);
        this.rootDiv.appendChild(this.rootElement);
    }
    /**
     * Set the freeze frame element for showing
     */
    FreezeFrame.prototype.setElementForShow = function () {
        this.rootElement.style.display = 'block';
    };
    /**
     * Set the freeze frame element for hiding
     */
    FreezeFrame.prototype.setElementForHide = function () {
        this.rootElement.style.display = 'none';
    };
    /**
     * Update the freeze frames image source
     * @param jpeg the freeze frame image as a byte array data
     */
    FreezeFrame.prototype.updateImageElementSource = function (jpeg) {
        var base64 = btoa(jpeg.reduce(function (data, byte) { return data + String.fromCharCode(byte); }, ''));
        this.imageElement.src = 'data:image/jpeg;base64,' + base64;
    };
    /**
     * Set the dimensions for the freeze frame from the element and resize it
     */
    FreezeFrame.prototype.setDimensionsFromElementAndResize = function () {
        this.freezeFrameHeight = this.imageElement.naturalHeight;
        this.freezeFrameWidth = this.imageElement.naturalWidth;
        this.resize();
    };
    /**
     * Resize a freeze frame element
     */
    FreezeFrame.prototype.resize = function () {
        if (this.freezeFrameWidth !== 0 && this.freezeFrameHeight !== 0) {
            var displayWidth = 0;
            var displayHeight = 0;
            var displayTop = 0;
            var displayLeft = 0;
            if (this.enlargeDisplayToFillWindow === null || this.enlargeDisplayToFillWindow === true) {
                var windowAspectRatio = window.innerWidth / window.innerHeight;
                var videoAspectRatio = this.freezeFrameWidth / this.freezeFrameHeight;
                if (windowAspectRatio < videoAspectRatio) {
                    displayWidth = window.innerWidth;
                    displayHeight = Math.floor(window.innerWidth / videoAspectRatio);
                    displayTop = Math.floor((window.innerHeight - displayHeight) * 0.5);
                    displayLeft = 0;
                }
                else {
                    displayWidth = Math.floor(window.innerHeight * videoAspectRatio);
                    displayHeight = window.innerHeight;
                    displayTop = 0;
                    displayLeft = Math.floor((window.innerWidth - displayWidth) * 0.5);
                }
            }
            else {
                // Video is coming in at native resolution, we care more about the player size
                var playerAspectRatio = this.rootDiv.offsetWidth / this.rootDiv.offsetHeight;
                var videoAspectRatio = this.freezeFrameWidth / this.freezeFrameHeight;
                if (playerAspectRatio < videoAspectRatio) {
                    displayWidth = this.rootDiv.offsetWidth;
                    displayHeight = Math.floor(this.rootDiv.offsetWidth / videoAspectRatio);
                    displayTop = Math.floor((this.rootDiv.offsetHeight - displayHeight) * 0.5);
                    displayLeft = 0;
                }
                else {
                    displayWidth = Math.floor(this.rootDiv.offsetHeight * videoAspectRatio);
                    displayHeight = this.rootDiv.offsetHeight;
                    displayTop = 0;
                    displayLeft = Math.floor((this.rootDiv.offsetWidth - displayWidth) * 0.5);
                }
            }
            this.rootElement.style.width = this.rootDiv.offsetWidth + 'px';
            this.rootElement.style.height = this.rootDiv.offsetHeight + 'px';
            this.rootElement.style.left = 0 + 'px';
            this.rootElement.style.top = 0 + 'px';
            this.imageElement.style.width = displayWidth + 'px';
            this.imageElement.style.height = displayHeight + 'px';
            this.imageElement.style.left = displayLeft + 'px';
            this.imageElement.style.top = displayTop + 'px';
        }
    };
    return FreezeFrame;
}());



/***/ }),

/***/ "./src/FreezeFrame/FreezeFrameController.ts":
/*!**************************************************!*\
  !*** ./src/FreezeFrame/FreezeFrameController.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FreezeFrameController": () => (/* binding */ FreezeFrameController)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _FreezeFrame__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FreezeFrame */ "./src/FreezeFrame/FreezeFrame.ts");


/**
 * A class for controlling freeze frame functionality
 */
var FreezeFrameController = /** @class */ (function () {
    /**
     * Construct a freeze frame controller
     * @param rootDiv the div that a freeze frame element will be created into
     */
    function FreezeFrameController(rootDiv) {
        this.receiving = false;
        this.size = 0;
        this.jpeg = undefined;
        this.valid = false;
        this.freezeFrame = new _FreezeFrame__WEBPACK_IMPORTED_MODULE_1__.FreezeFrame(rootDiv);
    }
    /**
     * Show the freeze frame if it is valid
     */
    FreezeFrameController.prototype.showFreezeFrame = function () {
        if (this.valid) {
            this.freezeFrame.setElementForShow();
        }
    };
    /**
     * Hide the freeze frame and set the validity to false
     */
    FreezeFrameController.prototype.hideFreezeFrame = function () {
        this.valid = false;
        this.freezeFrame.setElementForHide();
    };
    /**
     * Update the freeze frames image source and load it
     * @param jpeg the freeze frame image as a byte array data
     * @param onLoadCallBack a call back for managing if the play overlay needs to be shown or not
     */
    FreezeFrameController.prototype.updateFreezeFrameAndShow = function (jpeg, onLoadCallBack) {
        var _this = this;
        this.freezeFrame.updateImageElementSource(jpeg);
        this.freezeFrame.imageElement.onload = function () {
            _this.freezeFrame.setDimensionsFromElementAndResize();
            onLoadCallBack();
        };
    };
    /**
     * Process the new freeze frame image and update it
     * @param view the freeze frame image as a byte array data
     * @param onLoadCallBack a call back for managing if the play overlay needs to be shown or not
     */
    FreezeFrameController.prototype.processFreezeFrameMessage = function (view, onLoadCallBack) {
        // Reset freeze frame if we got a freeze frame message and we are not "receiving" yet.
        if (!this.receiving) {
            this.receiving = true;
            this.valid = false;
            this.size = 0;
            this.jpeg = undefined;
        }
        // Extract total size of freeze frame (across all chunks)
        this.size = (new DataView(view.slice(1, 5).buffer)).getInt32(0, true);
        // Get the jpeg part of the payload
        var jpegBytes = view.slice(1 + 4);
        // Append to existing jpeg that holds the freeze frame
        if (this.jpeg) {
            var jpeg = new Uint8Array(this.jpeg.length + jpegBytes.length);
            jpeg.set(this.jpeg, 0);
            jpeg.set(jpegBytes, this.jpeg.length);
            this.jpeg = jpeg;
        }
        // No existing freeze frame jpeg, make one
        else {
            this.jpeg = jpegBytes;
            this.receiving = true;
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "received first chunk of freeze frame: " + this.jpeg.length + "/" + this.size, 6);
        }
        // Finished receiving freeze frame, we can show it now
        if (this.jpeg.length === this.size) {
            this.receiving = false;
            this.valid = true;
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "received complete freeze frame " + this.size, 6);
            this.updateFreezeFrameAndShow(this.jpeg, onLoadCallBack);
        }
        // We received more data than the freeze frame payload message indicate (this is an error)
        else if (this.jpeg.length > this.size) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "received bigger freeze frame than advertised: " + this.jpeg.length + "/" + this.size);
            this.jpeg = undefined;
            this.receiving = false;
        }
    };
    return FreezeFrameController;
}());



/***/ }),

/***/ "./src/Inputs/FakeTouchController.ts":
/*!*******************************************!*\
  !*** ./src/Inputs/FakeTouchController.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FakeTouchController": () => (/* binding */ FakeTouchController)
/* harmony export */ });
/* harmony import */ var _UeInstanceMessage_UeInputMouseMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../UeInstanceMessage/UeInputMouseMessage */ "./src/UeInstanceMessage/UeInputMouseMessage.ts");
/* harmony import */ var _MouseButtons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MouseButtons */ "./src/Inputs/MouseButtons.ts");


/**
 * Allows for the usage of fake touch events and implements ITouchController
 * @param dataChannelController - The controller for the Data channel
 * @param videoPlayerElement - The video player DOM element
 */
var FakeTouchController = /** @class */ (function () {
    function FakeTouchController(dataChannelController, videoPlayerElement) {
        var _this = this;
        this.ueInputMouseMessage = new _UeInstanceMessage_UeInputMouseMessage__WEBPACK_IMPORTED_MODULE_0__.UeInputMouseMessage(dataChannelController);
        this.videoPlayerElement = videoPlayerElement;
        document.ontouchstart = function (ev) { return _this.onTouchStart(ev); };
        document.ontouchend = function (ev) { return _this.onTouchEnd(ev); };
        document.ontouchmove = function (ev) { return _this.onTouchMove(ev); };
    }
    /**
     * When a touch event begins
     * @param touch - the activating touch event
     */
    FakeTouchController.prototype.onTouchStart = function (touch) {
        if (this.finger == null) {
            var first_touch = touch.changedTouches[0];
            this.finger = {
                ID: first_touch.identifier,
                X: first_touch.clientX - this.videoPlayerElement.getBoundingClientRect().left,
                Y: first_touch.clientY - -this.videoPlayerElement.getBoundingClientRect().top
            };
            var mouseEvent = new MouseEvent(touch.type, first_touch);
            this.videoPlayerElement.onmouseenter(mouseEvent);
            this.ueInputMouseMessage.sendMouseDown(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.mainButton, this.finger.X, this.finger.Y);
        }
    };
    /**
     * When a touch event ends
     * @param touchEvent - the activating touch event
     */
    FakeTouchController.prototype.onTouchEnd = function (touchEvent) {
        for (var i = 0; i < touchEvent.changedTouches.length; i++) {
            var touch = touchEvent.changedTouches[i];
            if (touch.identifier === this.finger.ID) {
                var x = touch.clientX - this.videoPlayerElement.getBoundingClientRect().left;
                var y = touch.clientY - this.videoPlayerElement.getBoundingClientRect().top;
                this.ueInputMouseMessage.sendMouseUp(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.mainButton, x, y);
                var mouseEvent = new MouseEvent(touchEvent.type, touch);
                this.videoPlayerElement.onmouseleave(mouseEvent);
                this.finger = null;
            }
        }
    };
    /**
     * On a Move touch event
     * @param touchEvent - the activating touch event
     */
    FakeTouchController.prototype.onTouchMove = function (touchEvent) {
        for (var i = 0; i < touchEvent.touches.length; i++) {
            var touch = touchEvent.touches[i];
            if (touch.identifier === this.finger.ID) {
                var x = touch.clientX - this.videoPlayerElement.getBoundingClientRect().left;
                var y = touch.clientY - this.videoPlayerElement.getBoundingClientRect().top;
                this.ueInputMouseMessage.sendMouseMove(x, y, x - this.finger.X, y - this.finger.Y);
                this.finger.X = x;
                this.finger.Y = y;
            }
        }
    };
    return FakeTouchController;
}());



/***/ }),

/***/ "./src/Inputs/GamepadController.ts":
/*!*****************************************!*\
  !*** ./src/Inputs/GamepadController.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GamePadController": () => (/* binding */ GamePadController)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _UeInstanceMessage_UeInputGamePadMessage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../UeInstanceMessage/UeInputGamePadMessage */ "./src/UeInstanceMessage/UeInputGamePadMessage.ts");


/**
 * The class that handles the functionality of gamepads and controllers
 */
var GamePadController = /** @class */ (function () {
    /**
     * @param dataChannelController - the data chanel controller
     */
    function GamePadController(dataChannelController) {
        var _this = this;
        this.ueInputGamePadMessage = new _UeInstanceMessage_UeInputGamePadMessage__WEBPACK_IMPORTED_MODULE_1__.UeInputGamePadMessage(dataChannelController);
        if ("GamepadEvent" in window) {
            window.addEventListener("gamepadconnected", function (ev) { return _this.gamePadConnectHandler(ev); });
            window.addEventListener("gamepaddisconnected", function (ev) { return _this.gamePadDisconnectHandler(ev); });
        }
        else if ("WebKitGamepadEvent" in window) {
            window.addEventListener("webkitgamepadconnected", function (ev) { return _this.gamePadConnectHandler(ev); });
            window.addEventListener("webkitgamepaddisconnected", function (ev) { return _this.gamePadDisconnectHandler(ev); });
        }
        this.controllers = [];
    }
    /**
     * Connects the gamepad handler
     * @param gamePadEvent - the activating gamepad event
     */
    GamePadController.prototype.gamePadConnectHandler = function (gamePadEvent) {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Gamepad connect handler", 6);
        var gamepad = gamePadEvent.gamepad;
        var temp = {
            currentState: gamepad,
            prevState: gamepad
        };
        this.controllers.push(temp);
        this.controllers[gamepad.index].currentState = gamepad;
        this.controllers[gamepad.index].prevState = gamepad;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "gamepad: " + gamepad.id + " connected", 6);
        window.requestAnimationFrame(function () { return _this.updateStatus(); });
    };
    /**
     * Disconnects the gamepad handler
     * @param gamePadEvent - the activating gamepad event
     */
    GamePadController.prototype.gamePadDisconnectHandler = function (gamePadEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Gamepad disconnect handler", 6);
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "gamepad: " + gamePadEvent.gamepad.id + " disconnected", 6);
        delete this.controllers[gamePadEvent.gamepad.index];
        this.controllers = this.controllers.filter(function (controller) { return controller !== undefined; });
    };
    /**
     * Scan for connected gamepads
     */
    GamePadController.prototype.scanGamePads = function () {
        var gamepads = ((navigator.getGamepads) ? navigator.getGamepads() : []); //  : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);
        for (var i = 0; i < gamepads.length; i++) {
            if (gamepads[i] && (gamepads[i].index in this.controllers)) {
                this.controllers[gamepads[i].index].currentState = gamepads[i];
            }
        }
    };
    /**
     * Updates the status of the gamepad and sends the inputs
     */
    GamePadController.prototype.updateStatus = function () {
        var _this = this;
        this.scanGamePads();
        // Iterate over multiple controllers in the case the multiple gamepads are connected
        for (var _i = 0, _a = this.controllers; _i < _a.length; _i++) {
            var controller = _a[_i];
            try {
                var currentState = controller.currentState;
                for (var i = 0; i < controller.currentState.buttons.length; i++) {
                    var currentButton = controller.currentState.buttons[i];
                    var previousButton = controller.prevState.buttons[i];
                    // Button 6 is actually the left trigger, send it to UE as an analog axis
                    // Button 7 is actually the right trigger, send it to UE as an analog axis
                    // The rest are normal buttons. Treat as such
                    if (currentButton.pressed && !previousButton.pressed) {
                        // New press
                        if (i == 6) {
                            this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 5, currentButton.value);
                        }
                        else if (i == 7) {
                            this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 6, currentButton.value);
                        }
                        else {
                            this.ueInputGamePadMessage.sendControllerButtonPressed(currentState.index, i, false);
                        }
                    }
                    else if (!currentButton.pressed && previousButton.pressed) {
                        // release
                        if (i == 6) {
                            this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 5, 0);
                        }
                        else if (i == 7) {
                            this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 6, 0);
                        }
                        else {
                            this.ueInputGamePadMessage.sendControllerButtonReleased(currentState.index, i);
                        }
                    }
                    else if (currentButton.pressed && previousButton.pressed) {
                        // repeat press / hold
                        if (i == 6) {
                            this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 5, currentButton.value);
                        }
                        else if (i == 7) {
                            this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 6, currentButton.value);
                        }
                        else {
                            this.ueInputGamePadMessage.sendControllerButtonPressed(currentState.index, i, true);
                        }
                    }
                    // Last case is button isn't currently pressed and wasn't pressed before. This doesn't need an else block
                }
                for (var i = 0; i < currentState.axes.length; i += 2) {
                    var x = parseFloat(currentState.axes[i].toFixed(4));
                    // https://w3c.github.io/gamepad/#remapping Gamepad browser side standard mapping has positive down, negative up. This is downright disgusting. So we fix it.
                    var y = -parseFloat(currentState.axes[i + 1].toFixed(4));
                    if (i === 0) {
                        // left stick
                        // axis 1 = left horizontal
                        this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 1, x);
                        // axis 2 = left vertical
                        this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 2, y);
                    }
                    else if (i === 2) {
                        // right stick
                        // axis 3 = right horizontal
                        this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 3, x);
                        // axis 4 = right vertical
                        this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 4, y);
                    }
                }
                this.controllers[currentState.index].prevState = currentState;
            }
            catch (error) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Oh dear the gamepad poll loop has thrown an error");
            }
        }
        window.requestAnimationFrame(function () { return _this.updateStatus(); });
    };
    return GamePadController;
}());



/***/ }),

/***/ "./src/Inputs/GyroController.ts":
/*!**************************************!*\
  !*** ./src/Inputs/GyroController.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GyroController": () => (/* binding */ GyroController)
/* harmony export */ });
/**
 * The Class that handles gyro input
 */
var GyroController = /** @class */ (function () {
    function GyroController(dataChannelController) {
        this.dataChannelController = dataChannelController;
    }
    return GyroController;
}());



/***/ }),

/***/ "./src/Inputs/InputController.ts":
/*!***************************************!*\
  !*** ./src/Inputs/InputController.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "InputController": () => (/* binding */ InputController)
/* harmony export */ });
/* harmony import */ var _FakeTouchController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FakeTouchController */ "./src/Inputs/FakeTouchController.ts");
/* harmony import */ var _KeyboardController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./KeyboardController */ "./src/Inputs/KeyboardController.ts");
/* harmony import */ var _MouseController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MouseController */ "./src/Inputs/MouseController.ts");
/* harmony import */ var _TouchController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TouchController */ "./src/Inputs/TouchController.ts");
/* harmony import */ var _GamepadController__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GamepadController */ "./src/Inputs/GamepadController.ts");
/* harmony import */ var _Config_Config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Config/Config */ "./src/Config/Config.ts");
/* harmony import */ var _VideoPlayer_VideoPlayerMouseLockedEvents__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../VideoPlayer/VideoPlayerMouseLockedEvents */ "./src/VideoPlayer/VideoPlayerMouseLockedEvents.ts");
/* harmony import */ var _VideoPlayer_VideoPlayerMouseHoverEvents__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../VideoPlayer/VideoPlayerMouseHoverEvents */ "./src/VideoPlayer/VideoPlayerMouseHoverEvents.ts");
/* harmony import */ var _GyroController__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./GyroController */ "./src/Inputs/GyroController.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");










/**
 * Class for handling inputs for mouse and keyboard
 */
var InputController = /** @class */ (function () {
    /**
     *
     * @param dataChannelController - the data channel controller
     */
    function InputController(dataChannelController, videoElementProvider) {
        this.dataChannelController = dataChannelController;
        this.videoElementProvider = videoElementProvider;
    }
    /**
     * registers browser key events
     * @param suppressBrowserKeys - option to suppress browser keys
     */
    InputController.prototype.registerKeyBoard = function (suppressBrowserKeys) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Register Keyboard Events", 7);
        this.keyboardController = new _KeyboardController__WEBPACK_IMPORTED_MODULE_1__.KeyboardController(this.dataChannelController, suppressBrowserKeys);
        this.keyboardController.registerKeyBoardEvents();
    };
    /**
     * register mouse events based on a control type
     * @param controlScheme - if the mouse is either hovering or locked
     */
    InputController.prototype.registerMouse = function (controlScheme) {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Register Mouse Events", 7);
        // casting these as any as they do not have the moz attributes we require
        var videoElement = this.videoElementProvider.getVideoElement();
        var videoInputBindings;
        this.mouseController = new _MouseController__WEBPACK_IMPORTED_MODULE_2__.MouseController(this.dataChannelController, this.videoElementProvider);
        switch (controlScheme) {
            case _Config_Config__WEBPACK_IMPORTED_MODULE_5__.ControlSchemeType.LockedMouse:
                videoInputBindings = new _VideoPlayer_VideoPlayerMouseLockedEvents__WEBPACK_IMPORTED_MODULE_6__.VideoPlayerMouseLockedEvents(this.videoElementProvider, this.mouseController);
                videoElement.onclick = function (event) { return _this.videoElementProvider.setClickActions(event); };
                document.addEventListener('pointerlockchange', function () { return videoInputBindings.handleLockStateChange(); }, false);
                document.addEventListener('mozpointerlockchange', function () { return videoInputBindings.handleLockStateChange(); }, false);
                break;
            case _Config_Config__WEBPACK_IMPORTED_MODULE_5__.ControlSchemeType.HoveringMouse:
                videoInputBindings = new _VideoPlayer_VideoPlayerMouseHoverEvents__WEBPACK_IMPORTED_MODULE_7__.VideoPlayerMouseHoverEvents(this.mouseController);
                // set the onclick to null if the input bindings were previously set to pointerlock
                videoElement.onclick = null;
                document.onmousemove = function (mouseEvent) { return videoInputBindings.handleMouseMove(mouseEvent); };
                document.onwheel = function (mouseEvent) { return videoInputBindings.handleMouseWheel(mouseEvent); };
                videoElement.onmousedown = function (mouseEvent) { return videoInputBindings.handleMouseDown(mouseEvent); };
                videoElement.onmouseup = function (mouseEvent) { return videoInputBindings.handleMouseUp(mouseEvent); };
                break;
            default:
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "unknown Control Scheme Type Defaulting to Locked Mouse Events");
                break;
        }
    };
    /**
     * register touch events
     * @param fakeMouseTouch - the faked mouse touch event
     * @param playerElement - the player elements DOM
     */
    InputController.prototype.registerTouch = function (fakeMouseTouch, playerElement) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Registering Touch", 6);
        if (fakeMouseTouch) {
            this.touchController = new _FakeTouchController__WEBPACK_IMPORTED_MODULE_0__.FakeTouchController(this.dataChannelController, playerElement.getElementsByTagName("video")[0]);
        }
        else {
            this.touchController = new _TouchController__WEBPACK_IMPORTED_MODULE_3__.TouchController(this.dataChannelController, playerElement, this.videoElementProvider);
        }
    };
    /**
     * registers a gamepad
     */
    InputController.prototype.registerGamePad = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Register Game Pad", 7);
        this.gamePadController = new _GamepadController__WEBPACK_IMPORTED_MODULE_4__.GamePadController(this.dataChannelController);
    };
    /**
     * registers a gyro device
     */
    InputController.prototype.registerGyro = function () {
        this.gyroController = new _GyroController__WEBPACK_IMPORTED_MODULE_8__.GyroController(this.dataChannelController);
    };
    return InputController;
}());



/***/ }),

/***/ "./src/Inputs/KeyboardController.ts":
/*!******************************************!*\
  !*** ./src/Inputs/KeyboardController.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KeyboardController": () => (/* binding */ KeyboardController)
/* harmony export */ });
/* harmony import */ var _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SpecialKeyCodes */ "./src/Inputs/SpecialKeyCodes.ts");
/* harmony import */ var _UeInstanceMessage_UeInputKeyboardMessage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../UeInstanceMessage/UeInputKeyboardMessage */ "./src/UeInstanceMessage/UeInputKeyboardMessage.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");



/**
 * Handles the Keyboard Inputs for the document
 */
var KeyboardController = /** @class */ (function () {
    /**
     *
     * @param dataChannelController - Data Channel Controller
     * @param suppressBrowserKeys - Suppress Browser Keys
     */
    function KeyboardController(dataChannelController, suppressBrowserKeys) {
        this.ueInputKeyBoardMessage = new _UeInstanceMessage_UeInputKeyboardMessage__WEBPACK_IMPORTED_MODULE_1__.UeInputKeyboardMessage(dataChannelController);
        this.suppressBrowserKeys = suppressBrowserKeys;
    }
    /**
     * Registers document keyboard events with the controller
     */
    KeyboardController.prototype.registerKeyBoardEvents = function () {
        var _this = this;
        document.onkeydown = function (ev) { return _this.handleOnKeyDown(ev); };
        document.onkeyup = function (ev) { return _this.handleOnKeyUp(ev); };
        //This has been deprecated as at Jun 13 2021
        document.onkeypress = function (ev) { return _this.handleOnKeyPress(ev); };
    };
    /**
     * Handles When a key is down
     * @param keyboardEvent - Keyboard event
     */
    KeyboardController.prototype.handleOnKeyDown = function (keyboardEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "handleOnKeyDown", 6);
        this.ueInputKeyBoardMessage.sendKeyDown(this.getKeycode(keyboardEvent), keyboardEvent.repeat);
        /* this needs to be tested but it is believed that this is not needed*/
        // backSpace is not considered a keypress in JavaScript but we need it
        // to be so characters may be deleted in a UE4 text entry field.
        if (keyboardEvent.keyCode === _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.backSpace) {
            //let temp: KeyboardEvent = {charCode: SpecialKeyCodes.backSpace};
            //document.onkeypress({ charCode: SpecialKeyCodes.backSpace });
        }
        if (this.suppressBrowserKeys && this.isKeyCodeBrowserKey(keyboardEvent.keyCode)) {
            keyboardEvent.preventDefault();
        }
    };
    /**
     * handles when a key is up
     * @param keyboardEvent - Keyboard event
     */
    KeyboardController.prototype.handleOnKeyUp = function (keyboardEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "handleOnKeyUp", 6);
        this.ueInputKeyBoardMessage.sendKeyUp(this.getKeycode(keyboardEvent));
        if (this.suppressBrowserKeys && this.isKeyCodeBrowserKey(keyboardEvent.keyCode)) {
            keyboardEvent.preventDefault();
        }
    };
    /**
     * Handles when a key is press
     * @param keyboard - Keyboard Event
     */
    KeyboardController.prototype.handleOnKeyPress = function (keyboard) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "handleOnkeypress", 6);
        this.ueInputKeyBoardMessage.sendKeyPress(keyboard.charCode);
    };
    /**
     * Gets the Keycode of the Key pressed
     * @param keyboardEvent - Key board Event
     * @returns the key code of the Key
     */
    KeyboardController.prototype.getKeycode = function (keyboardEvent) {
        //Need to move this to a newer version using keyboard event location. as keyboardEvent.keycode is deprecated
        if (keyboardEvent.keyCode === _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.shift && keyboardEvent.code === 'ShiftRight')
            return _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.rightShift;
        else if (keyboardEvent.keyCode === _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.control && keyboardEvent.code === 'ControlRight')
            return _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.rightControl;
        else if (keyboardEvent.keyCode === _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.alt && keyboardEvent.code === 'AltRight')
            return _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.rightAlt;
        else
            return keyboardEvent.keyCode;
    };
    /**
     * Browser keys do not have a charCode so we only need to test keyCode.
     */
    KeyboardController.prototype.isKeyCodeBrowserKey = function (keyCode) {
        // Function keys or tab key.
        return keyCode >= 112 && keyCode <= 123 || keyCode === 9;
    };
    return KeyboardController;
}());

/* 5457524f4d4d */ 


/***/ }),

/***/ "./src/Inputs/MouseButtons.ts":
/*!************************************!*\
  !*** ./src/Inputs/MouseButtons.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MouseButton": () => (/* binding */ MouseButton),
/* harmony export */   "MouseButtonsMask": () => (/* binding */ MouseButtonsMask)
/* harmony export */ });
/**
 * Mouse Button Data
 * {@link https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button}
 */
var MouseButton = /** @class */ (function () {
    function MouseButton() {
    }
    MouseButton.mainButton = 0; // Left button.
    MouseButton.auxiliaryButton = 1; // Wheel button.
    MouseButton.secondaryButton = 2; // Right button.
    MouseButton.fourthButton = 3; // Browser Back button.
    MouseButton.fifthButton = 4; // Browser Forward button.
    return MouseButton;
}());

/**
 * Mouse Button Mask Data
 * {@link https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons}
 */
var MouseButtonsMask = /** @class */ (function () {
    function MouseButtonsMask() {
    }
    MouseButtonsMask.primaryButton = 1; // Left button.
    MouseButtonsMask.secondaryButton = 2; // Right button.
    MouseButtonsMask.auxiliaryButton = 4; // Wheel button.
    MouseButtonsMask.fourthButton = 8; // Browser Back button.
    MouseButtonsMask.fifthButton = 16; // Browser Forward button.
    return MouseButtonsMask;
}());



/***/ }),

/***/ "./src/Inputs/MouseController.ts":
/*!***************************************!*\
  !*** ./src/Inputs/MouseController.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MouseController": () => (/* binding */ MouseController)
/* harmony export */ });
/* harmony import */ var _UeInstanceMessage_UeInputMouseMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../UeInstanceMessage/UeInputMouseMessage */ "./src/UeInstanceMessage/UeInputMouseMessage.ts");
/* harmony import */ var _MouseButtons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MouseButtons */ "./src/Inputs/MouseButtons.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");



/**
 * Handles the Mouse Inputs for the document
 */
var MouseController = /** @class */ (function () {
    /**
     *
     * @param dataChannelController - Data Channel Controller
     */
    function MouseController(dataChannelController, videoElementProvider) {
        this.unsignedOutOfRange = 65535;
        this.signedOutOfRange = 32767;
        this.printInputs = false;
        this.ueInputMouseMessage = new _UeInstanceMessage_UeInputMouseMessage__WEBPACK_IMPORTED_MODULE_0__.UeInputMouseMessage(dataChannelController);
        this.videoElementProvider = videoElementProvider;
    }
    /**
     * Handle when a mouse button is released
     * @param buttons - Mouse Button
     * @param X - Mouse pointer X coordinate
     * @param Y - Mouse pointer Y coordinate
     */
    MouseController.prototype.releaseMouseButtons = function (buttons, X, Y) {
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.primaryButton) {
            this.sendMouseUp(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.mainButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.secondaryButton) {
            this.sendMouseUp(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.secondaryButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.auxiliaryButton) {
            this.sendMouseUp(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.auxiliaryButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.fourthButton) {
            this.sendMouseUp(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.fourthButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.fifthButton) {
            this.sendMouseUp(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.fifthButton, X, Y);
        }
    };
    /**
     * Handle when a mouse button is pressed
     * @param buttons - Mouse Button
     * @param X - Mouse pointer X coordinate
     * @param Y - Mouse pointer Y coordinate
     */
    MouseController.prototype.pressMouseButtons = function (buttons, X, Y) {
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.primaryButton) {
            this.sendMouseDown(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.mainButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.secondaryButton) {
            this.sendMouseDown(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.secondaryButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.auxiliaryButton) {
            this.sendMouseDown(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.auxiliaryButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.fourthButton) {
            this.sendMouseDown(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.fourthButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.fifthButton) {
            this.sendMouseDown(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.fifthButton, X, Y);
        }
    };
    /**
     * Handle when a mouse is moved
     * @param X - Mouse X Coordinate
     * @param Y - Mouse Y Coordinate
     * @param deltaX - Mouse Delta X Coordinate
     * @param deltaY - Mouse Delta Y Coordinate
     */
    MouseController.prototype.sendMouseMove = function (X, Y, deltaX, deltaY) {
        if (this.printInputs) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "x: " + X + ", y:" + Y + ", dX: " + deltaX + ", dY: " + deltaY, 7);
        }
        var mouseCord = this.normaliseAndQuantiseUnsigned(X, Y);
        var deltaCode = this.normaliseAndQuantiseSigned(deltaX, deltaY);
        this.ueInputMouseMessage.sendMouseMove(mouseCord.x, mouseCord.y, deltaCode.x, deltaCode.y);
    };
    /**
     * Handles when a mouse button is pressed down
     * @param button - Mouse Button Pressed
     * @param X  - Mouse X Coordinate
     * @param Y  - Mouse Y Coordinate
     */
    MouseController.prototype.sendMouseDown = function (button, X, Y) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "mouse button " + button + " down at (" + X + ", " + Y + ")", 6);
        var coord = this.normaliseAndQuantiseUnsigned(X, Y);
        this.ueInputMouseMessage.sendMouseDown(button, coord.x, coord.y);
    };
    /**
     * Handles when a mouse button is pressed up
     * @param button - Mouse Button Pressed
     * @param X  - Mouse X Coordinate
     * @param Y  - Mouse Y Coordinate
     */
    MouseController.prototype.sendMouseUp = function (button, X, Y) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "mouse button " + button + " up at (" + X + ", " + Y + ")", 6);
        var coord = this.normaliseAndQuantiseUnsigned(X, Y);
        this.ueInputMouseMessage.sendMouseUp(button, coord.x, coord.y);
    };
    /**
     * Handles when a mouse wheel event
     * @param deltaY - Mouse Wheel data
     * @param X  - Mouse X Coordinate
     * @param Y  - Mouse Y Coordinate
     */
    MouseController.prototype.sendMouseWheel = function (deltaY, X, Y) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "mouse wheel with delta " + deltaY + " at (" + X + ", " + Y + ")", 6);
        var coord = this.normaliseAndQuantiseUnsigned(X, Y);
        this.ueInputMouseMessage.sendMouseWheel(deltaY, coord.x, coord.y);
    };
    /**
     * Handles mouse enter
     */
    MouseController.prototype.sendMouseEnter = function () {
        this.ueInputMouseMessage.sendMouseEnter();
    };
    /**
     * Handles mouse Leave
     */
    MouseController.prototype.sendMouseLeave = function () {
        this.ueInputMouseMessage.sendMouseLeave();
    };
    /**
     * Normalises and Quantised the Mouse Coordinates
     * @param x - Mouse X Coordinate
     * @param y - Mouse Y Coordinate
     * @returns - Normalize And Quantize Unsigned Data Type
     */
    MouseController.prototype.normaliseAndQuantiseUnsigned = function (x, y) {
        var rootDiv = this.videoElementProvider.getVideoParentElement();
        var videoElement = this.videoElementProvider.getVideoElement();
        if (rootDiv && videoElement) {
            var playerAspectRatio = rootDiv.clientHeight / rootDiv.clientWidth;
            var videoAspectRatio = videoElement.videoHeight / videoElement.videoWidth;
            // Unsigned XY positions are the ratio (0.0..1.0) along a viewport axis,
            // quantized into an uint16 (0..65536).
            // Signed XY deltas are the ratio (-1.0..1.0) along a viewport axis,
            // quantized into an int16 (-32767..32767).
            // This allows the browser viewport and client viewport to have a different
            // size.
            // Hack: Currently we set an out-of-range position to an extreme (65535)
            // as we can't yet accurately detect mouse enter and leave events
            // precisely inside a video with an aspect ratio which causes mattes.
            if (playerAspectRatio > videoAspectRatio) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio', 6);
                var ratio = playerAspectRatio / videoAspectRatio;
                // Unsigned.
                var normalizedX = x / rootDiv.clientWidth;
                var normalizedY = ratio * (y / rootDiv.clientHeight - 0.5) + 0.5;
                if (normalizedX < 0.0 || normalizedX > 1.0 || normalizedY < 0.0 || normalizedY > 1.0) {
                    return {
                        inRange: false,
                        x: this.unsignedOutOfRange,
                        y: this.unsignedOutOfRange
                    };
                }
                else {
                    return {
                        inRange: true,
                        x: normalizedX * (this.unsignedOutOfRange + 1),
                        y: normalizedY * (this.unsignedOutOfRange + 1)
                    };
                }
            }
            else {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio', 6);
                var ratio = videoAspectRatio / playerAspectRatio;
                // Unsigned.
                var normalizedX = ratio * (x / rootDiv.clientWidth - 0.5) + 0.5;
                var normalizedY = y / rootDiv.clientHeight;
                if (normalizedX < 0.0 || normalizedX > 1.0 || normalizedY < 0.0 || normalizedY > 1.0) {
                    return {
                        inRange: false,
                        x: this.unsignedOutOfRange,
                        y: this.unsignedOutOfRange
                    };
                }
                else {
                    return {
                        inRange: true,
                        x: normalizedX * (this.unsignedOutOfRange + 1),
                        y: normalizedY * (this.unsignedOutOfRange + 1)
                    };
                }
            }
        }
    };
    /**
     * Denormalises and unquantised the Mouse Coordinates
     * @param x - Mouse X Coordinate
     * @param y - Mouse Y Coordinate
     * @returns - unquantise and Denormalize Unsigned Data Type
     */
    MouseController.prototype.unquantiseAndDenormaliseUnsigned = function (x, y) {
        var rootDiv = this.videoElementProvider.getVideoParentElement();
        var videoElement = this.videoElementProvider.getVideoElement();
        if (rootDiv && videoElement) {
            var playerAspectRatio = rootDiv.clientHeight / rootDiv.clientWidth;
            var videoAspectRatio = videoElement.videoHeight / videoElement.videoWidth;
            // Unsigned XY positions are the ratio (0.0..1.0) along a viewport axis,
            // quantized into an uint16 (0..65536).
            // Signed XY deltas are the ratio (-1.0..1.0) along a viewport axis,
            // quantized into an int16 (-32767..32767).
            // This allows the browser viewport and client viewport to have a different
            // size.
            // Hack: Currently we set an out-of-range position to an extreme (65535)
            // as we can't yet accurately detect mouse enter and leave events
            // precisely inside a video with an aspect ratio which causes mattes.
            if (playerAspectRatio > videoAspectRatio) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio', 6);
                var ratio = playerAspectRatio / videoAspectRatio;
                // Unsigned.
                var normalizedX = x / (this.unsignedOutOfRange + 1);
                var normalizedY = (y / (this.unsignedOutOfRange + 1) - 0.5) / ratio + 0.5;
                return {
                    x: normalizedX * rootDiv.clientWidth,
                    y: normalizedY * rootDiv.clientHeight
                };
            }
            else {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio', 6);
                var ratio = videoAspectRatio / playerAspectRatio;
                // Unsigned.
                var normalizedX = (x / (this.unsignedOutOfRange + 1) - 0.5) / ratio + 0.5;
                var normalizedY = y / (this.unsignedOutOfRange + 1);
                return {
                    x: normalizedX * rootDiv.clientWidth,
                    y: normalizedY * rootDiv.clientHeight
                };
            }
        }
    };
    /**
     * Normalises and Quantised the Mouse Coordinates
     * @param x - Mouse X Coordinate
     * @param y - Mouse Y Coordinate
     * @returns - Normalize And Quantize Signed Data Type
     */
    MouseController.prototype.normaliseAndQuantiseSigned = function (x, y) {
        var rootDiv = this.videoElementProvider.getVideoParentElement();
        var videoElement = this.videoElementProvider.getVideoElement();
        if (rootDiv && videoElement) {
            var playerAspectRatio = rootDiv.clientHeight / rootDiv.clientWidth;
            var videoAspectRatio = videoElement.videoHeight / videoElement.videoWidth;
            // Unsigned XY positions are the ratio (0.0..1.0) along a viewport axis,
            // quantized into an uint16 (0..65536).
            // Signed XY deltas are the ratio (-1.0..1.0) along a viewport axis,
            // quantized into an int16 (-32767..32767).
            // This allows the browser viewport and client viewport to have a different
            // size.
            // Hack: Currently we set an out-of-range position to an extreme (65535)
            // as we can't yet accurately detect mouse enter and leave events
            // precisely inside a video with an aspect ratio which causes mattes.
            if (playerAspectRatio > videoAspectRatio) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio', 6);
                var ratio = playerAspectRatio / videoAspectRatio;
                // Unsigned.
                var normalizedX = x / (0.5 * rootDiv.clientWidth);
                var normalizedY = (ratio * y) / (0.5 * rootDiv.clientHeight);
                return {
                    x: normalizedX * this.signedOutOfRange,
                    y: normalizedY * this.signedOutOfRange
                };
            }
            else {
                if (this.printInputs) {
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio', 6);
                }
                var ratio = videoAspectRatio / playerAspectRatio;
                // Signed.
                var normalizedX = (ratio * x) / (0.5 * rootDiv.clientWidth);
                var normalizedY = y / (0.5 * rootDiv.clientHeight);
                return {
                    x: normalizedX * this.signedOutOfRange,
                    y: normalizedY * this.signedOutOfRange
                };
            }
        }
    };
    return MouseController;
}());



/***/ }),

/***/ "./src/Inputs/SpecialKeyCodes.ts":
/*!***************************************!*\
  !*** ./src/Inputs/SpecialKeyCodes.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpecialKeyCodes": () => (/* binding */ SpecialKeyCodes)
/* harmony export */ });
/**
 * Registers the Special Key codes
 *  Must be kept in sync with JavaScriptKeyCodeToFKey C++ array.
 * The index of the entry in the array is the special key code given below.
 */
var SpecialKeyCodes = /** @class */ (function () {
    function SpecialKeyCodes() {
    }
    SpecialKeyCodes.backSpace = 8;
    SpecialKeyCodes.shift = 16;
    SpecialKeyCodes.control = 17;
    SpecialKeyCodes.alt = 18;
    SpecialKeyCodes.rightShift = 253;
    SpecialKeyCodes.rightControl = 254;
    SpecialKeyCodes.rightAlt = 255;
    return SpecialKeyCodes;
}());



/***/ }),

/***/ "./src/Inputs/TouchController.ts":
/*!***************************************!*\
  !*** ./src/Inputs/TouchController.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TouchController": () => (/* binding */ TouchController)
/* harmony export */ });
/* harmony import */ var _UeInstanceMessage_UeInputTouchMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../UeInstanceMessage/UeInputTouchMessage */ "./src/UeInstanceMessage/UeInputTouchMessage.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");


/**
 * Handles the Touch input Events
 */
var TouchController = /** @class */ (function () {
    /**
     *
     * @param dataChannelController - the data channel controller
     * @param playerElement - the player element DOM
     */
    function TouchController(dataChannelController, playerElement, videoElementProvider) {
        var _this = this;
        this.ueInputTouchMessage = new _UeInstanceMessage_UeInputTouchMessage__WEBPACK_IMPORTED_MODULE_0__.UeInputTouchMessage(dataChannelController, videoElementProvider);
        this.playerElement = playerElement;
        this.playerElement.ontouchstart = function (ev) { return _this.onTouchStart(ev); };
        this.playerElement.ontouchend = function (ev) { return _this.onTouchEnd(ev); };
        this.playerElement.ontouchmove = function (ev) { return _this.onTouchMove(ev); };
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "Touch Events Registered", 6);
    }
    /**
     * When a touch event starts
     * @param event - the touch event being intercepted
     */
    TouchController.prototype.onTouchStart = function (touchEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "on Touch Start", 6);
        for (var i = 0; i < touchEvent.changedTouches.length; i++) {
            var touch = touchEvent.changedTouches[i];
            var finger = this.ueInputTouchMessage.fingers.pop();
            if (finger === undefined) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "who has more then 10 fingers", 6);
            }
            this.ueInputTouchMessage.fingersIds[touch.identifier] = finger;
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "touch.identifier: " + touch.identifier, 6);
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "finger: " + finger, 6);
        }
        this.ueInputTouchMessage.sendTouchStart(touchEvent.changedTouches);
        touchEvent.preventDefault();
    };
    /**
     * When a touch event ends
     * @param event - the touch event being intercepted
     */
    TouchController.prototype.onTouchEnd = function (touchEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "on Touch END", 6);
        for (var i = 0; i < touchEvent.changedTouches.length; i++) {
            var touch = touchEvent.changedTouches[i];
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "on Forget Touch", 6);
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "touch id: " + touch.identifier, 6);
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "Fingers id Touch id: " + this.ueInputTouchMessage.fingersIds[touch.identifier], 6);
            this.ueInputTouchMessage.fingers.push(this.ueInputTouchMessage.fingersIds[touch.identifier]);
            this.ueInputTouchMessage.fingers.sort(function (a, b) { return b - a; });
            delete this.ueInputTouchMessage.fingersIds[touch.identifier];
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "touch.identifier: " + touch.identifier, 6);
        }
        this.ueInputTouchMessage.sendTouchEnd(touchEvent.changedTouches);
        touchEvent.preventDefault();
    };
    /**
     * when a moving touch event occurs
     * @param event - the touch event being intercepted
     */
    TouchController.prototype.onTouchMove = function (touchEvent) {
        for (var i = 0; i < touchEvent.touches.length; i++) {
            var touch = touchEvent.touches[i];
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "X: " + touch.clientX + " Y: " + touch.clientY, 6);
        }
        this.ueInputTouchMessage.sendTouchMove(touchEvent.touches);
        touchEvent.preventDefault();
    };
    return TouchController;
}());



/***/ }),

/***/ "./src/Logger/Logger.ts":
/*!******************************!*\
  !*** ./src/Logger/Logger.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Logger": () => (/* binding */ Logger)
/* harmony export */ });
var Logger = /** @class */ (function () {
    function Logger() {
    }
    /**
     * Captures the stack and returns it
     * @returns the current stack
     */
    Logger.GetStackTrace = function () {
        var error = new Error();
        var formattedStack = "No Stack Available for this browser";
        // format the error
        if (error.stack) {
            formattedStack = error.stack.toString().replace(/Error/g, '');
        }
        return formattedStack;
    };
    ;
    /**
     * Set the log verbosity level
     */
    Logger.SetLoggerVerbosity = function (verboseLogLevel) {
        if (this.verboseLogLevel != null) {
            this.verboseLogLevel = verboseLogLevel;
        }
    };
    /**
     * The standard logging output
     * @param stack - the stack trace
     * @param message - the message to be logged
     * @param verbosity - the verbosity level
     */
    Logger.Log = function (stack, message, verbosity) {
        if (verbosity > this.verboseLogLevel) {
            return;
        }
        var returnString = "Level: Log, Caller: " + stack + ", Msg: " + message;
        console.log(returnString);
    };
    /**
     * The standard logging output
     * @param stack - the stack trace
     * @param message - the message to be logged
     * @param verbosity - the verbosity level
     */
    Logger.Info = function (stack, message, verbosity) {
        if (verbosity > this.verboseLogLevel) {
            return;
        }
        var returnString = "Level: Info, Msg: " + message;
        console.info(returnString);
    };
    /**
     * The standard logging output
     * @param stack - the stack trace
     * @param message - the message to be logged
     */
    Logger.Error = function (stack, message) {
        var returnString = "Level: Error, Caller: " + stack + ", Msg: " + message;
        console.error(returnString);
    };
    Logger.verboseLogLevel = 7;
    return Logger;
}());



/***/ }),

/***/ "./src/MicPlayer/MicController.ts":
/*!****************************************!*\
  !*** ./src/MicPlayer/MicController.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MicController": () => (/* binding */ MicController)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");

var MicController = /** @class */ (function () {
    function MicController(urlParams) {
        // get the mic status from the url 
        this.useMic = urlParams.has('useMic');
        if (this.useMic) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Microphone access is enabled IT IS EXPERIMENTAL AND IS NOT PROPERLY SUPPORTED ACROSS UE. IF IT DOES NOT WORK ITS YOUR OWN FAULT! YOU HAVE BEEN TOLD.");
        }
        // if (!this.useMic) {
        //     Logger.Log(Logger.GetStackTrace(), "Microphone access is not enabled. Pass ?useMic in the url to enable it.");
        // }
        // check if the connection is not local and is https or mic will not work 
        this.isLocalhostConnection = location.hostname === "localhost" || location.hostname === "127.0.0.1";
        this.isHttpsConnection = location.protocol === 'https:';
        if (this.useMic && !this.isLocalhostConnection && !this.isHttpsConnection) {
            this.useMic = false;
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Microphone access in the browser will not work if you are not on HTTPS or localhost. Disabling mic access.");
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "For testing you can enable HTTP microphone access Chrome by visiting chrome://flags/ and enabling 'unsafely-treat-insecure-origin-as-secure'");
        }
    }
    return MicController;
}());



/***/ }),

/***/ "./src/PeerConnectionController/AggregatedStats.ts":
/*!*********************************************************!*\
  !*** ./src/PeerConnectionController/AggregatedStats.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AggregatedStats": () => (/* binding */ AggregatedStats)
/* harmony export */ });
/* harmony import */ var _InboundAudioStats__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./InboundAudioStats */ "./src/PeerConnectionController/InboundAudioStats.ts");
/* harmony import */ var _InboundVideoStats__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InboundVideoStats */ "./src/PeerConnectionController/InboundVideoStats.ts");
/* harmony import */ var _DataChannelStats__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DataChannelStats */ "./src/PeerConnectionController/DataChannelStats.ts");
/* harmony import */ var _CandidateStat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CandidateStat */ "./src/PeerConnectionController/CandidateStat.ts");
/* harmony import */ var _CandidatePairStats__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CandidatePairStats */ "./src/PeerConnectionController/CandidatePairStats.ts");
/* harmony import */ var _OutBoundVideoStats__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./OutBoundVideoStats */ "./src/PeerConnectionController/OutBoundVideoStats.ts");
/* harmony import */ var _StreamStats__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./StreamStats */ "./src/PeerConnectionController/StreamStats.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};








var AggregatedStats = /** @class */ (function () {
    function AggregatedStats() {
        this.inboundVideoStats = new _InboundVideoStats__WEBPACK_IMPORTED_MODULE_1__.inboundVideoStats();
        this.inboundAudioStats = new _InboundAudioStats__WEBPACK_IMPORTED_MODULE_0__.inboundAudioStats();
        this.candidatePair = new _CandidatePairStats__WEBPACK_IMPORTED_MODULE_4__.CandidatePairStats();
        this.dataChannelStats = new _DataChannelStats__WEBPACK_IMPORTED_MODULE_2__.dataChannelStats();
        this.outBoundVideoStats = new _OutBoundVideoStats__WEBPACK_IMPORTED_MODULE_5__.OutBoundVideoStats();
        this.streamStats = new _StreamStats__WEBPACK_IMPORTED_MODULE_6__.StreamStats();
    }
    /**
     * Gather all the information from the RTC Peer Connection Report
     * @param rtcStatsReport - RTC Stats Report
     */
    AggregatedStats.prototype.processStats = function (rtcStatsReport) {
        var _this = this;
        this.localCandidates = new Array();
        this.remoteCandidates = new Array();
        rtcStatsReport.forEach(function (stat) {
            var type = stat.type;
            switch (type) {
                case "candidate-pair":
                    _this.handleCandidatePair(stat);
                    break;
                case "certificate":
                    break;
                case "codec":
                    break;
                case "csrc":
                    break;
                case "data-channel":
                    _this.handleDataChannel(stat);
                    break;
                case "inbound-rtp":
                    _this.handleInBoundRTP(stat);
                    break;
                case "local-candidate":
                    _this.handleLocalCandidate(stat);
                    break;
                case "media-source":
                    break;
                case "outbound-rtp":
                    break;
                case "peer-connection":
                    break;
                case "remote-candidate":
                    _this.handleRemoteCandidate(stat);
                    break;
                case "remote-inbound-rtp":
                    break;
                case "remote-outbound-rtp":
                    _this.handleRemoteOutBound(stat);
                    break;
                case "track":
                    _this.handleTrack(stat);
                    break;
                case "transport":
                    break;
                case "stream":
                    _this.handleStream(stat);
                    break;
                default:
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_7__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_7__.Logger.GetStackTrace(), "unhandled Stat Type");
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_7__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_7__.Logger.GetStackTrace(), stat);
                    break;
            }
        });
    };
    /**
     * Process stream stats data from webrtc
     *
     * @param stat the stats coming in from webrtc
     */
    AggregatedStats.prototype.handleStream = function (stat) {
        this.streamStats = stat;
    };
    /**
     * Process the Ice Candidate Pair Data
     */
    AggregatedStats.prototype.handleCandidatePair = function (stat) {
        this.candidatePair.bytesReceived = stat.bytesReceived;
        this.candidatePair.bytesSent = stat.bytesSent;
        this.candidatePair.localCandidateId = stat.localCandidateId;
        this.candidatePair.remoteCandidateId = stat.remoteCandidateId;
        this.candidatePair.nominated = stat.nominated;
        this.candidatePair.readable = stat.readable;
        this.candidatePair.selected = stat.selected;
        this.candidatePair.writable = stat.writable;
        this.candidatePair.state = stat.state;
        this.candidatePair.currentRoundTripTime = stat.currentRoundTripTime;
    };
    /**
     * Process the Data Channel Data
     */
    AggregatedStats.prototype.handleDataChannel = function (stat) {
        this.dataChannelStats.bytesReceived = stat.dataytesReceived;
        this.dataChannelStats.bytesSent = stat.bytesSent;
        this.dataChannelStats.dataChannelIdentifier = stat.dataChannelIdentifier;
        this.dataChannelStats.id = stat.id;
        this.dataChannelStats.label = stat.label;
        this.dataChannelStats.messagesReceived = stat.messagesReceived;
        this.dataChannelStats.messagesSent = stat.messagesSent;
        this.dataChannelStats.protocol = stat.protocol;
        this.dataChannelStats.state = stat.state;
        this.dataChannelStats.timestamp = stat.timestamp;
    };
    /**
     * Process the Local Ice Candidate Data
     */
    AggregatedStats.prototype.handleLocalCandidate = function (stat) {
        var localCandidate = new _CandidateStat__WEBPACK_IMPORTED_MODULE_3__.CandidateStat();
        localCandidate.label = "local-candidate";
        localCandidate.address = stat.address;
        localCandidate.port = stat.port;
        localCandidate.protocol = stat.protocol;
        localCandidate.candidateType = stat.candidateType;
        localCandidate.id = stat.id;
        this.localCandidates.push(localCandidate);
    };
    /**
     * Process the Remote Ice Candidate Data
     */
    AggregatedStats.prototype.handleRemoteCandidate = function (stat) {
        var RemoteCandidate = new _CandidateStat__WEBPACK_IMPORTED_MODULE_3__.CandidateStat();
        RemoteCandidate.label = "local-candidate";
        RemoteCandidate.address = stat.address;
        RemoteCandidate.port = stat.port;
        RemoteCandidate.protocol = stat.protocol;
        RemoteCandidate.id = stat.id;
        RemoteCandidate.candidateType = stat.candidateType;
        this.remoteCandidates.push(RemoteCandidate);
    };
    /**
     * Process the Inbound RTP Audio and Video Data
     */
    AggregatedStats.prototype.handleInBoundRTP = function (stat) {
        switch (stat.kind) {
            case "video":
                this.inboundVideoStats.timestamp = stat.timestamp;
                this.inboundVideoStats.bytesReceived = stat.bytesReceived;
                this.inboundVideoStats.framesDecoded = stat.framesDecoded;
                this.inboundVideoStats.packetsLost = stat.packetsLost;
                this.inboundVideoStats.jitter = stat.jitter;
                this.inboundVideoStats.bytesReceivedStart = (this.inboundVideoStats.bytesReceivedStart == null) ? stat.bytesReceived : this.inboundVideoStats.bytesReceivedStart;
                this.inboundVideoStats.framesDecodedStart = (this.inboundVideoStats.framesDecodedStart == null) ? stat.framesDecoded : this.inboundVideoStats.framesDecodedStart;
                this.inboundVideoStats.timestampStart = (this.inboundVideoStats.timestampStart == null) ? stat.timestamp : this.inboundVideoStats.timestampStart;
                this.inboundVideoStats.framesDecodedStart = (this.inboundVideoStats.framesDecodedStart == null) ? stat.framesDecoded : this.inboundVideoStats.framesDecodedStart;
                if (this.lastVideoStats != undefined) {
                    this.inboundVideoStats.bitrate = 8 * (stat.bytesReceived - this.lastVideoStats.bytesReceived) / (stat.timestamp - this.lastVideoStats.timestamp);
                    this.inboundVideoStats.bitrate = Math.floor(this.inboundVideoStats.bitrate);
                    this.inboundVideoStats.lowBitrate = (this.inboundVideoStats.lowBitrate == undefined || Number.isNaN(this.inboundVideoStats.lowBitrate)) ? this.inboundVideoStats.bitrate : this.inboundVideoStats.lowBitrate;
                    this.inboundVideoStats.lowBitrate = (this.inboundVideoStats.bitrate < this.inboundVideoStats.lowBitrate || Number.isNaN(this.inboundVideoStats.lowBitrate)) ? this.inboundVideoStats.bitrate : this.inboundVideoStats.lowBitrate;
                    this.inboundVideoStats.highBitrate = (this.inboundVideoStats.highBitrate == undefined || Number.isNaN(this.inboundVideoStats.highBitrate)) ? this.inboundVideoStats.bitrate : this.inboundVideoStats.highBitrate;
                    this.inboundVideoStats.highBitrate = (this.inboundVideoStats.bitrate > this.inboundVideoStats.highBitrate) ? this.inboundVideoStats.bitrate : this.inboundVideoStats.highBitrate;
                    this.inboundVideoStats.avgBitrate = 8 * (this.inboundVideoStats.bytesReceived - this.lastVideoStats.bytesReceived) / (this.inboundVideoStats.timestamp - this.lastVideoStats.timestamp);
                    this.inboundVideoStats.avgBitrate = Math.floor(this.inboundVideoStats.avgBitrate);
                    this.inboundVideoStats.framerate = (this.inboundVideoStats.framesDecoded - this.lastVideoStats.framesDecoded) / ((this.inboundVideoStats.timestamp - this.lastVideoStats.timestamp) / 1000);
                    this.inboundVideoStats.framerate = Math.floor(this.inboundVideoStats.framerate);
                    this.inboundVideoStats.lowFramerate = (this.inboundVideoStats.lowFramerate == undefined || Number.isNaN(this.inboundVideoStats.lowFramerate)) ? this.inboundVideoStats.framerate : this.inboundVideoStats.lowFramerate;
                    this.inboundVideoStats.lowFramerate = (this.inboundVideoStats.framerate < this.inboundVideoStats.lowFramerate) ? this.inboundVideoStats.framerate : this.inboundVideoStats.lowFramerate;
                    this.inboundVideoStats.highFramerate = (this.inboundVideoStats.highFramerate == undefined || Number.isNaN(this.inboundVideoStats.highFramerate)) ? this.inboundVideoStats.framerate : this.inboundVideoStats.highFramerate;
                    this.inboundVideoStats.highFramerate = (this.inboundVideoStats.framerate < this.inboundVideoStats.highFramerate) ? this.inboundVideoStats.framerate : this.inboundVideoStats.highFramerate;
                    this.inboundVideoStats.averageFrameRate = (this.inboundVideoStats.framesDecoded - this.lastVideoStats.framesDecodedStart) / ((this.inboundVideoStats.timestamp - this.lastVideoStats.timestampStart) / 1000);
                    this.inboundVideoStats.averageFrameRate = Math.floor(this.inboundVideoStats.averageFrameRate);
                }
                this.lastVideoStats = __assign({}, this.inboundVideoStats);
                break;
            case "audio":
                this.inboundAudioStats.bytesReceived = stat.bytesReceived;
                this.inboundAudioStats.jitter = stat.jitter;
                this.inboundAudioStats.packetsLost = stat.packetslost;
                this.inboundAudioStats.timestamp = stat.timestamp;
                break;
            default:
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_7__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_7__.Logger.GetStackTrace(), "Kind is not handled");
                break;
        }
    };
    /**
     * Process the outbound RTP Audio and Video Data
     */
    AggregatedStats.prototype.handleRemoteOutBound = function (stat) {
        switch (stat.kind) {
            case "video":
                this.outBoundVideoStats.bytesSent = stat.bytesSent;
                this.outBoundVideoStats.id = stat.id;
                this.outBoundVideoStats.localId = stat.localId;
                this.outBoundVideoStats.packetsSent = stat.packetsSent;
                this.outBoundVideoStats.remoteTimestamp = stat.remoteTimestamp;
                this.outBoundVideoStats.timestamp = stat.timestamp;
                break;
            case "audio":
                break;
            default:
                break;
        }
    };
    /**
     * Process the Inbound Video Track Data
     */
    AggregatedStats.prototype.handleTrack = function (stat) {
        // we only want to extract stats from the video track
        if (stat.type === 'track' && (stat.trackIdentifier === 'video_label' || stat.kind === 'video')) {
            this.inboundVideoStats.framesDropped = stat.framesDropped;
            this.inboundVideoStats.framesReceived = stat.framesReceived;
            this.inboundVideoStats.framesDroppedPercentage = stat.framesDropped / stat.framesReceived * 100;
            this.inboundVideoStats.frameHeight = stat.frameHeight;
            this.inboundVideoStats.frameWidth = stat.frameWidth;
            this.inboundVideoStats.frameHeightStart = (this.inboundVideoStats.frameHeightStart == null) ? stat.frameHeight : this.inboundVideoStats.frameHeightStart;
            this.inboundVideoStats.frameWidthStart = (this.inboundVideoStats.frameWidthStart == null) ? stat.frameWidth : this.inboundVideoStats.frameWidthStart;
        }
    };
    /**
     * Check if a value coming in from our stats is actually a number
     */
    AggregatedStats.prototype.isNumber = function (value) {
        return typeof value === 'number' && isFinite(value);
    };
    return AggregatedStats;
}());



/***/ }),

/***/ "./src/PeerConnectionController/CandidatePairStats.ts":
/*!************************************************************!*\
  !*** ./src/PeerConnectionController/CandidatePairStats.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CandidatePairStats": () => (/* binding */ CandidatePairStats)
/* harmony export */ });
/**
 * ICE Candidate Pair Stats collected from the RTC Stats Report
 */
var CandidatePairStats = /** @class */ (function () {
    function CandidatePairStats() {
    }
    return CandidatePairStats;
}());



/***/ }),

/***/ "./src/PeerConnectionController/CandidateStat.ts":
/*!*******************************************************!*\
  !*** ./src/PeerConnectionController/CandidateStat.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CandidateStat": () => (/* binding */ CandidateStat)
/* harmony export */ });
/**
 * ICE Candidate Stat collected from the RTC Stats Report
 */
var CandidateStat = /** @class */ (function () {
    function CandidateStat() {
    }
    return CandidateStat;
}());



/***/ }),

/***/ "./src/PeerConnectionController/DataChannelStats.ts":
/*!**********************************************************!*\
  !*** ./src/PeerConnectionController/DataChannelStats.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "dataChannelStats": () => (/* binding */ dataChannelStats)
/* harmony export */ });
/**
 * Data Channel Stats collected from the RTC Stats Report
 */
var dataChannelStats = /** @class */ (function () {
    function dataChannelStats() {
    }
    return dataChannelStats;
}());



/***/ }),

/***/ "./src/PeerConnectionController/InboundAudioStats.ts":
/*!***********************************************************!*\
  !*** ./src/PeerConnectionController/InboundAudioStats.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "inboundAudioStats": () => (/* binding */ inboundAudioStats)
/* harmony export */ });
/**
 * Inbound Audio Stats collected from the RTC Stats Report
 */
var inboundAudioStats = /** @class */ (function () {
    function inboundAudioStats() {
    }
    return inboundAudioStats;
}());



/***/ }),

/***/ "./src/PeerConnectionController/InboundVideoStats.ts":
/*!***********************************************************!*\
  !*** ./src/PeerConnectionController/InboundVideoStats.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "inboundVideoStats": () => (/* binding */ inboundVideoStats)
/* harmony export */ });
/**
 * Inbound Video Stats collected from the RTC Stats Report
 */
var inboundVideoStats = /** @class */ (function () {
    function inboundVideoStats() {
        this.receiveToCompositeMs = 0;
        this.timestamp = 0;
        this.bytesReceived = 0;
        this.framesDecoded = 0;
        this.packetsLost = 0;
        this.bytesReceivedStart = 0;
        this.framesDecodedStart = 0;
        this.timestampStart = 0;
        this.bitrate = 0;
        this.lowBitrate = 0;
        this.highBitrate = 0;
        this.avgBitrate = 0;
        this.framerate = 0;
        this.lowFramerate = 0;
        this.highFramerate = 0;
        this.averageFrameRate = 0;
        this.framesDropped = 0;
        this.framesReceived = 0;
        this.framesDroppedPercentage = 0;
        this.frameHeight = 0;
        this.frameWidth = 0;
        this.frameHeightStart = 0;
        this.frameWidthStart = 0;
        this.jitter = 0;
    }
    return inboundVideoStats;
}());



/***/ }),

/***/ "./src/PeerConnectionController/OutBoundVideoStats.ts":
/*!************************************************************!*\
  !*** ./src/PeerConnectionController/OutBoundVideoStats.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "OutBoundVideoStats": () => (/* binding */ OutBoundVideoStats)
/* harmony export */ });
/**
 * Outbound Video Stats collected from the RTC Stats Report
 */
var OutBoundVideoStats = /** @class */ (function () {
    function OutBoundVideoStats() {
    }
    return OutBoundVideoStats;
}());



/***/ }),

/***/ "./src/PeerConnectionController/PeerConnectionController.ts":
/*!******************************************************************!*\
  !*** ./src/PeerConnectionController/PeerConnectionController.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PeerConnectionController": () => (/* binding */ PeerConnectionController)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _AggregatedStats__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AggregatedStats */ "./src/PeerConnectionController/AggregatedStats.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};


/**
 * Handles the Peer Connection
 */
var PeerConnectionController = /** @class */ (function () {
    /**
     * Create a new RTC Peer Connection client
     * @param options - Peer connection Options
     */
    function PeerConnectionController(options, turnState) {
        var _this = this;
        // Set the turn state to true or false for rtc options
        this.forceTurn = turnState;
        if (this.forceTurn === true) {
            options.iceTransportPolicy = "relay";
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Forcing TURN usage by setting ICE Transport Policy in peer connection config.");
        }
        // build a new peer connection with the options
        this.peerConnection = new RTCPeerConnection(options);
        this.peerConnection.onsignalingstatechange = function (ev) { return _this.handleSignalStateChange(ev); };
        this.peerConnection.oniceconnectionstatechange = function (ev) { return _this.handleIceConnectionStateChange(ev); };
        this.peerConnection.onicegatheringstatechange = function (ev) { return _this.handleIceGatheringStateChange(ev); };
        this.peerConnection.ontrack = function (ev) { return _this.handleOnTrack(ev); };
        this.peerConnection.onicecandidate = function (ev) { return _this.handelIceCandidate(ev); };
        this.aggregatedStats = new _AggregatedStats__WEBPACK_IMPORTED_MODULE_1__.AggregatedStats();
    }
    /**
     * Create an offer for the Web RTC handshake and send the offer to the signaling server via websocket
     * @param offerOptions - RTC Offer Options
     */
    PeerConnectionController.prototype.createOffer = function (offerOptions, useMic) {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Create Offer", 6);
        this.setupTracksToSendAsync(useMic).finally(function () { });
        this.peerConnection.createOffer(offerOptions).then(function (offer) {
            _this.showTextOverlayConnecting();
            offer.sdp = _this.mungeOffer(offer.sdp, useMic);
            _this.peerConnection.setLocalDescription(offer);
            _this.onSendWebRTCOffer(offer);
        }).catch(function (onRejectedReason) {
            _this.showTextOverlaySetupFailure();
        });
    };
    /**
     * Generate Aggregated Stats and then fire a onVideo Stats event
     */
    PeerConnectionController.prototype.generateStats = function () {
        var _this = this;
        this.peerConnection.getStats(null).then(function (StatsData) {
            _this.aggregatedStats.processStats(StatsData);
            _this.onVideoStats(_this.aggregatedStats);
        });
    };
    /**
     * Close The Peer Connection
     */
    PeerConnectionController.prototype.close = function () {
        if (this.peerConnection) {
            this.peerConnection.close();
            this.peerConnection = null;
        }
    };
    /**
     * Modify the Session Descriptor
     * @param sdp - Session Descriptor as a string
     * @param useMic - Is the microphone in use
     * @returns A modified Session Descriptor
     */
    PeerConnectionController.prototype.mungeOffer = function (sdp, useMic) {
        var temp = sdp;
        temp.replace(/(a=fmtp:\d+ .*level-asymmetry-allowed=.*)\r\n/gm, "$1;x-google-start-bitrate=10000;x-google-max-bitrate=100000\r\n");
        temp.replace('useinbandfec=1', 'useinbandfec=1;stereo=1;sprop-maxcapturerate=48000');
        // Increase the capture rate of audio so we can have higher quality audio over mic
        if (useMic) {
            temp = temp.replace('useinbandfec=1', 'useinbandfec=1;sprop-maxcapturerate=48000;maxaveragebitrate=510000');
        }
        return temp;
    };
    /**
     * Set the Remote Descriptor from the signaling server to the RTC Peer Connection
     * @param sdpAnswer - RTC Session Descriptor from the Signaling Server
     */
    PeerConnectionController.prototype.handleAnswer = function (sdpAnswer) {
        this.peerConnection.setRemoteDescription(sdpAnswer);
    };
    /**
     * When a Ice Candidate is received add to the RTC Peer Connection
     * @param iceCandidate - RTC Ice Candidate from the Signaling Server
     */
    PeerConnectionController.prototype.handleOnIce = function (iceCandidate) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "peerconnection handleOnIce", 6);
        // // if forcing TURN, reject any candidates not relay
        if (this.forceTurn) {
            // check if no relay address is found, if so, we are assuming it means no TURN server
            if (iceCandidate.candidate.indexOf("relay") < 0) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Dropping candidate because it was not TURN relay. | Type= " + iceCandidate.type + " | Protocol= " + iceCandidate.protocol + " | Address=" + iceCandidate.address + " | Port=" + iceCandidate.port + " |", 6);
                return;
            }
        }
        this.peerConnection.addIceCandidate(iceCandidate);
    };
    /**
     * When the RTC Peer Connection Signaling server state Changes
     * @param state - Signaling Server State Change Event
     */
    PeerConnectionController.prototype.handleSignalStateChange = function (state) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'signaling state change: ' + state, 6);
    };
    /**
     * Handle when the Ice Connection State Changes
     * @param state - Ice Connection State
     */
    PeerConnectionController.prototype.handleIceConnectionStateChange = function (state) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'ice connection state change: ' + state, 6);
    };
    /**
     * Handle when the Ice Gathering State Changes
     * @param state - Ice Gathering State Change
     */
    PeerConnectionController.prototype.handleIceGatheringStateChange = function (state) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'ice gathering state change: ' + JSON.stringify(state), 6);
    };
    /**
     * Activates the onTrack method
     * @param event - The webRtc track event
     */
    PeerConnectionController.prototype.handleOnTrack = function (event) {
        this.onTrack(event);
    };
    /**
     * Activates the onPeerIceCandidate
     * @param event - The peer ice candidate
     */
    PeerConnectionController.prototype.handelIceCandidate = function (event) {
        this.onPeerIceCandidate(event);
    };
    /**
     * An override method for onTrack for use outside of the PeerConnectionController
     * @param trackEvent - The webRtc track event
     */
    PeerConnectionController.prototype.onTrack = function (trackEvent) { };
    /**
     * An override method for onPeerIceCandidate for use outside of the PeerConnectionController
     * @param peerConnectionIceEvent - The peer ice candidate
     */
    PeerConnectionController.prototype.onPeerIceCandidate = function (peerConnectionIceEvent) { };
    /**
     * Setup tracks on the RTC Peer Connection
     */
    PeerConnectionController.prototype.setupTracksToSendAsync = function (useMic) {
        return __awaiter(this, void 0, void 0, function () {
            var hasTransceivers, audioOptions, mediaSendOptions, stream, _i, _a, transceiver, _b, _c, track, _d, _e, track;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        hasTransceivers = this.peerConnection.getTransceivers().length > 0;
                        // Setup a transceiver for getting UE video
                        this.peerConnection.addTransceiver("video", { direction: "recvonly" });
                        if (!!useMic) return [3 /*break*/, 1];
                        this.peerConnection.addTransceiver("audio", { direction: "recvonly" });
                        return [3 /*break*/, 3];
                    case 1:
                        audioOptions = useMic ?
                            {
                                autoGainControl: false,
                                channelCount: 1,
                                echoCancellation: false,
                                latency: 0,
                                noiseSuppression: false,
                                sampleRate: 48000,
                                sampleSize: 16,
                                volume: 1.0
                            } : false;
                        mediaSendOptions = {
                            video: false,
                            audio: audioOptions,
                        };
                        return [4 /*yield*/, navigator.mediaDevices.getUserMedia(mediaSendOptions)];
                    case 2:
                        stream = _f.sent();
                        if (stream) {
                            if (hasTransceivers) {
                                for (_i = 0, _a = this.peerConnection.getTransceivers(); _i < _a.length; _i++) {
                                    transceiver = _a[_i];
                                    if (transceiver && transceiver.receiver && transceiver.receiver.track && transceiver.receiver.track.kind === "audio") {
                                        for (_b = 0, _c = stream.getTracks(); _b < _c.length; _b++) {
                                            track = _c[_b];
                                            if (track.kind && track.kind == "audio") {
                                                transceiver.sender.replaceTrack(track);
                                                transceiver.direction = "sendrecv";
                                            }
                                        }
                                    }
                                }
                            }
                            else {
                                for (_d = 0, _e = stream.getTracks(); _d < _e.length; _d++) {
                                    track = _e[_d];
                                    if (track.kind && track.kind == "audio") {
                                        this.peerConnection.addTransceiver(track, { direction: "sendrecv" });
                                    }
                                }
                            }
                        }
                        else {
                            this.peerConnection.addTransceiver("audio", { direction: "recvonly" });
                        }
                        _f.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * And override event for when the video stats are fired
     * @param event - Aggregated Stats
     */
    PeerConnectionController.prototype.onVideoStats = function (event) { };
    /**
     * Event to send the RTC offer to the Signaling server
     * @param offer - RTC Offer
     */
    PeerConnectionController.prototype.onSendWebRTCOffer = function (offer) { };
    /**
     * An override for showing the Peer connection connecting Overlay
     */
    PeerConnectionController.prototype.showTextOverlayConnecting = function () { };
    /**
     * An override for showing the Peer connection Failed overlay
     */
    PeerConnectionController.prototype.showTextOverlaySetupFailure = function () { };
    return PeerConnectionController;
}());



/***/ }),

/***/ "./src/PeerConnectionController/StreamStats.ts":
/*!*****************************************************!*\
  !*** ./src/PeerConnectionController/StreamStats.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamStats": () => (/* binding */ StreamStats)
/* harmony export */ });
/**
 * Class to hold the stream stats data coming in from webRtc
 */
var StreamStats = /** @class */ (function () {
    function StreamStats() {
    }
    return StreamStats;
}());



/***/ }),

/***/ "./src/UeInstanceMessage/UeControlMessage.ts":
/*!***************************************************!*\
  !*** ./src/UeInstanceMessage/UeControlMessage.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UeControlMessage": () => (/* binding */ UeControlMessage)
/* harmony export */ });
/* harmony import */ var _UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UeMessageTypes */ "./src/UeInstanceMessage/UeMessageTypes.ts");
/* harmony import */ var _UeDescriptor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeDescriptor */ "./src/UeInstanceMessage/UeDescriptor.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Handles Sending control messages to the UE Instance
 */
var UeControlMessage = /** @class */ (function (_super) {
    __extends(UeControlMessage, _super);
    /**
     *
     * @param dataChannelController - Data Channel Controller
     */
    function UeControlMessage(dataChannelController) {
        return _super.call(this, dataChannelController) || this;
    }
    /**
     * Send IFrame Request to the UE Instance
     */
    UeControlMessage.prototype.SendIFrameRequest = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.iFrameRequest]);
        this.sendData(payload.buffer);
    };
    /**
     * Send Request to Take Quality Control to the UE Instance
     */
    UeControlMessage.prototype.SendRequestQualityControl = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.requestQualityControl]);
        this.sendData(payload.buffer);
    };
    /**
     * Send Max FPS Request to the UE Instance
     */
    UeControlMessage.prototype.SendMaxFpsRequest = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.maxFpsRequest]);
        this.sendData(payload.buffer);
    };
    /**
     * Send Average Bitrate Request to the UE Instance
     */
    UeControlMessage.prototype.SendAverageBitrateRequest = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.averageBitrateRequest]);
        this.sendData(payload.buffer);
    };
    /**
     * Send a Start Streaming Message to the UE Instance
     */
    UeControlMessage.prototype.SendStartStreaming = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.startStreaming]);
        this.sendData(payload.buffer);
    };
    /**
     * Send a Stop Streaming Message to the UE Instance
     */
    UeControlMessage.prototype.SendStopStreaming = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.stopStreaming]);
        this.sendData(payload.buffer);
    };
    /**
     * Send a Latency Test to the UE Instance
     * @param StartTimeMs - Start Time of the Latency test
     */
    UeControlMessage.prototype.sendLatencyTest = function (StartTimeMs) {
        var payload = {
            StartTime: StartTimeMs,
        };
        this.sendDescriptor(_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.latencyTest, JSON.stringify(payload));
    };
    /**
     * Send a Request Initial Settings to the UE Instance
     */
    UeControlMessage.prototype.SendRequestInitialSettings = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.requestInitialSettings]);
        this.sendData(payload.buffer);
    };
    return UeControlMessage;
}(_UeDescriptor__WEBPACK_IMPORTED_MODULE_1__.UeDescriptor));



/***/ }),

/***/ "./src/UeInstanceMessage/UeDataMessage.ts":
/*!************************************************!*\
  !*** ./src/UeInstanceMessage/UeDataMessage.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UeDataMessage": () => (/* binding */ UeDataMessage)
/* harmony export */ });
/**
 * Handles sending a message to the UE Instance
 */
var UeDataMessage = /** @class */ (function () {
    /**
     *
     * @param dataChannelController - Data Channel Controller
     */
    function UeDataMessage(dataChannelController) {
        this.dataChannelController = dataChannelController;
    }
    /**
     * Send an Array Buffer to the UE Instance
     * @param buffer - Message Buffer Array
     */
    UeDataMessage.prototype.sendData = function (buffer) {
        this.dataChannelController.sendData(buffer);
    };
    return UeDataMessage;
}());



/***/ }),

/***/ "./src/UeInstanceMessage/UeDescriptor.ts":
/*!***********************************************!*\
  !*** ./src/UeInstanceMessage/UeDescriptor.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UeDescriptor": () => (/* binding */ UeDescriptor)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _UeDataMessage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeDataMessage */ "./src/UeInstanceMessage/UeDataMessage.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Handles sending a Descriptor to the UE Instance
 */
var UeDescriptor = /** @class */ (function (_super) {
    __extends(UeDescriptor, _super);
    /**
    * @param datachannelController - Data Channel Controller
    */
    function UeDescriptor(datachannelController) {
        return _super.call(this, datachannelController) || this;
    }
    /**
     * Send a Descriptor to the UE Instances
     * @param messageType - UE Message Type
     * @param JSODescriptor - Descriptor Message as JSON
     */
    UeDescriptor.prototype.sendDescriptor = function (messageType, JSODescriptor) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Sending: " + JSODescriptor, 6);
        // Add the UTF-16 JSON string to the array byte buffer, going two bytes at
        // a time.
        var data = new DataView(new ArrayBuffer(1 + 2 + 2 * JSODescriptor.length));
        var byteIdx = 0;
        data.setUint8(byteIdx, messageType);
        byteIdx++;
        data.setUint16(byteIdx, JSODescriptor.length, true);
        byteIdx += 2;
        for (var i = 0; i < JSODescriptor.length; i++) {
            data.setUint16(byteIdx, JSODescriptor.charCodeAt(i), true);
            byteIdx += 2;
        }
        this.sendData(data.buffer);
    };
    return UeDescriptor;
}(_UeDataMessage__WEBPACK_IMPORTED_MODULE_1__.UeDataMessage));



/***/ }),

/***/ "./src/UeInstanceMessage/UeDescriptorUi.ts":
/*!*************************************************!*\
  !*** ./src/UeInstanceMessage/UeDescriptorUi.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UeDescriptorUi": () => (/* binding */ UeDescriptorUi)
/* harmony export */ });
/* harmony import */ var _UeDescriptor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UeDescriptor */ "./src/UeInstanceMessage/UeDescriptor.ts");
/* harmony import */ var _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeMessageTypes */ "./src/UeInstanceMessage/UeMessageTypes.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Handles the Sending of a UI Descriptor to the UE Instance
 */
var UeDescriptorUi = /** @class */ (function (_super) {
    __extends(UeDescriptorUi, _super);
    /**
     * @param dataChannelController - Data Channel Controller
     */
    function UeDescriptorUi(dataChannelController) {
        return _super.call(this, dataChannelController) || this;
    }
    /**
     * Send a set res UI Descriptor to UE Instance
     * @param width - Width of res
     * @param height - Height of res
     */
    UeDescriptorUi.prototype.sendUpdateVideoStreamSize = function (width, height) {
        this.sendUiConsoleInteraction("r.setres " + width + "x" + height);
    };
    /**
     * Send a stat fps UI Descriptor to UE Instance
     */
    UeDescriptorUi.prototype.sendShowFps = function () {
        this.sendUiConsoleInteraction("stat fps");
    };
    /**
     * Send a Encoder Rate Control to UE Instance
     * @param rateControl - Rate Control "CBR" | "VBR" | "ConstQP"
     */
    UeDescriptorUi.prototype.sendEncoderRateControl = function (rateControl) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.RateControl " + rateControl);
    };
    /**
     * Send Encoder Target Bit Rate to the UE Instance
     * @param targetBitRate - Send a Target Bit Rate
     */
    UeDescriptorUi.prototype.sendEncoderTargetBitRate = function (targetBitRate) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.TargetBitrate " + (targetBitRate > 0 ? targetBitRate : -1));
    };
    /**
     * Send Encoder Max Bit Rate VBR to UE Instance
     * @param maxBitRate - Send A Max Bit Rate
     */
    UeDescriptorUi.prototype.sendEncoderMaxBitrateVbr = function (maxBitRate) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.MaxBitrateVBR " + (maxBitRate > 0 ? maxBitRate : 1));
    };
    /**
     * Send the Minimum Quantization Parameter to the UE Instance
     * @param minQP - Minimum Quantization Parameter
     */
    UeDescriptorUi.prototype.sendEncoderMinQP = function (minQP) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.MinQP " + minQP);
    };
    /**
     * Send the Maximum Quantization Parameter to the UE Instance
     * @param maxQP - Maximum Quantization Parameter
     */
    UeDescriptorUi.prototype.sendEncoderMaxQP = function (maxQP) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.MaxQP " + maxQP);
    };
    /**
     * Send Enable Filler Data to the UE Instance
     * @param enable - True
     */
    UeDescriptorUi.prototype.sendEncoderEnableFillerData = function (enable) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.EnableFillerData " + Number(enable).valueOf());
    };
    /**
     * Send Encoder MultiPass to UE Instance
     * @param multiPass - MultiPass "DISABLED" | "QUARTER" | "FULL"
     */
    UeDescriptorUi.prototype.sendEncoderMultiPass = function (multiPass) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.Multipass " + multiPass);
    };
    /**
     * Send a Web RTC Degradation Preference to UE Instance
     * @param DegradationPreference - Degradation Preference "BALANCED" | "MAINTAIN_FRAMERATE" | "MAINTAIN_RESOLUTION"
     */
    UeDescriptorUi.prototype.sendWebRtcDegradationPreference = function (DegradationPreference) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.DegradationPreference " + DegradationPreference);
    };
    /**
     * Sends the Max FPS to the UE Instance
     * @param MaxFps - Web RTC Max Frames Per Second
     */
    UeDescriptorUi.prototype.sendWebRtcMaxFps = function (MaxFps) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.MaxFps " + MaxFps);
    };
    /**
    * Sends the FPS to the UE Instance used un UE 5.0
    * @param Fps - Web RTC Frames Per Second
    */
    UeDescriptorUi.prototype.sendWebRtcFps = function (Fps) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.Fps " + Fps);
    };
    /**
     * Sends the Minimum bit rate to the UE Instance
     * @param MinBitrate - Web RTC Minimum Bitrate
     */
    UeDescriptorUi.prototype.sendWebRtcMinBitrate = function (MinBitrate) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.MinBitrate " + MinBitrate);
    };
    /**
     * Sends the Maximum bit rate to the UE Instance
     * @param MaxBitrate - Web RTC Maximum Bitrate
     */
    UeDescriptorUi.prototype.sendWebRtcMaxBitrate = function (MaxBitrate) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.MaxBitrate " + MaxBitrate);
    };
    /**
     * Sends the Low Quantization Parameter Threshold level to the UE Instance
     * @param LowQpThreshold - Low Quantization Parameter Threshold Level
     */
    UeDescriptorUi.prototype.sendWebRtcLowQpThreshold = function (LowQpThreshold) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.LowQpThreshold " + LowQpThreshold);
    };
    /**
     * Sends the High Quantization Parameter Threshold level to the UE Instance
     * @param HighQpThreshold - High Quantization Parameter Threshold Level
     */
    UeDescriptorUi.prototype.sendWebRtcHighQpThreshold = function (HighQpThreshold) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.HighQpThreshold " + HighQpThreshold);
    };
    /**
     * Sends a descriptor string to the UE Interaction Instance
     * @param descriptor - the String descriptor to send
     */
    UeDescriptorUi.prototype.sendUiInteraction = function (descriptor) {
        this.sendDescriptor(_UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.uiInteraction, descriptor);
    };
    /**
     * Sends a console descriptor
     * @param descriptor - The string descriptor to send
     */
    UeDescriptorUi.prototype.sendUiConsoleInteraction = function (descriptor) {
        var payload = {
            Console: descriptor
        };
        this.sendUiInteraction(JSON.stringify(payload));
    };
    return UeDescriptorUi;
}(_UeDescriptor__WEBPACK_IMPORTED_MODULE_0__.UeDescriptor));



/***/ }),

/***/ "./src/UeInstanceMessage/UeInputGamePadMessage.ts":
/*!********************************************************!*\
  !*** ./src/UeInstanceMessage/UeInputGamePadMessage.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UeInputGamePadMessage": () => (/* binding */ UeInputGamePadMessage)
/* harmony export */ });
/* harmony import */ var _UeDataMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UeDataMessage */ "./src/UeInstanceMessage/UeDataMessage.ts");
/* harmony import */ var _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeMessageTypes */ "./src/UeInstanceMessage/UeMessageTypes.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * The class for handling UE Input GamePad Messages. It implements the UeDataMessage class
 */
var UeInputGamePadMessage = /** @class */ (function (_super) {
    __extends(UeInputGamePadMessage, _super);
    /**
     *
     * @param datachannelController - Data Channel Controller
     */
    function UeInputGamePadMessage(datachannelController) {
        return _super.call(this, datachannelController) || this;
    }
    /**
     * Send the controller button press data through the data channel
     * @param controllerIndex - the controller index number
     * @param buttonIndex - the button index number
     * @param isRepeat - is this a repeat press
     */
    UeInputGamePadMessage.prototype.sendControllerButtonPressed = function (controllerIndex, buttonIndex, isRepeat) {
        var Data = new DataView(new ArrayBuffer(4));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.gamepadButtonPressed);
        Data.setUint8(1, controllerIndex);
        Data.setUint8(2, buttonIndex);
        Data.setUint8(3, Number(isRepeat).valueOf());
        this.sendData(Data.buffer);
    };
    /**
     * Send the controller button release data through the data channel
     * @param controllerIndex - the controller index number
     * @param buttonIndex  - the button index number
     */
    UeInputGamePadMessage.prototype.sendControllerButtonReleased = function (controllerIndex, buttonIndex) {
        var Data = new DataView(new ArrayBuffer(3));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.gamepadButtonReleased);
        Data.setUint8(1, controllerIndex);
        Data.setUint8(2, buttonIndex);
        this.sendData(Data.buffer);
    };
    /**
     * Send controller axis data through the data channel
     * @param controllerIndex - the controller index number
     * @param axisIndex - the axis index number
     * @param analogValue - the analogue value number
     */
    UeInputGamePadMessage.prototype.sendControllerAxisMove = function (controllerIndex, axisIndex, analogValue) {
        var Data = new DataView(new ArrayBuffer(11));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.gamepadAnalog);
        Data.setUint8(1, controllerIndex);
        Data.setUint8(2, axisIndex);
        Data.setFloat64(3, analogValue, true);
        this.sendData(Data.buffer);
    };
    return UeInputGamePadMessage;
}(_UeDataMessage__WEBPACK_IMPORTED_MODULE_0__.UeDataMessage));



/***/ }),

/***/ "./src/UeInstanceMessage/UeInputKeyboardMessage.ts":
/*!*********************************************************!*\
  !*** ./src/UeInstanceMessage/UeInputKeyboardMessage.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UeInputKeyboardMessage": () => (/* binding */ UeInputKeyboardMessage)
/* harmony export */ });
/* harmony import */ var _UeDataMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UeDataMessage */ "./src/UeInstanceMessage/UeDataMessage.ts");
/* harmony import */ var _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeMessageTypes */ "./src/UeInstanceMessage/UeMessageTypes.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Handles sending Keyboard Messages to the UE Instance
 */
var UeInputKeyboardMessage = /** @class */ (function (_super) {
    __extends(UeInputKeyboardMessage, _super);
    /**
     *
     * @param datachannelController - Data Channel Controller
     */
    function UeInputKeyboardMessage(datachannelController) {
        return _super.call(this, datachannelController) || this;
    }
    /**
     * Sends the key down to the UE Instance
     * @param keyCode - Key code
     * @param isRepeat - Is the key repeating
     */
    UeInputKeyboardMessage.prototype.sendKeyDown = function (keyCode, isRepeat) {
        var Payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.keyDown, keyCode, Number(isRepeat).valueOf()]);
        this.sendData(Payload.buffer);
    };
    /**
     * Sends the Key Up to the UE Instance
     * @param keyCode - Key code
     */
    UeInputKeyboardMessage.prototype.sendKeyUp = function (keyCode) {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.keyUp, keyCode]);
        this.sendData(payload.buffer);
    };
    /**
     * Sends the key press to the UE Instance
     * @param CharCode - character code of a key pressed
     */
    UeInputKeyboardMessage.prototype.sendKeyPress = function (CharCode) {
        var data = new DataView(new ArrayBuffer(3));
        data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.keyPress);
        data.setUint16(1, CharCode, true);
        this.sendData(data.buffer);
    };
    return UeInputKeyboardMessage;
}(_UeDataMessage__WEBPACK_IMPORTED_MODULE_0__.UeDataMessage));



/***/ }),

/***/ "./src/UeInstanceMessage/UeInputMouseMessage.ts":
/*!******************************************************!*\
  !*** ./src/UeInstanceMessage/UeInputMouseMessage.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UeInputMouseMessage": () => (/* binding */ UeInputMouseMessage)
/* harmony export */ });
/* harmony import */ var _UeDataMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UeDataMessage */ "./src/UeInstanceMessage/UeDataMessage.ts");
/* harmony import */ var _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeMessageTypes */ "./src/UeInstanceMessage/UeMessageTypes.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Handles sending Mouse Messages to the UE Instance
 */
var UeInputMouseMessage = /** @class */ (function (_super) {
    __extends(UeInputMouseMessage, _super);
    /**
    * @param datachannelController - Data channel Controller
    */
    function UeInputMouseMessage(datachannelController) {
        return _super.call(this, datachannelController) || this;
    }
    /**
     * Send Mouse Enter to the UE Instance
     */
    UeInputMouseMessage.prototype.sendMouseEnter = function () {
        var Data = new DataView(new ArrayBuffer(1));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.mouseEnter);
        this.sendData(Data.buffer);
    };
    /**
     * Send Mouse Leave to the UE Instance
     */
    UeInputMouseMessage.prototype.sendMouseLeave = function () {
        var Data = new DataView(new ArrayBuffer(1));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.mouseLeave);
        this.sendData(Data.buffer);
    };
    /**
     * Send Mouse Down to the UE Instance
     * @param button - Mouse Button
     * @param X - X Coordinate Value of mouse
     * @param Y - Y Coordinate Value of mouse
     */
    UeInputMouseMessage.prototype.sendMouseDown = function (button, X, Y) {
        var Data = new DataView(new ArrayBuffer(6));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.mouseDown);
        Data.setUint8(1, button);
        Data.setUint16(2, X, true);
        Data.setUint16(4, Y, true);
        this.sendData(Data.buffer);
    };
    /**
     * Send Mouse Up to the UE Instance
     * @param button - Mouse Button
     * @param X - X Coordinate Value of mouse
     * @param Y - Y Coordinate Value of mouse
     */
    UeInputMouseMessage.prototype.sendMouseUp = function (button, X, Y) {
        var Data = new DataView(new ArrayBuffer(6));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.mouseUp);
        Data.setUint8(1, button);
        Data.setUint16(2, X, true);
        Data.setUint16(4, Y, true);
        this.sendData(Data.buffer);
    };
    /**
     * Send Mouse Move to the UE Instance
     * @param mouseCordX - X Mouse Coordinate
     * @param mouseCordY - Y Mouse Coordinate
     * @param deltaX - X Mouse Delta Coordinate
     * @param deltaY - Y Mouse Delta Coordinate
     */
    UeInputMouseMessage.prototype.sendMouseMove = function (mouseCordX, mouseCordY, deltaX, deltaY) {
        var Data = new DataView(new ArrayBuffer(9));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.mouseMove);
        Data.setUint16(1, mouseCordX, true);
        Data.setUint16(3, mouseCordY, true);
        Data.setInt16(5, deltaX, true);
        Data.setInt16(7, deltaY, true);
        this.sendData(Data.buffer);
    };
    /**
     * Send Mouse wheel event to the UE Instance
     * @param deltaY - Mouse Wheel delta Y
     * @param X - Mouse X Coordinate
     * @param Y - Mouse Y Coordinate
     */
    UeInputMouseMessage.prototype.sendMouseWheel = function (deltaY, X, Y) {
        var Data = new DataView(new ArrayBuffer(7));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.mouseWheel);
        Data.setInt16(1, deltaY, true);
        Data.setUint16(3, X, true);
        Data.setUint16(5, Y, true);
        this.sendData(Data.buffer);
    };
    return UeInputMouseMessage;
}(_UeDataMessage__WEBPACK_IMPORTED_MODULE_0__.UeDataMessage));



/***/ }),

/***/ "./src/UeInstanceMessage/UeInputTouchMessage.ts":
/*!******************************************************!*\
  !*** ./src/UeInstanceMessage/UeInputTouchMessage.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UeInputTouchMessage": () => (/* binding */ UeInputTouchMessage)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _UeDataMessage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeDataMessage */ "./src/UeInstanceMessage/UeDataMessage.ts");
/* harmony import */ var _UeMessageTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./UeMessageTypes */ "./src/UeInstanceMessage/UeMessageTypes.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



/**
 * Handles Sending Touch messages to the UE Instance
 */
var UeInputTouchMessage = /** @class */ (function (_super) {
    __extends(UeInputTouchMessage, _super);
    /**
     * @param datachannelController - Data channel Controller
     */
    function UeInputTouchMessage(datachannelController, videoElementProvider) {
        var _this = _super.call(this, datachannelController) || this;
        _this.unsignedOutOfRange = 65535;
        _this.signedOutOfRange = 32767;
        _this.videoElementProvider = videoElementProvider;
        _this.fingersIds = {};
        _this.fingers = [9, 8, 7, 6, 5, 4, 3, 2, 1, 0];
        _this.printInputs = false;
        return _this;
    }
    /**
     * Handles Touch event Start
     * @param touches - Touch List
     */
    UeInputTouchMessage.prototype.sendTouchStart = function (touches) {
        this.sendTouch(_UeMessageTypes__WEBPACK_IMPORTED_MODULE_2__.UeMessageType.touchStart, touches);
    };
    /**
     * Handles Touch event End
     * @param touches - Touch List
     */
    UeInputTouchMessage.prototype.sendTouchEnd = function (touches) {
        this.sendTouch(_UeMessageTypes__WEBPACK_IMPORTED_MODULE_2__.UeMessageType.touchEnd, touches);
    };
    /**
     * Handles Touch event Move
     * @param touches - Touch List
     */
    UeInputTouchMessage.prototype.sendTouchMove = function (touches) {
        this.sendTouch(_UeMessageTypes__WEBPACK_IMPORTED_MODULE_2__.UeMessageType.touchMove, touches);
    };
    /**
     * Handles Sending the Touch Event to the UE Instance via the Data channel
     * @param touches - Touch List
     */
    UeInputTouchMessage.prototype.sendTouch = function (touchType, touches) {
        var data = new DataView(new ArrayBuffer(2 + 7 * touches.length));
        data.setUint8(0, touchType);
        data.setUint8(1, touches.length);
        var byte = 2;
        for (var t = 0; t < touches.length; t++) {
            var touch = touches[t];
            var x = touch.clientX; //- offsetLeft;
            var y = touch.clientY; //- offsetTop;
            var coord = this.normaliseAndQuantiseUnsigned(x, y);
            //      byte =  2
            data.setUint16(byte, coord.x, true);
            byte += 2;
            //      byte =  4
            data.setUint16(byte, coord.y, true);
            byte += 2;
            //      byte =  6
            data.setUint8(byte, this.fingersIds[touch.identifier]);
            byte += 1;
            //      byte =  7
            data.setUint8(byte, 255 * touch.force); // force is between 0.0 and 1.0 so quantize into byte.
            byte += 1;
            //      byte =  8
            data.setUint8(byte, coord.inRange ? 1 : 0); // mark the touch as in the player or not
            byte += 1;
        }
        this.sendData(data.buffer);
    };
    /**
     * TO DO
     * @param x - X Coordinate
     * @param y - Y Coordinate
     * @returns - Normalised and Quantised Unsigned values
     */
    UeInputTouchMessage.prototype.normaliseAndQuantiseUnsigned = function (x, y) {
        var rootDiv = this.videoElementProvider.getVideoParentElement();
        var videoElement = this.videoElementProvider.getVideoElement();
        if (rootDiv && videoElement) {
            var playerAspectRatio = rootDiv.clientHeight / rootDiv.clientWidth;
            var videoAspectRatio = videoElement.videoHeight / videoElement.videoWidth;
            // Unsigned XY positions are the ratio (0.0..1.0) along a viewport axis,
            // quantized into an uint16 (0..65536).
            // Signed XY deltas are the ratio (-1.0..1.0) along a viewport axis,
            // quantized into an int16 (-32767..32767).
            // This allows the browser viewport and client viewport to have a different
            // size.
            // Hack: Currently we set an out-of-range position to an extreme (65535)
            // as we can't yet accurately detect mouse enter and leave events
            // precisely inside a video with an aspect ratio which causes mattes.
            if (playerAspectRatio > videoAspectRatio) {
                var ratio = playerAspectRatio / videoAspectRatio;
                // Unsigned.
                var normalizedX = x / rootDiv.clientWidth;
                var normalizedY = ratio * (y / rootDiv.clientHeight - 0.5) + 0.5;
                if (normalizedX < 0.0 || normalizedX > 1.0 || normalizedY < 0.0 || normalizedY > 1.0) {
                    return {
                        inRange: false,
                        x: this.unsignedOutOfRange,
                        y: this.unsignedOutOfRange
                    };
                }
                else {
                    return {
                        inRange: true,
                        x: normalizedX * (this.unsignedOutOfRange + 1),
                        y: normalizedY * (this.unsignedOutOfRange + 1)
                    };
                }
            }
            else {
                if (this.printInputs) {
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio', 6);
                }
                var ratio = videoAspectRatio / playerAspectRatio;
                // Unsigned. 
                var normalizedX = ratio * (x / rootDiv.clientWidth - 0.5) + 0.5;
                var normalizedY = y / rootDiv.clientHeight;
                if (normalizedX < 0.0 || normalizedX > 1.0 || normalizedY < 0.0 || normalizedY > 1.0) {
                    return {
                        inRange: false,
                        x: this.unsignedOutOfRange,
                        y: this.unsignedOutOfRange
                    };
                }
                else {
                    return {
                        inRange: true,
                        x: normalizedX * (this.unsignedOutOfRange + 1),
                        y: normalizedY * (this.unsignedOutOfRange + 1)
                    };
                }
            }
        }
    };
    return UeInputTouchMessage;
}(_UeDataMessage__WEBPACK_IMPORTED_MODULE_1__.UeDataMessage));



/***/ }),

/***/ "./src/UeInstanceMessage/UeMessageTypes.ts":
/*!*************************************************!*\
  !*** ./src/UeInstanceMessage/UeMessageTypes.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UeMessageType": () => (/* binding */ UeMessageType)
/* harmony export */ });
/**
 * The Type of message sent to the UE instance over the data channel
 * Must be kept in sync with PixelStreamingProtocol::EToUE4Msg C++ enum.
 * {@link https://github.com/EpicGames/UnrealEngine/blob/release/Engine/Plugins/Media/PixelStreaming/Source/PixelStreaming/Private/ProtocolDefs.h} Requires Login
 */
var UeMessageType = /** @class */ (function () {
    function UeMessageType() {
    }
    /**********************************************************************/
    /*
     * Control Messages. Range = 0..49.
     */
    UeMessageType.iFrameRequest = 0;
    UeMessageType.requestQualityControl = 1;
    UeMessageType.maxFpsRequest = 2;
    UeMessageType.averageBitrateRequest = 3;
    UeMessageType.startStreaming = 4;
    UeMessageType.stopStreaming = 5;
    UeMessageType.latencyTest = 6;
    UeMessageType.requestInitialSettings = 7;
    /**********************************************************************/
    /*
     * Input Messages. Range = 50..89.
     */
    // Generic Input Messages. Range = 50..59.
    UeMessageType.uiInteraction = 50;
    UeMessageType.command = 51;
    // Keyboard Input Message. Range = 60..69.
    UeMessageType.keyDown = 60;
    UeMessageType.keyUp = 61;
    UeMessageType.keyPress = 62;
    // Mouse Input Messages. Range = 70..79.
    UeMessageType.mouseEnter = 70;
    UeMessageType.mouseLeave = 71;
    UeMessageType.mouseDown = 72;
    UeMessageType.mouseUp = 73;
    UeMessageType.mouseMove = 74;
    UeMessageType.mouseWheel = 75;
    // Touch Input Messages. Range = 80..89.
    UeMessageType.touchStart = 80;
    UeMessageType.touchEnd = 81;
    UeMessageType.touchMove = 82;
    // Gamepad Input Messages. Range = 90..99
    UeMessageType.gamepadButtonPressed = 90;
    UeMessageType.gamepadButtonReleased = 91;
    UeMessageType.gamepadAnalog = 92;
    return UeMessageType;
}());



/***/ }),

/***/ "./src/Ui/UiController.ts":
/*!********************************!*\
  !*** ./src/Ui/UiController.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UiController": () => (/* binding */ UiController),
/* harmony export */   "playerStyleAttributes": () => (/* binding */ playerStyleAttributes)
/* harmony export */ });
/**
 * The Ui Controller class handles all methods that interact with the UI
 */
var UiController = /** @class */ (function () {
    function UiController(videoPlayerProvider) {
        var _this = this;
        this.lastTimeResized = new Date().getTime();
        this.videoPlayerProvider = videoPlayerProvider;
        this.playerStyleAttributes = new playerStyleAttributes();
        // set resize events to the windows if it is resized or its orientation is changed
        window.addEventListener('resize', function () { return _this.resizePlayerStyle(); }, true);
        window.addEventListener('orientationchange', function () { return _this.onOrientationChange(); });
    }
    /**
     * Resizes the player element to fill the window
     * @param playerElement - the player DOM element
     */
    UiController.prototype.resizePlayerStyleToFillWindow = function (playerElement) {
        var videoElement = this.videoPlayerProvider.getVideoElement();
        // Fill the player display in window, keeping picture's aspect ratio.
        var windowAspectRatio = window.innerHeight / window.innerWidth;
        var playerAspectRatio = playerElement.clientHeight / playerElement.clientWidth;
        // We want to keep the video ratio correct for the video stream
        var videoWidth;
        var videoHeight;
        if (!videoElement === undefined) {
            videoWidth = parseInt(videoElement.getAttribute("videoWidth"));
            videoHeight = parseInt(videoElement.getAttribute("videoHeight"));
        }
        var videoAspectRatio = videoHeight / videoWidth;
        if (isNaN(videoAspectRatio)) {
            //Video is not initialised yet so set playerElement to size of window
            this.playerStyleAttributes.styleWidth = window.innerWidth;
            this.playerStyleAttributes.styleHeight = window.innerHeight;
            this.playerStyleAttributes.styleTop = 0;
            this.playerStyleAttributes.styleLeft = 0;
            playerElement.setAttribute('style', "top: " + this.playerStyleAttributes.styleTop + "px; left: " + this.playerStyleAttributes.styleLeft + "px; width: " + this.playerStyleAttributes.styleWidth + "px; height: " + this.playerStyleAttributes.styleHeight + "px; cursor: " + this.playerStyleAttributes.styleCursor + "; " + this.playerStyleAttributes.styleAdditional);
        }
        else if (windowAspectRatio < playerAspectRatio) {
            // Window height is the constraining factor so to keep aspect ratio change width appropriately
            this.playerStyleAttributes.styleWidth = Math.floor(window.innerHeight / videoAspectRatio);
            this.playerStyleAttributes.styleHeight = window.innerHeight;
            this.playerStyleAttributes.styleTop = 0;
            this.playerStyleAttributes.styleLeft = Math.floor((window.innerWidth - this.playerStyleAttributes.styleWidth) * 0.5);
            playerElement.setAttribute('style', "top: " + this.playerStyleAttributes.styleTop + "px; left: " + this.playerStyleAttributes.styleLeft + "px; width: " + this.playerStyleAttributes.styleWidth + "px; height: " + this.playerStyleAttributes.styleHeight + "px; cursor: " + this.playerStyleAttributes.styleCursor + "; " + this.playerStyleAttributes.styleAdditional);
        }
        else {
            // Window width is the constraining factor so to keep aspect ratio change height appropriately
            this.playerStyleAttributes.styleWidth = window.innerWidth;
            this.playerStyleAttributes.styleHeight = Math.floor(window.innerWidth * videoAspectRatio);
            this.playerStyleAttributes.styleTop = Math.floor((window.innerHeight - this.playerStyleAttributes.styleHeight) * 0.5);
            this.playerStyleAttributes.styleLeft = 0;
            playerElement.setAttribute('style', "top: " + this.playerStyleAttributes.styleTop + "px; left: " + this.playerStyleAttributes.styleLeft + "px; width: " + this.playerStyleAttributes.styleWidth + "px; height: " + this.playerStyleAttributes.styleHeight + "px; cursor: " + this.playerStyleAttributes.styleCursor + "; " + this.playerStyleAttributes.styleAdditional);
        }
    };
    /**
     * Resizes the player element to fit the actual size of the stream
     * @param playerElement - the player DOM element
     */
    UiController.prototype.resizePlayerStyleToActualSize = function (playerElement) {
        var videoElement = this.videoPlayerProvider.getVideoElement();
        var videoElementLength;
        if (!videoElement === undefined) {
            videoElementLength = parseInt(videoElement.getAttribute("length"));
        }
        if (videoElementLength > 0) {
            // Display image in its actual size
            this.playerStyleAttributes.styleWidth = videoElement.videoWidth;
            this.playerStyleAttributes.styleHeight = videoElement.videoHeight;
            var Top = Math.floor((window.innerHeight - this.playerStyleAttributes.styleHeight) * 0.5);
            var Left = Math.floor((window.innerWidth - this.playerStyleAttributes.styleWidth) * 0.5);
            this.playerStyleAttributes.styleTop = (Top > 0) ? Top : 0;
            this.playerStyleAttributes.styleLeft = (Left > 0) ? Left : 0;
            playerElement.setAttribute('style', "top: " + this.playerStyleAttributes.styleTop + "px; left: " + this.playerStyleAttributes.styleLeft + "px; width: " + this.playerStyleAttributes.styleWidth + "px; height: " + this.playerStyleAttributes.styleHeight + "px; cursor: " + this.playerStyleAttributes.styleCursor + "; " + this.playerStyleAttributes.styleAdditional);
        }
    };
    /**
     * Resizes the player element to fit an arbitrary size
     * @param playerElement - the player DOM element
     */
    UiController.prototype.resizePlayerStyleToArbitrarySize = function (playerElement) {
        playerElement.setAttribute('style', "top: 0px; left: 0px; width: " + this.playerStyleAttributes.styleWidth + "px; height: " + this.playerStyleAttributes.styleHeight + "px; cursor: " + this.playerStyleAttributes.styleCursor + "; " + this.playerStyleAttributes.styleAdditional);
    };
    /**
     * An override for setting up the mouse and freezeFrame
     * @param element - the player DOM element
     */
    UiController.prototype.setUpMouseAndFreezeFrame = function (element) { };
    /**
     * An override for updating the video stream size
     */
    UiController.prototype.updateVideoStreamSize = function () { };
    /**
     * Resizes the player style based on the window height and width
     * @returns - nil if requirements are satisfied
     */
    UiController.prototype.resizePlayerStyle = function () {
        var playerElement = this.videoPlayerProvider.getVideoParentElement();
        if (!playerElement) {
            return;
        }
        this.updateVideoStreamSize();
        if (playerElement.classList.contains('fixed-size')) {
            this.setUpMouseAndFreezeFrame(playerElement);
            return;
        }
        // controls for resizing the player 
        var videoWidth = parseInt(playerElement.getAttribute("videoWidth"));
        var videoHeight = parseInt(playerElement.getAttribute("videoHeight"));
        var windowSmallerThanPlayer = window.innerWidth < videoWidth || window.innerHeight < videoHeight;
        if (this.enlargeDisplayToFillWindow !== null) {
            if (this.enlargeDisplayToFillWindow === true || windowSmallerThanPlayer) {
                this.resizePlayerStyleToFillWindow(playerElement);
            }
            else {
                this.resizePlayerStyleToActualSize(playerElement);
            }
        }
        else {
            this.resizePlayerStyleToArbitrarySize(playerElement);
        }
        this.setUpMouseAndFreezeFrame(playerElement);
    };
    /**
     * On the orientation change of a window clear the timeout
     */
    UiController.prototype.onOrientationChange = function () {
        var _this = this;
        clearTimeout(this.orientationChangeTimeout);
        this.orientationChangeTimeout = setTimeout(function () { _this.resizePlayerStyle(); }, 500);
    };
    return UiController;
}());

/**
 * Handles the player style attributes so they can be instantiated
 */
var playerStyleAttributes = /** @class */ (function () {
    function playerStyleAttributes() {
        this.styleCursor = 'default';
    }
    return playerStyleAttributes;
}());



/***/ }),

/***/ "./src/VideoPlayer/StreamController.ts":
/*!*********************************************!*\
  !*** ./src/VideoPlayer/StreamController.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StreamController": () => (/* binding */ StreamController)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");

/**
 * Video Player Controller handles the creation of the video HTML element and all handlers
 */
var StreamController = /** @class */ (function () {
    function StreamController(videoElementProvider) {
        this.videoElementProvider = videoElementProvider;
        this.audioElement = document.createElement("Audio");
    }
    /**
     * Handles when the Peer connection has a track event
     * @param rtcTrackEvent - RTC Track Event
     */
    StreamController.prototype.handleOnTrack = function (rtcTrackEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "handleOnTrack " + JSON.stringify(rtcTrackEvent.streams), 6);
        var videoElement = this.videoElementProvider.getVideoElement();
        if (rtcTrackEvent.track) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'Got track - ' + rtcTrackEvent.track.kind + ' id=' + rtcTrackEvent.track.id + ' readyState=' + rtcTrackEvent.track.readyState, 6);
        }
        if (rtcTrackEvent.track.kind == "audio") {
            this.CreateAudioTrack(rtcTrackEvent.streams[0]);
            return;
        }
        else if (rtcTrackEvent.track.kind == "video" && videoElement.srcObject !== rtcTrackEvent.streams[0]) {
            videoElement.srcObject = rtcTrackEvent.streams[0];
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'Set video source from video track ontrack.');
            return;
        }
    };
    /**
    * Creates the audio device when receiving an RTCTrackEvent with the kind of "audio"
    * @param audioMediaStream - Audio Media stream track
    */
    StreamController.prototype.CreateAudioTrack = function (audioMediaStream) {
        var videoElement = this.videoElementProvider.getVideoElement();
        // do nothing the video has the same media stream as the audio track we have here (they are linked)
        if (videoElement.srcObject == audioMediaStream) {
            return;
        }
        // video element has some other media stream that is not associated with this audio track
        else if (videoElement.srcObject && videoElement.srcObject !== audioMediaStream) {
            // create a new audio element
            this.audioElement.srcObject = audioMediaStream;
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'Created new audio element to play separate audio stream.');
        }
    };
    return StreamController;
}());



/***/ }),

/***/ "./src/VideoPlayer/VideoPlayer.ts":
/*!****************************************!*\
  !*** ./src/VideoPlayer/VideoPlayer.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VideoPlayer": () => (/* binding */ VideoPlayer)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");

var VideoPlayer = /** @class */ (function () {
    function VideoPlayer(rootDiv, startVideoMuted) {
        this.videoElement = document.createElement("video");
        this.videoElement.id = "streamingVideo";
        this.videoElement.muted = startVideoMuted;
        this.videoElement.disablePictureInPicture = true;
        this.videoElement.playsInline = true;
        this.videoElement.style.width = "100%";
        this.videoElement.style.height = "100%";
        this.videoElement.style.position = "absolute";
        rootDiv.appendChild(this.videoElement);
    }
    /**
     * Get the current context of the html video element
     * @returns the current context of the video element
     */
    VideoPlayer.prototype.getVideoElement = function () {
        return this.videoElement;
    };
    /**
     * Get the current context of the html video elements parent
     * @returns the current context of the video elements parent
     */
    VideoPlayer.prototype.getVideoParentElement = function () {
        return this.videoElement.parentElement;
    };
    /**
     * Set the click actions for when the Element is mouse clicked
     * @param event - Mouse Event
     */
    VideoPlayer.prototype.setClickActions = function (event) {
        if (this.videoElement.paused) {
            this.videoElement.play();
        }
        // minor hack to alleviate ios not supporting pointerlock
        if (this.videoElement.requestPointerLock) {
            this.videoElement.requestPointerLock();
        }
    };
    /**
    * Set the mouse enter and mouse leave events
    */
    VideoPlayer.prototype.setMouseEnterAndLeaveEvents = function (mouseEnterCallBack, mouseLeaveCallBack) {
        // Handle when the Mouse has entered the element
        this.videoElement.onmouseenter = function (event) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Mouse Entered", 6);
            mouseEnterCallBack();
        };
        // Handles when the mouse has left the element 
        this.videoElement.onmouseleave = function (event) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Mouse Left", 6);
            mouseLeaveCallBack();
        };
    };
    /**
    * Set the Video Elements src object tracks to enable
    * @param enabled - Enable Tracks on the Src Object
    */
    VideoPlayer.prototype.setVideoEnabled = function (enabled) {
        // this is a temporary hack until type scripts video element is updated to reflect the need for tracks on a html video element 
        var videoElement = this.videoElement;
        videoElement.srcObject.getTracks().forEach(function (track) { return track.enabled = enabled; });
    };
    return VideoPlayer;
}());



/***/ }),

/***/ "./src/VideoPlayer/VideoPlayerMouseHoverEvents.ts":
/*!********************************************************!*\
  !*** ./src/VideoPlayer/VideoPlayerMouseHoverEvents.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VideoPlayerMouseHoverEvents": () => (/* binding */ VideoPlayerMouseHoverEvents)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");

/**
 * Video Player mouse Hover handler
 */
var VideoPlayerMouseHoverEvents = /** @class */ (function () {
    /**
     * @param mouseController - Mouse Controller
     */
    function VideoPlayerMouseHoverEvents(mouseController) {
        this.mouseController = mouseController;
    }
    /**
     * Satisfies the interfaces handleLockStateChange requirement
     */
    VideoPlayerMouseHoverEvents.prototype.handleLockStateChange = function () { };
    /**
     * Handle the mouse move event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseHoverEvents.prototype.handleMouseMove = function (mouseEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "MouseMove", 6);
        this.mouseController.sendMouseMove(mouseEvent.offsetX, mouseEvent.offsetY, mouseEvent.movementX, mouseEvent.movementY);
        mouseEvent.preventDefault();
    };
    /**
     * Handle the mouse Down event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseHoverEvents.prototype.handleMouseDown = function (mouseEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "onMouse Down", 6);
        this.mouseController.sendMouseDown(mouseEvent.button, mouseEvent.offsetX, mouseEvent.offsetY);
        mouseEvent.preventDefault();
    };
    /**
     * Handle the mouse Up event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseHoverEvents.prototype.handleMouseUp = function (mouseEvent) {
        this.mouseController.sendMouseUp(mouseEvent.button, mouseEvent.offsetX, mouseEvent.offsetY);
        mouseEvent.preventDefault();
    };
    /**
     * Handle the mouse wheel event, sends the mouse wheel data to the UE Instance
     * @param wheelEvent - Mouse Event
     */
    VideoPlayerMouseHoverEvents.prototype.handleMouseWheel = function (wheelEvent) {
        this.mouseController.sendMouseWheel(wheelEvent.detail * -120, wheelEvent.offsetX, wheelEvent.offsetY);
        wheelEvent.preventDefault();
    };
    /**
     * Handle the mouse context menu event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseHoverEvents.prototype.handleContextMenu = function (mouseEvent) {
        this.mouseController.sendMouseUp(mouseEvent.button, mouseEvent.offsetX, mouseEvent.offsetY);
        mouseEvent.preventDefault();
    };
    return VideoPlayerMouseHoverEvents;
}());



/***/ }),

/***/ "./src/VideoPlayer/VideoPlayerMouseLockedEvents.ts":
/*!*********************************************************!*\
  !*** ./src/VideoPlayer/VideoPlayerMouseLockedEvents.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VideoPlayerMouseLockedEvents": () => (/* binding */ VideoPlayerMouseLockedEvents)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");

/**
 * Handle the mouse locked events
 */
var VideoPlayerMouseLockedEvents = /** @class */ (function () {
    /**
     * @param videoElementProvider - The HTML Video Element provider
     * @param mouseController  - Mouse Controller
     */
    function VideoPlayerMouseLockedEvents(videoElementProvider, mouseController) {
        this.videoElementProvider = videoElementProvider;
        this.mouseController = mouseController;
        var videoElement = this.videoElementProvider.getVideoElement();
        this.x = videoElement.width / 2;
        this.y = videoElement.height / 2;
    }
    /**
     * Handle when the locked state Changed
     */
    VideoPlayerMouseLockedEvents.prototype.handleLockStateChange = function () {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Lock state has changed", 6);
        var videoElement = this.videoElementProvider.getVideoElement();
        if (document.pointerLockElement === videoElement) {
            document.onmousemove = function (mouseEvent) { return _this.handleMouseMove(mouseEvent); };
            document.onwheel = function (wheelEvent) { return _this.handleMouseWheel(wheelEvent); };
            videoElement.onmousedown = function (wheelEvent) { return _this.handleMouseDown(wheelEvent); };
            videoElement.onmouseup = function (mouseEvent) { return _this.handleMouseUp(mouseEvent); };
        }
        else {
            document.onmousemove = null;
            videoElement.onmousedown = null;
            videoElement.onmouseup = null;
            videoElement.onwheel = null;
        }
    };
    /**
     * Handle the mouse move event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseLockedEvents.prototype.handleMouseMove = function (mouseEvent) {
        var videoElement = this.videoElementProvider.getVideoElement();
        this.x += mouseEvent.movementX;
        this.y += mouseEvent.movementY;
        if (this.x > videoElement.clientWidth) {
            this.x -= videoElement.clientWidth;
        }
        if (this.y > videoElement.clientHeight) {
            this.y -= videoElement.clientHeight;
        }
        if (this.x < 0) {
            this.x = videoElement.clientWidth + this.x;
        }
        if (this.y < 0) {
            this.y = videoElement.clientHeight - this.y;
        }
        this.mouseController.sendMouseMove(this.x, this.y, mouseEvent.movementX, mouseEvent.movementY);
    };
    /**
     * Handle the mouse Down event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseLockedEvents.prototype.handleMouseDown = function (mouseEvent) {
        this.mouseController.sendMouseDown(mouseEvent.button, mouseEvent.x, mouseEvent.y);
    };
    /**
     * Handle the mouse Up event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseLockedEvents.prototype.handleMouseUp = function (mouseEvent) {
        this.mouseController.sendMouseUp(mouseEvent.button, mouseEvent.x, mouseEvent.y);
    };
    /**
     * Handle the mouse wheel event, sends the mouse wheel data to the UE Instance
     * @param wheelEvent - Mouse Event
     */
    VideoPlayerMouseLockedEvents.prototype.handleMouseWheel = function (wheelEvent) {
        this.mouseController.sendMouseWheel(wheelEvent.deltaY, wheelEvent.x, wheelEvent.y);
    };
    /**
     * Handle the mouse context menu event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseLockedEvents.prototype.handleContextMenu = function (mouseEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "onContextMenu");
    };
    return VideoPlayerMouseLockedEvents;
}());



/***/ }),

/***/ "./src/WebRtcPlayer/WebRtcPlayerController.ts":
/*!****************************************************!*\
  !*** ./src/WebRtcPlayer/WebRtcPlayerController.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "webRtcPlayerController": () => (/* binding */ webRtcPlayerController)
/* harmony export */ });
/* harmony import */ var _WebSockets_WebSocketController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../WebSockets/WebSocketController */ "./src/WebSockets/WebSocketController.ts");
/* harmony import */ var _VideoPlayer_StreamController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../VideoPlayer/StreamController */ "./src/VideoPlayer/StreamController.ts");
/* harmony import */ var _Ui_UiController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Ui/UiController */ "./src/Ui/UiController.ts");
/* harmony import */ var _FreezeFrame_FreezeFrameController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../FreezeFrame/FreezeFrameController */ "./src/FreezeFrame/FreezeFrameController.ts");
/* harmony import */ var _Afk_AfkLogic__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Afk/AfkLogic */ "./src/Afk/AfkLogic.ts");
/* harmony import */ var _DataChannel_DataChannelController__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../DataChannel/DataChannelController */ "./src/DataChannel/DataChannelController.ts");
/* harmony import */ var _PeerConnectionController_PeerConnectionController__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../PeerConnectionController/PeerConnectionController */ "./src/PeerConnectionController/PeerConnectionController.ts");
/* harmony import */ var _UeInstanceMessage_UeDescriptorUi__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../UeInstanceMessage/UeDescriptorUi */ "./src/UeInstanceMessage/UeDescriptorUi.ts");
/* harmony import */ var _UeInstanceMessage_UeControlMessage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../UeInstanceMessage/UeControlMessage */ "./src/UeInstanceMessage/UeControlMessage.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _Inputs_InputController__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Inputs/InputController */ "./src/Inputs/InputController.ts");
/* harmony import */ var _MicPlayer_MicController__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../MicPlayer/MicController */ "./src/MicPlayer/MicController.ts");
/* harmony import */ var _VideoPlayer_VideoPlayer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../VideoPlayer/VideoPlayer */ "./src/VideoPlayer/VideoPlayer.ts");













/**
 * Entry point for the Web RTC Player
 */
var webRtcPlayerController = /** @class */ (function () {
    /**
     *
     * @param config - the frontend config object
     * @param delegate - the delegate interface object
     */
    function webRtcPlayerController(config, delegate) {
        var _this = this;
        this.shouldShowPlayOverlay = true;
        this.lastTimeResized = new Date().getTime();
        this.config = config;
        this.delegate = delegate;
        this.sdpConstraints = {
            offerToReceiveAudio: true,
            offerToReceiveVideo: true
        };
        // set up the afk logic class and connect up its method for closing the signaling server 
        this.afkLogic = new _Afk_AfkLogic__WEBPACK_IMPORTED_MODULE_4__.AfkLogic(this.config.controlScheme, this.config.afkTimeout);
        this.afkLogic.setDisconnectMessageOverride = function (message) { return _this.setDisconnectMessageOverride(message); };
        this.afkLogic.closeWebSocket = function () { return _this.closeSignalingServer(); };
        this.freezeFrameController = new _FreezeFrame_FreezeFrameController__WEBPACK_IMPORTED_MODULE_3__.FreezeFrameController(this.config.playerElement);
        this.videoPlayer = new _VideoPlayer_VideoPlayer__WEBPACK_IMPORTED_MODULE_12__.VideoPlayer(this.config.playerElement, this.config.startVideoMuted);
        this.streamController = new _VideoPlayer_StreamController__WEBPACK_IMPORTED_MODULE_1__.StreamController(this.videoPlayer);
        this.uiController = new _Ui_UiController__WEBPACK_IMPORTED_MODULE_2__.UiController(this.videoPlayer);
        this.uiController.setUpMouseAndFreezeFrame = function (element) { return _this.setUpMouseAndFreezeFrame(element); };
        this.dataChannelController = new _DataChannel_DataChannelController__WEBPACK_IMPORTED_MODULE_5__.DataChannelController();
        this.dataChannelController.handleOnOpen = function () { return _this.handleDataChannelConnected(); };
        this.dataChannelController.onLatencyTestResult = function (latencyTestResults) { return _this.handleLatencyTestResult(latencyTestResults); };
        this.dataChannelController.onVideoEncoderAvgQP = function (AvgQP) { return _this.handleVideoEncoderAvgQP(AvgQP); };
        this.dataChannelController.OnInitialSettings = function (InitialSettings) { return _this.handleInitialSettings(InitialSettings); };
        this.dataChannelController.onQualityControlOwnership = function (hasQualityOwnership) { return _this.handleQualityControlOwnership(hasQualityOwnership); };
        this.dataChannelController.resetAfkWarningTimerOnDataSend = function () { return _this.afkLogic.resetAfkWarningTimer(); };
        // set up websocket methods
        this.webSocketController = new _WebSockets_WebSocketController__WEBPACK_IMPORTED_MODULE_0__.WebSocketController(this.config.signallingServerAddress);
        this.webSocketController.onConfig = function (messageConfig) { return _this.handleOnConfigMessage(messageConfig); };
        this.webSocketController.onInstanceStateChange = function (instanceState) { return _this.handleInstanceStateChange(instanceState); };
        this.webSocketController.onAuthenticationResponse = function (authResponse) { return _this.handleAuthenticationResponse(authResponse); };
        this.webSocketController.onWebSocketOncloseOverlayMessage = function (event) { return _this.delegate.onDisconnect(event.code + " - " + event.reason); };
        // set up the final webRtc player controller methods from within our delegate so a connection can be activated
        this.delegate.setIWebRtcPlayerController(this);
        // now that the delegate has finished instantiating connect the rest of the afk methods to the afk logic class
        this.afkLogic.showAfkOverlay = function () { return _this.delegate.showAfkOverlay(_this.afkLogic.countDown); };
        this.afkLogic.updateAfkCountdown = function () { return _this.delegate.updateAfkOverlay(_this.afkLogic.countDown); };
        this.afkLogic.hideCurrentOverlay = function () { return _this.delegate.hideCurrentOverlay(); };
        this.webSocketController.stopAfkWarningTimer = function () { return _this.afkLogic.stopAfkWarningTimer(); };
    }
    /**
     * connect up the onAfkClick action with a method so it can be exposed to the delegate
     */
    webRtcPlayerController.prototype.onAfkClick = function () {
        this.afkLogic.onAfkClick();
        // if the stream is paused play it
        if (this.videoPlayer.videoElement.paused === true) {
            this.playStream();
        }
    };
    /**
     * Restart the stream automaticity without refreshing the page
     */
    webRtcPlayerController.prototype.restartStreamAutomaticity = function () {
        var _this = this;
        // if there is no webSocketController return immediately or this will not work
        if (!this.webSocketController) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "The Web Socket Controller does not exist so this will not work right now.");
            return;
        }
        // if a websocket object has not been created connect normally without closing 
        if (!this.webSocketController.webSocket) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "A websocket connection has not been made yet so we will start the stream");
            this.delegate.onWebRtcAutoConnect();
            this.connectToSignallingServer();
        }
        else {
            // set the replay status so we get a text overlay over an action overlay
            this.delegate.showActionOrErrorOnDisconnect = false;
            // set the disconnect message
            this.setDisconnectMessageOverride("Restarting stream manually");
            // close the connection 
            this.closeSignalingServer();
            // wait for the connection to close and restart the connection
            var autoConnectTimeout_1 = setTimeout(function () {
                _this.delegate.onWebRtcAutoConnect();
                _this.connectToSignallingServer();
                clearTimeout(autoConnectTimeout_1);
            }, 3000);
        }
    };
    /**
     * Sets if we are enlarging the display to fill the window for freeze frames and ui controller
     * @param isFilling is the display filling or not
     */
    webRtcPlayerController.prototype.setEnlargeToFillDisplay = function (isFilling) {
        this.freezeFrameController.freezeFrame.enlargeDisplayToFillWindow = isFilling;
        this.uiController.enlargeDisplayToFillWindow = isFilling;
    };
    /**
     * Loads a freeze frame if it is required otherwise shows the play overlay
     */
    webRtcPlayerController.prototype.loadFreezeFrameOrShowPlayOverlay = function () {
        if (this.shouldShowPlayOverlay === true) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "showing play overlay");
            this.delegate.showPlayOverlay();
            this.resizePlayerStyle();
        }
        else {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "showing freeze frame");
            this.freezeFrameController.showFreezeFrame();
        }
        this.videoPlayer.setVideoEnabled(false);
    };
    /**
     * Enable the video after hiding a freeze frame
     */
    webRtcPlayerController.prototype.InvalidateFreezeFrameAndEnableVideo = function () {
        this.freezeFrameController.hideFreezeFrame();
        if (this.videoPlayer.videoElement) {
            this.videoPlayer.setVideoEnabled(true);
        }
    };
    /**
     * Plays the stream audio and video source and sets up other pieces while the stream starts
     */
    webRtcPlayerController.prototype.playStream = function () {
        var _this = this;
        if (!this.videoPlayer.videoElement) {
            this.delegate.showErrorOverlay("Could not player video stream because the video player was not initialised correctly.");
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Could not player video stream because the video player was not initialised correctly.");
            // set the disconnect message
            this.setDisconnectMessageOverride("Stream not initialised correctly");
            // close the connection 
            this.closeSignalingServer();
        }
        else {
            this.inputController.registerTouch(this.config.fakeMouseWithTouches, this.videoPlayer.videoElement);
            if (this.streamController.audioElement) {
                this.streamController.audioElement.play().then(function () {
                    _this.playVideo();
                }).catch(function (onRejectedReason) {
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), onRejectedReason);
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Browser does not support autoplaying video without interaction - to resolve this we are going to show the play button overlay.");
                    _this.delegate.showPlayOverlay();
                });
            }
            else {
                this.playVideo();
            }
            this.shouldShowPlayOverlay = false;
            this.freezeFrameController.showFreezeFrame();
            this.delegate.hideCurrentOverlay();
        }
    };
    /**
     * Plays the video stream
     */
    webRtcPlayerController.prototype.playVideo = function () {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), 'playVide');
        // // handle play() with .then as it is an asynchronous call  
        this.videoPlayer.videoElement.play().catch(function (onRejectedReason) {
            if (_this.streamController.audioElement.srcObject) {
                _this.streamController.audioElement.pause();
            }
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), onRejectedReason);
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Browser does not support autoplaying video without interaction - to resolve this we are going to show the play button overlay.");
            _this.delegate.showPlayOverlay();
        });
    };
    /**
     * Enable the video to play automaticity if enableSpsAutoplay is true
     */
    webRtcPlayerController.prototype.autoPlayVideoOrSetUpPlayOverlay = function () {
        if (this.config.enableSpsAutoplay === true) {
            // set up the auto play on the video element  
            this.videoPlayer.videoElement.autoplay = true;
            // attempt to play the video
            this.playStream();
        }
        else {
            this.delegate.showPlayOverlay();
        }
        // send and request initial stats
        this.ueControlMessage.SendRequestInitialSettings();
        this.ueControlMessage.SendRequestQualityControl();
    };
    /**
     * Connect to the Signaling server
     */
    webRtcPlayerController.prototype.connectToSignallingServer = function () {
        this.webSocketController.connect();
    };
    /**
     * This will start the handshake to the signalling server
     * @param peerConfig  - RTC Configuration Options from the Signaling server
     * @remark RTC Peer Connection on Ice Candidate event have it handled by handle Send Ice Candidate
     */
    webRtcPlayerController.prototype.startSession = function (peerConfig) {
        var _this = this;
        // set up url params for STUN, Mic and SFU
        this.urlParams = new URLSearchParams(window.location.search);
        // check for forcing turn
        if (this.urlParams.has('ForceTURN')) {
            // check for a turn server
            var hasTurnServer = this.checkTurnServerAvailability(peerConfig);
            // close and error if turn is forced and there is no turn server
            if (!hasTurnServer) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "No turn server was found in the Peer Connection Options. TURN cannot be forced, closing connection. Please use STUN instead");
                this.setDisconnectMessageOverride("TURN cannot be forced, closing connection. Please use STUN instead.");
                this.closeSignalingServer();
                return;
            }
        }
        // set up the peer connection controller
        this.peerConnectionController = new _PeerConnectionController_PeerConnectionController__WEBPACK_IMPORTED_MODULE_6__.PeerConnectionController(peerConfig, this.urlParams.has('ForceTURN'));
        //set up mic controller
        this.micController = new _MicPlayer_MicController__WEBPACK_IMPORTED_MODULE_11__.MicController(this.urlParams);
        // set up peer connection controller video stats
        this.peerConnectionController.onVideoStats = function (event) { return _this.handleVideoStats(event); };
        /* When the Peer Connection Wants to send an offer have it handled */
        this.peerConnectionController.onSendWebRTCOffer = function (offer) { return _this.handleSendWebRTCOffer(offer); };
        /* When the Peer connection ice candidate is added have it handled */
        this.peerConnectionController.onPeerIceCandidate = function (peerConnectionIceEvent) { return _this.handleSendIceCandidate(peerConnectionIceEvent); };
        // handel mic connections with promise
        this.dataChannelController.createDataChannel(this.peerConnectionController.peerConnection, "cirrus", this.datachannelOptions);
        // set up webRtc text overlays 
        this.peerConnectionController.showTextOverlayConnecting = function () { return _this.delegate.onWebRtcConnecting(); };
        this.peerConnectionController.showTextOverlaySetupFailure = function () { return _this.delegate.onWebRtcFailed(); };
        /* RTC Peer Connection on Track event -> handle on track */
        this.peerConnectionController.onTrack = function (trackEvent) { return _this.streamController.handleOnTrack(trackEvent); };
        /* Start the Hand shake process by creating an Offer */
        this.peerConnectionController.createOffer(this.sdpConstraints, this.micController.useMic);
    };
    /**
     * Checks the peer connection options for a turn server and returns true or false
     */
    webRtcPlayerController.prototype.checkTurnServerAvailability = function (options) {
        // if iceServers is empty return false this should not be the general use case but is here incase
        if (!options.iceServers) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), 'A turn server was not found');
            return false;
        }
        // loop through the ice servers to check for a turn url
        for (var _i = 0, _a = options.iceServers; _i < _a.length; _i++) {
            var iceServer = _a[_i];
            for (var _b = 0, _c = iceServer.urls; _b < _c.length; _b++) {
                var url = _c[_b];
                if (url.includes('turn')) {
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "A turn server was found at " + url);
                    return true;
                }
            }
        }
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), 'A turn server was not found');
        return false;
    };
    /**
     * Handles when a Config Message is received contains the Peer Connection Options required (STUN and TURN Server Info)
     * @param messageConfig - Config Message received from the signaling server
     */
    webRtcPlayerController.prototype.handleOnConfigMessage = function (messageConfig) {
        var _this = this;
        // Tell the WebRtcController to start a session with the peer options sent from the signaling server
        this.startSession(messageConfig.peerConnectionOptions);
        // When the signaling server sends a WebRTC Answer over the websocket connection have the WebRtcController handle the message
        this.webSocketController.onWebRtcAnswer = function (messageAnswer) { return _this.handleWebRtcAnswer(messageAnswer); };
        // When the signaling server sends a IceCandidate over the websocket connection have the WebRtcController handle the message
        this.webSocketController.onIceCandidate = function (iceCandidate) { return _this.handleIceCandidate(iceCandidate); };
    };
    /**
     * Handle the RTC Answer from the signaling server
     * @param Answer - Answer Message from the Signaling server
     */
    webRtcPlayerController.prototype.handleWebRtcAnswer = function (Answer) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "There is an answer", 6);
        var sdpAnswer = {
            sdp: Answer.sdp,
            type: "answer"
        };
        this.peerConnectionController.handleAnswer(sdpAnswer);
        // start the afk warning timer as the container is now running
        this.afkLogic.startAfkWarningTimer();
        // show the overlay that we have an answer
        this.delegate.onWebRtcAnswer();
    };
    /**
     * When an ice Candidate is received from the Signaling server add it to the Peer Connection Client
     * @param iceCandidate - Ice Candidate from Server
     */
    webRtcPlayerController.prototype.handleIceCandidate = function (iceCandidate) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Web RTC Controller: onWebRtcIce", 6);
        var candidate = new RTCIceCandidate(iceCandidate);
        this.peerConnectionController.handleOnIce(candidate);
    };
    /**
     * Send the ice Candidate to the signaling server via websocket
       * @param iceEvent - RTC Peer ConnectionIceEvent) {
     */
    webRtcPlayerController.prototype.handleSendIceCandidate = function (iceEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "OnIceCandidate", 6);
        if (iceEvent.candidate && iceEvent.candidate.candidate) {
            this.webSocketController.sendIceCandidate(iceEvent.candidate);
        }
    };
    /**
     * Send the RTC Offer Session to the Signaling server via websocket
     * @param offer - RTC Session Description
     */
    webRtcPlayerController.prototype.handleSendWebRTCOffer = function (offer) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Sending the offer to the Server", 6);
        this.webSocketController.sendWebRtcOffer(offer);
    };
    /**
     * registers the mouse for use in IWebRtcPlayerController
     */
    webRtcPlayerController.prototype.activateRegisterMouse = function () {
        this.inputController.registerMouse(this.config.controlScheme);
    };
    /**
     * Sets up the Data channel Keyboard, Mouse, UE Control Message, UE Descriptor
     */
    webRtcPlayerController.prototype.handleDataChannelConnected = function () {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Data Channel is open", 6);
        // show the connected overlay 
        this.delegate.onWebRtcConnected();
        this.inputController = new _Inputs_InputController__WEBPACK_IMPORTED_MODULE_10__.InputController(this.dataChannelController, this.videoPlayer);
        this.ueControlMessage = new _UeInstanceMessage_UeControlMessage__WEBPACK_IMPORTED_MODULE_8__.UeControlMessage(this.dataChannelController);
        this.ueDescriptorUi = new _UeInstanceMessage_UeDescriptorUi__WEBPACK_IMPORTED_MODULE_7__.UeDescriptorUi(this.dataChannelController);
        this.activateRegisterMouse();
        this.inputController.registerKeyBoard(this.config.suppressBrowserKeys);
        this.inputController.registerGamePad();
        this.videoPlayer.setMouseEnterAndLeaveEvents(function () { return _this.inputController.mouseController.sendMouseEnter(); }, function () { return _this.inputController.mouseController.sendMouseLeave(); });
        this.resizePlayerStyle();
        this.dataChannelController.processFreezeFrameMessage = function (view) { return _this.freezeFrameController.processFreezeFrameMessage(view, function () { return _this.loadFreezeFrameOrShowPlayOverlay(); }); };
        this.dataChannelController.onUnFreezeFrame = function () { return _this.InvalidateFreezeFrameAndEnableVideo(); };
        setInterval(function () { return _this.getStats(); }, 1000);
        // either autoplay the video or set up the play overlay
        this.autoPlayVideoOrSetUpPlayOverlay();
        this.resizePlayerStyle();
        this.ueDescriptorUi.sendUpdateVideoStreamSize(this.videoPlayer.videoElement.clientWidth, this.videoPlayer.videoElement.clientHeight);
        this.delegate.onVideoInitialised();
        this.uiController.updateVideoStreamSize = function () { return _this.updateVideoStreamSize(); };
    };
    /**
     * Handles when the web socket receives an authentication response
     * @param authResponse - Authentication Response
     */
    webRtcPlayerController.prototype.handleAuthenticationResponse = function (authResponse) {
        this.delegate.onAuthenticationResponse(authResponse);
    };
    /**
     * Handles when the stream size changes
     */
    webRtcPlayerController.prototype.updateVideoStreamSize = function () {
        // Call the setter before calling this function
        if (!this.matchViewportResolution) {
            return;
        }
        var now = new Date().getTime();
        if (now - this.lastTimeResized > 1000) {
            // get the root div from config 
            if (!this.config.playerElement) {
                return;
            }
            this.ueDescriptorUi.sendUpdateVideoStreamSize(this.videoPlayer.videoElement.clientWidth, this.videoPlayer.videoElement.clientHeight);
            this.lastTimeResized = new Date().getTime();
        }
        else {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), 'Resizing too often - skipping', 6);
            clearTimeout(this.resizeTimeout);
            this.resizeTimeout = setTimeout(this.updateVideoStreamSize, 1000);
        }
    };
    /**
     * Handles when the Instance State Changes
     * @param instanceState  - Instance State
     */
    webRtcPlayerController.prototype.handleInstanceStateChange = function (instanceState) {
        this.delegate.onInstanceStateChange(instanceState);
    };
    /**
     * Set the freeze frame overlay to the player div
     * @param playerElement - The div element of the Player
     */
    webRtcPlayerController.prototype.setUpMouseAndFreezeFrame = function (playerElement) {
        // Calculating and normalizing positions depends on the width and height of the player.
        this.playerElementClientRect = playerElement.getBoundingClientRect();
        this.freezeFrameController.freezeFrame.resize();
    };
    /**
     * Close the Connection to the signaling server
     */
    webRtcPlayerController.prototype.closeSignalingServer = function () {
        this.webSocketController.close();
    };
    /**
     * Fires a Video Stats Event in the RTC Peer Connection
     */
    webRtcPlayerController.prototype.getStats = function () {
        this.peerConnectionController.generateStats();
    };
    /**
     * Send a Latency Test Request to the UE Instance
     */
    webRtcPlayerController.prototype.sendLatencyTest = function () {
        this.latencyStartTime = Date.now();
        this.ueControlMessage.sendLatencyTest(this.latencyStartTime);
    };
    /**
     * Send the Encoder Settings to the UE Instance as a UE UI Descriptor.
     * @param encoder - Encoder Settings
     */
    webRtcPlayerController.prototype.sendEncoderSettings = function (encoder) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "----   Encoder Settings    ----\n" + JSON.stringify(encoder, undefined, 4) + "\n-------------------------------", 6);
        if (encoder.RateControl != null) {
            this.ueDescriptorUi.sendEncoderRateControl(encoder.RateControl);
        }
        if (encoder.TargetBitrate != null) {
            this.ueDescriptorUi.sendEncoderTargetBitRate(encoder.TargetBitrate);
        }
        if (encoder.MaxBitrate != null) {
            this.ueDescriptorUi.sendEncoderMaxBitrateVbr(encoder.MaxBitrate);
        }
        if (encoder.MinQP != null) {
            this.ueDescriptorUi.sendEncoderMinQP(encoder.MinQP);
        }
        if (encoder.MaxQP != null) {
            this.ueDescriptorUi.sendEncoderMaxQP(encoder.MaxQP);
        }
        if (encoder.FillerData != null) {
            this.ueDescriptorUi.sendEncoderEnableFillerData(encoder.FillerData);
        }
        if (encoder.MultiPass != null) {
            this.ueDescriptorUi.sendEncoderMultiPass(encoder.MultiPass);
        }
    };
    /**
     * Send the WebRTC Settings to the UE Instance as a UE UI Descriptor.
     * @param webRTC - Web RTC Settings
     */
    webRtcPlayerController.prototype.sendWebRtcSettings = function (webRTC) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "----   WebRTC Settings    ----\n" + JSON.stringify(webRTC, undefined, 4) + "\n-------------------------------", 6);
        if (webRTC.DegradationPref != null) {
            this.ueDescriptorUi.sendWebRtcDegradationPreference(webRTC.DegradationPref);
        }
        if (webRTC.FPS != null) {
            this.ueDescriptorUi.sendWebRtcFps(webRTC.FPS);
            this.ueDescriptorUi.sendWebRtcMaxFps(webRTC.FPS);
        }
        if (webRTC.MinBitrate != null) {
            this.ueDescriptorUi.sendWebRtcMinBitrate(webRTC.MinBitrate);
        }
        if (webRTC.MaxBitrate != null) {
            this.ueDescriptorUi.sendWebRtcMaxBitrate(webRTC.MaxBitrate);
        }
        if (webRTC.LowQP != null) {
            this.ueDescriptorUi.sendWebRtcLowQpThreshold(webRTC.LowQP);
        }
        if (webRTC.HighQP != null) {
            this.ueDescriptorUi.sendWebRtcHighQpThreshold(webRTC.HighQP);
        }
    };
    /**
     * Send Aggregated Stats to the Signaling Server
     * @param stats - Aggregated Stats
     */
    webRtcPlayerController.prototype.sendStatsToSignallingServer = function (stats) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "----   Sending Aggregated Stats to Signaling Server   ----\n" + JSON.stringify(stats, undefined, 4) + "\n-----------------------------------------------------------", 6);
        this.webSocketController.sendStats(stats);
    };
    /**
     * Sends a UI Interaction Descriptor to the UE Instance
     * @param message - String to send to the UE Instance
     */
    webRtcPlayerController.prototype.sendUeUiDescriptor = function (message) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "----   UE UI Interaction String   ----\n" + JSON.stringify(message, undefined, 4) + "\n---------------------------------------", 6);
        this.ueDescriptorUi.sendUiInteraction(message);
    };
    /**
     * Sends the UI Descriptor `stat fps` to the UE Instance
     */
    webRtcPlayerController.prototype.sendShowFps = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "----   Sending show stat to UE   ----", 6);
        this.ueDescriptorUi.sendShowFps();
    };
    /**
     * Sends a request to the UE Instance to have ownership of Quality
     */
    webRtcPlayerController.prototype.sendRequestQualityControlOwnership = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "----   Sending Request to Control Quality  ----", 6);
        this.ueControlMessage.SendRequestQualityControl();
    };
    /**
     * Handles when a Latency Test Result are received from the UE Instance
     * @param latencyTimings - Latency Test Timings
     */
    webRtcPlayerController.prototype.handleLatencyTestResult = function (latencyTimings) {
        latencyTimings.testStartTimeMs = this.latencyStartTime;
        latencyTimings.browserReceiptTimeMs = Date.now();
        latencyTimings.latencyExcludingDecode = ~~(latencyTimings.browserReceiptTimeMs - latencyTimings.testStartTimeMs);
        latencyTimings.testDuration = ~~(latencyTimings.TransmissionTimeMs - latencyTimings.ReceiptTimeMs);
        latencyTimings.networkLatency = ~~(latencyTimings.latencyExcludingDecode - latencyTimings.testDuration);
        if (latencyTimings.frameDisplayDeltaTimeMs && latencyTimings.browserReceiptTimeMs) {
            latencyTimings.endToEndLatency = ~~(latencyTimings.frameDisplayDeltaTimeMs + latencyTimings.networkLatency, +latencyTimings.CaptureToSendMs);
        }
        this.delegate.onLatencyTestResult(latencyTimings);
    };
    /**
     * Handles when the Encoder and Web RTC Settings are received from the UE Instance
     * @param settings - Initial Encoder and Web RTC Settings
     */
    webRtcPlayerController.prototype.handleInitialSettings = function (settings) {
        this.delegate.onInitialSettings(settings);
    };
    /**
     * Handles when the Quantization Parameter are received from the UE Instance
     * @param AvgQP - Encoders Quantization Parameter
     */
    webRtcPlayerController.prototype.handleVideoEncoderAvgQP = function (AvgQP) {
        this.delegate.onVideoEncoderAvgQP(AvgQP);
    };
    /**
     * Flag set if the user has Quality Ownership
     * @param hasQualityOwnership - Does the current client have Quality Ownership
     */
    webRtcPlayerController.prototype.handleQualityControlOwnership = function (hasQualityOwnership) {
        this.delegate.onQualityControlOwnership(hasQualityOwnership);
    };
    /**
     * Handles when the Aggregated stats are Collected
     * @param stats - Aggregated Stats
     */
    webRtcPlayerController.prototype.handleVideoStats = function (stats) {
        this.delegate.onVideoStats(stats);
    };
    /**
    * To Resize the Video Player element
    */
    webRtcPlayerController.prototype.resizePlayerStyle = function () {
        this.uiController.resizePlayerStyle();
    };
    /**
     * Get the overridden disconnect message
     */
    webRtcPlayerController.prototype.getDisconnectMessageOverride = function () {
        return this.disconnectMessageOverride;
    };
    /**
     * Set the override for the disconnect message
     */
    webRtcPlayerController.prototype.setDisconnectMessageOverride = function (message) {
        this.disconnectMessageOverride = message;
    };
    return webRtcPlayerController;
}());



/***/ }),

/***/ "./src/WebSockets/MessageReceive.ts":
/*!******************************************!*\
  !*** ./src/WebSockets/MessageReceive.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "InstanceState": () => (/* binding */ InstanceState),
/* harmony export */   "MessageAnswer": () => (/* binding */ MessageAnswer),
/* harmony export */   "MessageAuthRequired": () => (/* binding */ MessageAuthRequired),
/* harmony export */   "MessageAuthResponse": () => (/* binding */ MessageAuthResponse),
/* harmony export */   "MessageAuthResponseOutcomeType": () => (/* binding */ MessageAuthResponseOutcomeType),
/* harmony export */   "MessageConfig": () => (/* binding */ MessageConfig),
/* harmony export */   "MessageIceCandidate": () => (/* binding */ MessageIceCandidate),
/* harmony export */   "MessageInstanceState": () => (/* binding */ MessageInstanceState),
/* harmony export */   "MessagePlayerCount": () => (/* binding */ MessagePlayerCount),
/* harmony export */   "MessageRecv": () => (/* binding */ MessageRecv),
/* harmony export */   "MessageRecvTypes": () => (/* binding */ MessageRecvTypes)
/* harmony export */ });
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
/**
 * The Types of Messages that will be received
 */
var MessageRecvTypes;
(function (MessageRecvTypes) {
    MessageRecvTypes["AUTHENTICATION_REQUIRED"] = "authenticationRequired";
    MessageRecvTypes["AUTHENTICATION_RESPONSE"] = "authenticationResponse";
    MessageRecvTypes["INSTANCE_STATE"] = "instanceState";
    MessageRecvTypes["CONFIG"] = "config";
    MessageRecvTypes["PLAYER_COUNT"] = "playerCount";
    MessageRecvTypes["ANSWER"] = "answer";
    MessageRecvTypes["ICE_CANDIDATE"] = "iceCandidate";
    MessageRecvTypes["PING"] = "ping";
})(MessageRecvTypes || (MessageRecvTypes = {}));
/**
 * Types of Authentication reposes
 */
var MessageAuthResponseOutcomeType;
(function (MessageAuthResponseOutcomeType) {
    MessageAuthResponseOutcomeType["REDIRECT"] = "REDIRECT";
    MessageAuthResponseOutcomeType["INVALID_TOKEN"] = "INVALID_TOKEN";
    MessageAuthResponseOutcomeType["AUTHENTICATED"] = "AUTHENTICATED";
    MessageAuthResponseOutcomeType["ERROR"] = "ERROR";
})(MessageAuthResponseOutcomeType || (MessageAuthResponseOutcomeType = {}));
/**
 * States of the UE Instance
 */
var InstanceState;
(function (InstanceState) {
    InstanceState["UNALLOCATED"] = "UNALLOCATED";
    InstanceState["PENDING"] = "PENDING";
    InstanceState["FAILED"] = "FAILED";
    InstanceState["READY"] = "READY";
})(InstanceState || (InstanceState = {}));
/**
 * Concrete Received Message wrapper
 */
var MessageRecv = /** @class */ (function () {
    function MessageRecv() {
    }
    return MessageRecv;
}());

/**
 * Authentication Required Message wrapper
 */
var MessageAuthRequired = /** @class */ (function (_super) {
    __extends(MessageAuthRequired, _super);
    function MessageAuthRequired() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessageAuthRequired;
}(MessageRecv));

/**
 * Authentication Response Message wrapper
 */
var MessageAuthResponse = /** @class */ (function (_super) {
    __extends(MessageAuthResponse, _super);
    function MessageAuthResponse() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessageAuthResponse;
}(MessageRecv));

/**
 * Instance State Message wrapper
 */
var MessageInstanceState = /** @class */ (function (_super) {
    __extends(MessageInstanceState, _super);
    function MessageInstanceState() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessageInstanceState;
}(MessageRecv));

/**
 * Config Message Wrapper
 */
var MessageConfig = /** @class */ (function (_super) {
    __extends(MessageConfig, _super);
    function MessageConfig() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessageConfig;
}(MessageRecv));

/**
 * Player Count Message wrapper
 */
var MessagePlayerCount = /** @class */ (function (_super) {
    __extends(MessagePlayerCount, _super);
    function MessagePlayerCount() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessagePlayerCount;
}(MessageRecv));

/**
 * Web RTC offer Answer Message wrapper
 */
var MessageAnswer = /** @class */ (function (_super) {
    __extends(MessageAnswer, _super);
    function MessageAnswer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessageAnswer;
}(MessageRecv));

/**
 * Ice Candidate Message wrapper
 */
var MessageIceCandidate = /** @class */ (function (_super) {
    __extends(MessageIceCandidate, _super);
    function MessageIceCandidate() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessageIceCandidate;
}(MessageRecv));



/***/ }),

/***/ "./src/WebSockets/MessageSend.ts":
/*!***************************************!*\
  !*** ./src/WebSockets/MessageSend.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MessageAuthRequest": () => (/* binding */ MessageAuthRequest),
/* harmony export */   "MessageIceCandidate": () => (/* binding */ MessageIceCandidate),
/* harmony export */   "MessagePong": () => (/* binding */ MessagePong),
/* harmony export */   "MessageRequestInstance": () => (/* binding */ MessageRequestInstance),
/* harmony export */   "MessageSend": () => (/* binding */ MessageSend),
/* harmony export */   "MessageSendTypes": () => (/* binding */ MessageSendTypes),
/* harmony export */   "MessageStats": () => (/* binding */ MessageStats),
/* harmony export */   "MessageWebRTCOffer": () => (/* binding */ MessageWebRTCOffer)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

/**
 * The Send Types that are pushed from the signaling server
 */
var MessageSendTypes;
(function (MessageSendTypes) {
    MessageSendTypes["ICE_CANDIDATE"] = "iceCandidate";
    MessageSendTypes["STATS"] = "stats";
    MessageSendTypes["AUTHENTICATION_REQUEST"] = "authenticationRequest";
    MessageSendTypes["REQUEST_INSTANCE"] = "requestInstance";
    MessageSendTypes["OFFER"] = "offer";
    MessageSendTypes["PONG"] = "pong";
})(MessageSendTypes || (MessageSendTypes = {}));
/**
 * A Wrapper for the message to send to the signaling server
 */
var MessageSend = /** @class */ (function () {
    function MessageSend() {
    }
    /**
     * Turns the wrapper into a JSON String
     * @returns - JSON String of the Message to send
     */
    MessageSend.prototype.payload = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Sending => \n" + JSON.stringify(this, undefined, 4), 6);
        return JSON.stringify(this);
    };
    return MessageSend;
}());

/**
 * Auth Request Message Wrapper
 */
var MessageAuthRequest = /** @class */ (function (_super) {
    __extends(MessageAuthRequest, _super);
    /**
     * @param token - Token Provided by the Auth Provider
     * @param provider - Name of the provider that is registered in the auth plugin
     */
    function MessageAuthRequest(token, provider) {
        var _this = _super.call(this) || this;
        _this.type = MessageSendTypes.AUTHENTICATION_REQUEST;
        _this.token = token;
        _this.provider = provider;
        return _this;
    }
    return MessageAuthRequest;
}(MessageSend));

/**
 * Instance Request Message Wrapper
 */
var MessagePong = /** @class */ (function (_super) {
    __extends(MessagePong, _super);
    function MessagePong(time) {
        var _this = _super.call(this) || this;
        _this.type = MessageSendTypes.PONG;
        _this.time = time;
        return _this;
    }
    return MessagePong;
}(MessageSend));

/**
 * Instance Request Message Wrapper
 */
var MessageRequestInstance = /** @class */ (function (_super) {
    __extends(MessageRequestInstance, _super);
    function MessageRequestInstance() {
        var _this = _super.call(this) || this;
        _this.type = MessageSendTypes.REQUEST_INSTANCE;
        return _this;
    }
    return MessageRequestInstance;
}(MessageSend));

/**
 * Aggregated Stats Message Wrapper
 */
var MessageStats = /** @class */ (function (_super) {
    __extends(MessageStats, _super);
    /**
     * @param aggregatedStats - Aggregated Stats
     */
    function MessageStats(aggregatedStats) {
        var _this = _super.call(this) || this;
        _this.type = MessageSendTypes.STATS;
        _this.inboundVideoStats = aggregatedStats.inboundVideoStats;
        _this.inboundAudioStats = aggregatedStats.inboundAudioStats;
        _this.candidatePair = aggregatedStats.candidatePair;
        _this.dataChannelStats = aggregatedStats.dataChannelStats;
        _this.localCandidates = aggregatedStats.localCandidates;
        _this.remoteCandidates = aggregatedStats.remoteCandidates;
        _this.outboundVideoStats = aggregatedStats.outBoundVideoStats;
        return _this;
    }
    return MessageStats;
}(MessageSend));

/**
 *  Web RTC Offer message wrapper
 */
var MessageWebRTCOffer = /** @class */ (function (_super) {
    __extends(MessageWebRTCOffer, _super);
    /**
     * @param offer - Generated Web RTC Offer
     */
    function MessageWebRTCOffer(offer) {
        var _this = _super.call(this) || this;
        _this.type = MessageSendTypes.OFFER;
        if (offer) {
            _this.type = offer.type;
            _this.sdp = offer.sdp;
        }
        return _this;
    }
    return MessageWebRTCOffer;
}(MessageSend));

/**
 * RTC Ice Candidate Wrapper
 */
var MessageIceCandidate = /** @class */ (function () {
    /**
     * @param candidate - RTC Ice Candidate
     */
    function MessageIceCandidate(candidate) {
        this.type = MessageSendTypes.ICE_CANDIDATE;
        this.candidate = candidate;
    }
    /**
     * Turns the wrapper into a JSON String
     * @returns - JSON String of the Message to send
     */
    MessageIceCandidate.prototype.payload = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Sending => \n" + JSON.stringify(this, undefined, 4), 6);
        return JSON.stringify(this);
    };
    return MessageIceCandidate;
}());



/***/ }),

/***/ "./src/WebSockets/WebSocketController.ts":
/*!***********************************************!*\
  !*** ./src/WebSockets/WebSocketController.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebSocketController": () => (/* binding */ WebSocketController)
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _MessageReceive__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MessageReceive */ "./src/WebSockets/MessageReceive.ts");
/* harmony import */ var _MessageSend__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MessageSend */ "./src/WebSockets/MessageSend.ts");



/**
 * The controller for the WebSocket and all associated methods
 */
var WebSocketController = /** @class */ (function () {
    /**
     * @param Address - The Address of the signaling server
     */
    function WebSocketController(Address) {
        this.WS_OPEN_STATE = 1;
        this.address = Address;
    }
    /**
     * Connect to the signaling server
     * @returns - If there is a connection
     */
    WebSocketController.prototype.connect = function () {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), this.address, 6);
        try {
            this.webSocket = new WebSocket(this.address);
            this.webSocket.onopen = function (event) { return _this.handleOnOpen(event); };
            this.webSocket.onerror = function (event) { return _this.handleOnError(event); };
            this.webSocket.onclose = function (event) { return _this.handleOnClose(event); };
            this.webSocket.onmessage = function (event) { return _this.handleOnMessage(event); };
            this.webSocket.onmessagebinary = function (event) { return _this.handelOnMessageBinary(event); };
            return true;
        }
        catch (error) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(error, error);
            return false;
        }
    };
    /**
     * Handles what happens when a message is received in binary form
     * @param event - Message Received
     */
    WebSocketController.prototype.handelOnMessageBinary = function (event) {
        var _this = this;
        // if the event is empty return
        if (!event || !event.data) {
            return;
        }
        // handel the binary and then handel the message
        event.data.text().then(function (messageString) {
            // build a new message
            var constructedMessage = new MessageEvent('messageFromBinary', {
                data: messageString
            });
            // send the new stringified event back into `onmessage`
            _this.handelOnMessageBinary(constructedMessage);
        }).catch(function (error) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Failed to parse binary blob from websocket, reason: " + error);
        });
    };
    /**
     * Handles what happens when a message is received
     * @param event - Message Received
     */
    WebSocketController.prototype.handleOnMessage = function (event) {
        // Check if websocket message is binary, if so, stringify it.
        if (event.data && event.data instanceof Blob) {
            this.handelOnMessageBinary(event);
            return;
        }
        var message = JSON.parse(event.data);
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "received => \n" + JSON.stringify(JSON.parse(event.data), undefined, 4), 6);
        switch (message.type) {
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.PING: {
                // send our pong payload back to the signalling server
                var payload = new _MessageSend__WEBPACK_IMPORTED_MODULE_2__.MessagePong(new Date().getTime()).payload();
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.PING + ": " + payload, 6);
                this.webSocket.send(payload);
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.AUTHENTICATION_REQUIRED: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "AUTHENTICATION_REQUIRED", 6);
                var authenticationRequired = JSON.parse(event.data);
                var url_string = window.location.href;
                var url = new URL(url_string);
                var authRequest = new _MessageSend__WEBPACK_IMPORTED_MODULE_2__.MessageAuthRequest(url.searchParams.get("code"), url.searchParams.get("provider"));
                this.webSocket.send(authRequest.payload());
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.AUTHENTICATION_RESPONSE: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "AUTHENTICATION_RESPONSE", 6);
                var authenticationResponse = JSON.parse(event.data);
                this.onAuthenticationResponse(authenticationResponse);
                switch (authenticationResponse.outcome) {
                    case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageAuthResponseOutcomeType.REDIRECT: {
                        window.location.href = authenticationResponse.redirect;
                        break;
                    }
                    case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageAuthResponseOutcomeType.AUTHENTICATED: {
                        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "User is authenticated and now requesting an instance", 6);
                        this.webSocket.send(new _MessageSend__WEBPACK_IMPORTED_MODULE_2__.MessageRequestInstance().payload());
                        break;
                    }
                    case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageAuthResponseOutcomeType.INVALID_TOKEN: {
                        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Authentication error : Invalid Token");
                        break;
                    }
                    case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageAuthResponseOutcomeType.ERROR: {
                        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Authentication Error from server Check what you are sending");
                        break;
                    }
                    default: {
                        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "The Outcome Message has not been handled : this is really bad");
                        break;
                    }
                }
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.INSTANCE_STATE: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "INSTANCE_STATE", 6);
                var instanceState = JSON.parse(event.data);
                this.onInstanceStateChange(instanceState);
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.CONFIG: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "CONFIG", 6);
                var config = JSON.parse(event.data);
                this.onConfig(config);
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.PLAYER_COUNT: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "PLAYER_COUNT", 6);
                var playerCount = JSON.parse(event.data);
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Player Count: " + (playerCount.count - 1), 6);
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.ANSWER: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "ANSWER", 6);
                var answer = JSON.parse(event.data);
                this.onWebRtcAnswer(answer);
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.ICE_CANDIDATE: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "ICE_CANDIDATE", 6);
                var iceCandidate = JSON.parse(event.data);
                this.onIceCandidate(iceCandidate.candidate);
                break;
            }
            default: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Error Message type not Defined");
                break;
            }
        }
    };
    /**
     * Handles when the Websocket is opened
     * @param event - Not Used
     */
    WebSocketController.prototype.handleOnOpen = function (event) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Connected to the signalling server via WebSocket", 6);
    };
    /**
     * Handles when there is an error on the websocket
     * @param event - Error Payload
     */
    WebSocketController.prototype.handleOnError = function (event) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'WebSocket error: ');
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), event.toString());
    };
    /**
     * Handles when the Websocket is closed
     * @param event - Close Event
     */
    WebSocketController.prototype.handleOnClose = function (event) {
        this.onWebSocketOncloseOverlayMessage(event);
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Disconnected to the signalling server via WebSocket: " + JSON.stringify(event.code) + " - " + event.reason);
        this.stopAfkWarningTimer();
    };
    /**
     * An override for stopping the afk warning timer
     */
    WebSocketController.prototype.stopAfkWarningTimer = function () { };
    WebSocketController.prototype.sendWebRtcOffer = function (offer) {
        var payload = new _MessageSend__WEBPACK_IMPORTED_MODULE_2__.MessageWebRTCOffer(offer);
        this.webSocket.send(payload.payload());
    };
    /**
     * Sends an RTC Ice Candidate to the Server
     * @param candidate - RTC Ice Candidate
     */
    WebSocketController.prototype.sendIceCandidate = function (candidate) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Sending Ice Candidate");
        if (this.webSocket && this.webSocket.readyState === this.WS_OPEN_STATE) {
            //ws.send(JSON.stringify({ type: 'iceCandidate', candidate: candidate }));
            var IceCandidate = new _MessageSend__WEBPACK_IMPORTED_MODULE_2__.MessageIceCandidate(candidate);
            this.webSocket.send(IceCandidate.payload());
        }
    };
    /**
     * Closes the Websocket connection
     */
    WebSocketController.prototype.close = function () {
        this.webSocket.close();
    };
    /**
     * Sends the Aggregated Stats to the signaling server
     * @param stats - Stats Payload
     */
    WebSocketController.prototype.sendStats = function (stats) {
        var data = new _MessageSend__WEBPACK_IMPORTED_MODULE_2__.MessageStats(stats);
        this.webSocket.send(data.payload());
    };
    /** Event used for Displaying websocket closed messages */
    WebSocketController.prototype.onWebSocketOncloseOverlayMessage = function (event) { };
    /**
     * The Message Contains the payload of the peer connection options used for the RTC Peer hand shake
     * @param messageConfig - Config Message received from he signaling server
     */
    WebSocketController.prototype.onConfig = function (messageConfig) { };
    /**
     * @param iceCandidate - Ice Candidate sent from the Signaling server server's RTC hand shake
     */
    WebSocketController.prototype.onIceCandidate = function (iceCandidate) { };
    /**
     * Event is fired when the websocket receives the answer for the RTC peer Connection
     * @param messageAnswer - The RTC Answer payload from the signaling server
     */
    WebSocketController.prototype.onWebRtcAnswer = function (messageAnswer) { };
    /**
     * Event fired with the websocket receives a instance state
     * @param instanceState - UE Instance State
     */
    WebSocketController.prototype.onInstanceStateChange = function (instanceState) { };
    /**
     * Event fired with the websocket receives a Authentication Response
     * @param authResponse - Authentication Response
     */
    WebSocketController.prototype.onAuthenticationResponse = function (authResponse) { };
    return WebSocketController;
}());

/* 524f4d4d */ 


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AfkLogic": () => (/* reexport safe */ _Afk_AfkLogic__WEBPACK_IMPORTED_MODULE_3__.AfkLogic),
/* harmony export */   "AggregatedStats": () => (/* reexport safe */ _PeerConnectionController_AggregatedStats__WEBPACK_IMPORTED_MODULE_6__.AggregatedStats),
/* harmony export */   "Config": () => (/* reexport safe */ _Config_Config__WEBPACK_IMPORTED_MODULE_1__.Config),
/* harmony export */   "ControlSchemeType": () => (/* reexport safe */ _Config_Config__WEBPACK_IMPORTED_MODULE_1__.ControlSchemeType),
/* harmony export */   "DelegateBase": () => (/* reexport safe */ _Delegate_DelegateBase__WEBPACK_IMPORTED_MODULE_2__.DelegateBase),
/* harmony export */   "Encoder": () => (/* reexport safe */ _DataChannel_InitialSettings__WEBPACK_IMPORTED_MODULE_5__.Encoder),
/* harmony export */   "InitialSettings": () => (/* reexport safe */ _DataChannel_InitialSettings__WEBPACK_IMPORTED_MODULE_5__.InitialSettings),
/* harmony export */   "InstanceState": () => (/* reexport safe */ _WebSockets_MessageReceive__WEBPACK_IMPORTED_MODULE_7__.InstanceState),
/* harmony export */   "LatencyTestResults": () => (/* reexport safe */ _DataChannel_LatencyTestResults__WEBPACK_IMPORTED_MODULE_4__.LatencyTestResults),
/* harmony export */   "Logger": () => (/* reexport safe */ _Logger_Logger__WEBPACK_IMPORTED_MODULE_8__.Logger),
/* harmony export */   "MessageAuthResponse": () => (/* reexport safe */ _WebSockets_MessageReceive__WEBPACK_IMPORTED_MODULE_7__.MessageAuthResponse),
/* harmony export */   "MessageAuthResponseOutcomeType": () => (/* reexport safe */ _WebSockets_MessageReceive__WEBPACK_IMPORTED_MODULE_7__.MessageAuthResponseOutcomeType),
/* harmony export */   "MessageInstanceState": () => (/* reexport safe */ _WebSockets_MessageReceive__WEBPACK_IMPORTED_MODULE_7__.MessageInstanceState),
/* harmony export */   "WebRTC": () => (/* reexport safe */ _DataChannel_InitialSettings__WEBPACK_IMPORTED_MODULE_5__.WebRTC),
/* harmony export */   "version": () => (/* binding */ version),
/* harmony export */   "webRtcPlayerController": () => (/* reexport safe */ _WebRtcPlayer_WebRtcPlayerController__WEBPACK_IMPORTED_MODULE_0__.webRtcPlayerController)
/* harmony export */ });
/* harmony import */ var _WebRtcPlayer_WebRtcPlayerController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WebRtcPlayer/WebRtcPlayerController */ "./src/WebRtcPlayer/WebRtcPlayerController.ts");
/* harmony import */ var _Config_Config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Config/Config */ "./src/Config/Config.ts");
/* harmony import */ var _Delegate_DelegateBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Delegate/DelegateBase */ "./src/Delegate/DelegateBase.ts");
/* harmony import */ var _Afk_AfkLogic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Afk/AfkLogic */ "./src/Afk/AfkLogic.ts");
/* harmony import */ var _DataChannel_LatencyTestResults__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./DataChannel/LatencyTestResults */ "./src/DataChannel/LatencyTestResults.ts");
/* harmony import */ var _DataChannel_InitialSettings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DataChannel/InitialSettings */ "./src/DataChannel/InitialSettings.ts");
/* harmony import */ var _PeerConnectionController_AggregatedStats__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PeerConnectionController/AggregatedStats */ "./src/PeerConnectionController/AggregatedStats.ts");
/* harmony import */ var _WebSockets_MessageReceive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./WebSockets/MessageReceive */ "./src/WebSockets/MessageReceive.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Logger/Logger */ "./src/Logger/Logger.ts");









var version = "0.1.4";

})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9BZmsvQWZrTG9naWMudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvQ29uZmlnL0NvbmZpZy50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvRGF0YUNoYW5uZWwvSW5pdGlhbFNldHRpbmdzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL0RhdGFDaGFubmVsL0xhdGVuY3lUZXN0UmVzdWx0cy50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9EZWxlZ2F0ZS9EZWxlZ2F0ZUJhc2UudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvRnJlZXplRnJhbWUvRnJlZXplRnJhbWUudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvRnJlZXplRnJhbWUvRnJlZXplRnJhbWVDb250cm9sbGVyLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL0lucHV0cy9GYWtlVG91Y2hDb250cm9sbGVyLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL0lucHV0cy9HYW1lcGFkQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9JbnB1dHMvR3lyb0NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvSW5wdXRzL0lucHV0Q29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9JbnB1dHMvS2V5Ym9hcmRDb250cm9sbGVyLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL0lucHV0cy9Nb3VzZUJ1dHRvbnMudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvSW5wdXRzL01vdXNlQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9JbnB1dHMvU3BlY2lhbEtleUNvZGVzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL0lucHV0cy9Ub3VjaENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvTG9nZ2VyL0xvZ2dlci50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9NaWNQbGF5ZXIvTWljQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvQWdncmVnYXRlZFN0YXRzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1BlZXJDb25uZWN0aW9uQ29udHJvbGxlci9DYW5kaWRhdGVQYWlyU3RhdHMudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL0NhbmRpZGF0ZVN0YXQudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL0RhdGFDaGFubmVsU3RhdHMudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL0luYm91bmRBdWRpb1N0YXRzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1BlZXJDb25uZWN0aW9uQ29udHJvbGxlci9JbmJvdW5kVmlkZW9TdGF0cy50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvT3V0Qm91bmRWaWRlb1N0YXRzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1BlZXJDb25uZWN0aW9uQ29udHJvbGxlci9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL1N0cmVhbVN0YXRzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1VlSW5zdGFuY2VNZXNzYWdlL1VlQ29udHJvbE1lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvVWVJbnN0YW5jZU1lc3NhZ2UvVWVEYXRhTWVzc2FnZS50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9VZUluc3RhbmNlTWVzc2FnZS9VZURlc2NyaXB0b3IudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvVWVJbnN0YW5jZU1lc3NhZ2UvVWVEZXNjcmlwdG9yVWkudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvVWVJbnN0YW5jZU1lc3NhZ2UvVWVJbnB1dEdhbWVQYWRNZXNzYWdlLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1VlSW5zdGFuY2VNZXNzYWdlL1VlSW5wdXRLZXlib2FyZE1lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvVWVJbnN0YW5jZU1lc3NhZ2UvVWVJbnB1dE1vdXNlTWVzc2FnZS50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9VZUluc3RhbmNlTWVzc2FnZS9VZUlucHV0VG91Y2hNZXNzYWdlLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1VlSW5zdGFuY2VNZXNzYWdlL1VlTWVzc2FnZVR5cGVzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1VpL1VpQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9WaWRlb1BsYXllci9TdHJlYW1Db250cm9sbGVyLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1ZpZGVvUGxheWVyL1ZpZGVvUGxheWVyLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1ZpZGVvUGxheWVyL1ZpZGVvUGxheWVyTW91c2VIb3ZlckV2ZW50cy50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9WaWRlb1BsYXllci9WaWRlb1BsYXllck1vdXNlTG9ja2VkRXZlbnRzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1dlYlJ0Y1BsYXllci9XZWJSdGNQbGF5ZXJDb250cm9sbGVyLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1dlYlNvY2tldHMvTWVzc2FnZVJlY2VpdmUudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvV2ViU29ja2V0cy9NZXNzYWdlU2VuZC50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9XZWJTb2NrZXRzL1dlYlNvY2tldENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJsaWJzcHNmcm9udGVuZFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJsaWJzcHNmcm9udGVuZFwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsImltcG9ydCB7IENvbnRyb2xTY2hlbWVUeXBlIH0gZnJvbSBcIi4uL0NvbmZpZy9Db25maWdcIjtcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuZXhwb3J0IGNsYXNzIEFma0xvZ2ljIHtcclxuICAgIC8vIHRpbWUgb3V0IGxvZ2ljIGRldGFpbHMgXHJcbiAgICBjb250cm9sU2NoZW1lOiBudW1iZXI7XHJcbiAgICB3YXJuVGltZW91dCA9IDA7XHJcbiAgICBjbG9zZVRpbWVvdXQgPSAxMDtcclxuICAgIGFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgd2FyblRpbWVyOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiA9IHVuZGVmaW5lZDtcclxuICAgIGNvdW50RG93biA9IDA7XHJcbiAgICBjb3VudERvd25UaW1lcjogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0SW50ZXJ2YWw+ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRyb2xTY2hlbWU6IG51bWJlciwgYWZrVGltZW91dDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy53YXJuVGltZW91dCA9IGFma1RpbWVvdXQ7XHJcbiAgICAgICAgdGhpcy5jb250cm9sU2NoZW1lID0gY29udHJvbFNjaGVtZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtZXRob2RzIHRoYXQgb2NjdXIgd2hlbiBhbiBhZmsgZXZlbnQgbGlzdGVuZXIgaXMgY2xpY2tlZFxyXG4gICAgICovXHJcbiAgICBvbkFma0NsaWNrKCkge1xyXG4gICAgICAgIHRoaXMuaGlkZUN1cnJlbnRPdmVybGF5KCk7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNvdW50RG93blRpbWVyKTtcclxuICAgICAgICB0aGlzLnN0YXJ0QWZrV2FybmluZ1RpbWVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydCB0aGUgd2FybmluZyB0aW1lciBpZiBhIHRpbWVvdXQgaXMgc2V0IGdyZWF0ZXIgdGhhdCAwIHNlY29uZHMgICBcclxuICAgICAqL1xyXG4gICAgc3RhcnRBZmtXYXJuaW5nVGltZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2FyblRpbWVvdXQgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0QWZrV2FybmluZ1RpbWVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wIHRoZSBhZmsgd2FybmluZyB0aW1lclxyXG4gICAgICovXHJcbiAgICBzdG9wQWZrV2FybmluZ1RpbWVyKCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLndhcm5UaW1lcik7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNvdW50RG93blRpbWVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBhdXNlIHRoZSB0aW1lciB3aGljaCB3aGVuIGVsYXBzZWQgd2lsbCB3YXJuIHRoZSB1c2VyIHRoZXkgYXJlIGluYWN0aXZlLiAgXHJcbiAgICAgKi9cclxuICAgIHBhdXNlQWZrV2FybmluZ1RpbWVyKCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGUgdXNlciBpbnRlcmFjdHMgdGhlbiByZXNldCB0aGUgd2FybmluZyB0aW1lci4gIFxyXG4gICAgICovXHJcbiAgICByZXNldEFma1dhcm5pbmdUaW1lcigpIHtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMud2FyblRpbWVyKTtcclxuICAgICAgICAgICAgdGhpcy53YXJuVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuYWN0aXZhdGVBZmtFdmVudCgpLCB0aGlzLndhcm5UaW1lb3V0ICogMTAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyB0aGUgQUZLIG92ZXJsYXkgYW5kIGJlZ2luIHRoZSBjb3VudERvd24gICBcclxuICAgICAqL1xyXG4gICAgYWN0aXZhdGVBZmtFdmVudCgpIHtcclxuICAgICAgICAvLyBQYXVzZSB0aGUgdGltZXIgd2hpbGUgdGhlIHVzZXIgaXMgbG9va2luZyBhdCB0aGUgaW5hY3Rpdml0eSB3YXJuaW5nIG92ZXJsYXlcclxuICAgICAgICB0aGlzLnBhdXNlQWZrV2FybmluZ1RpbWVyKCk7XHJcblxyXG4gICAgICAgIC8vIGluc3RhbnRpYXRlIGEgbmV3IG92ZXJsYXkgXHJcbiAgICAgICAgdGhpcy5zaG93QWZrT3ZlcmxheSgpO1xyXG5cclxuICAgICAgICAvLyB1cGRhdGUgb3VyIGNvdW50RG93biB0aW1lciBhbmQgb3ZlcmxheSBjb250ZW50c1xyXG4gICAgICAgIHRoaXMuY291bnREb3duID0gdGhpcy5jbG9zZVRpbWVvdXQ7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBZmtDb3VudGRvd24oKTtcclxuXHJcbiAgICAgICAgLy8gaWYgd2UgYXJlIGluIGxvY2tlZCBtb3VzZSBleGl0IHBvaW50ZXJsb2NrIFxyXG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2xTY2hlbWUgPT0gQ29udHJvbFNjaGVtZVR5cGUuTG9ja2VkTW91c2UpIHtcclxuICAgICAgICAgICAgLy8gbWlub3IgaGFjayB0byBhbGxldmlhdGUgaW9zIG5vdCBzdXBwb3J0aW5nIHBvaW50ZXJsb2NrXHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5leGl0UG9pbnRlckxvY2spIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRQb2ludGVyTG9jaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyByZXNldCBvdXIgY291bnREb3duIGludGVydmFsIGFjY29yZGluZ2x5IFxyXG4gICAgICAgIHRoaXMuY291bnREb3duVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY291bnREb3duLS07XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50RG93biA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgdXNlciBmYWlsZWQgdG8gY2xpY2sgc28gaGlkZSB0aGUgb3ZlcmxheSBhbmQgZGlzY29ubmVjdCB0aGVtLlxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZShcIllvdSBoYXZlIGJlZW4gZGlzY29ubmVjdGVkIGR1ZSB0byBpbmFjdGl2aXR5XCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVdlYlNvY2tldCgpO1xyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIllvdSBoYXZlIGJlZW4gZGlzY29ubmVjdGVkIGR1ZSB0byBpbmFjdGl2aXR5XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHN3aXRjaCBvZmYgdGhlIGFmayBmZWF0dXJlIGFzIHN0cmVhbSBoYXMgY2xvc2VkIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wQWZrV2FybmluZ1RpbWVyKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGNvdW50RG93biBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBZmtDb3VudGRvd24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW4gb3ZlcnJpZGUgbWV0aG9kIGZvciB1cGRhdGluZyB0aGUgYWZrIGNvdW50ZG93biBudW1iZXIgaW4gdGhlIG92ZXJsYXkgXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUFma0NvdW50ZG93bigpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW4gb3ZlcnJpZGUgbWV0aG9kIGZvciBzaG93aW5nIHRoZSBhZmsgb3ZlcmxheSBcclxuICAgICAqL1xyXG4gICAgc2hvd0Fma092ZXJsYXkoKSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFuIG92ZXJyaWRlIG1ldGhvZCBmb3IgaGlkaW5nIHRoZSBhZmsgb3ZlcmxheSBcclxuICAgICAqL1xyXG4gICAgaGlkZUN1cnJlbnRPdmVybGF5KCkgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiAgb3ZlcnJpZGUgbWV0aG9kIGZvciBzZXR0aW5nIHRoZSBvdmVycmlkZSBmb3IgdGhlIGRpc2Nvbm5lY3QgbWVzc2FnZVxyXG4gICAgICovXHJcbiAgICBzZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKG1lc3NhZ2U6IHN0cmluZykgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvdmVycmlkZSBtZXRob2QgZm9yIGNsb3NpbmcgdGhlIHdlYnNvY2tldCBjb25uZWN0aW9uIGZyb20gdGhlIGNsaWVudHMgc2lkZVxyXG4gICAgICovXHJcbiAgICBjbG9zZVdlYlNvY2tldCgpIHsgfVxyXG59IiwiZXhwb3J0IGNsYXNzIENvbmZpZyB7XHJcblxyXG5cdC8vIFBSRVNFVCBPUFRJT05TXHJcblx0Ly8gZW5hYmxlIHRoZSBhdXRvIGNvbm5lY3Qgb2YgdGhlIHdlYnNvY2tldCBcclxuXHRlbmFibGVTcHNBdXRvQ29ubmVjdCA9IGZhbHNlO1xyXG5cclxuXHQvLyBlbmFibGUgdGhlIGF1dG9wbGF5IG9mIHRoZSB2aWRlbyBpZiBlbmFibGVkIGJ5IGJyb3dzZXJcclxuXHRlbmFibGVTcHNBdXRvcGxheSA9IGZhbHNlO1xyXG5cclxuXHQvLyBzdGFydCB0aGUgdmlkZW8gbXV0ZWRcclxuXHRzdGFydFZpZGVvTXV0ZWQgPSBmYWxzZTtcclxuXHJcblx0Ly8gc2V0IHRoZSBhbW91bnQgb2Ygd2FpdCB0aW1lIGluIHNlY29uZHMgd2hpbGUgdGhlcmUgaXMgaW5hY3Rpdml0eSBmb3IgYWZrIHRvIG9jY3VyIFxyXG5cdGFma1RpbWVvdXQ6IG51bWJlciA9IDEyMDtcclxuXHJcblx0Ly8gVGhlIGNvbnRyb2wgc2NoZW1lIGNvbnRyb2xzIHRoZSBiZWhhdmlvdXIgb2YgdGhlIG1vdXNlIHdoZW4gaXQgaW50ZXJhY3RzIHdpdGggdGhlIFdlYlJUQyBwbGF5ZXIuXHJcblx0Y29udHJvbFNjaGVtZSA9IENvbnRyb2xTY2hlbWVUeXBlLkxvY2tlZE1vdXNlO1xyXG5cclxuXHQvLyBCcm93c2VyIGtleXMgYXJlIHRob3NlIHdoaWNoIGFyZSB0eXBpY2FsbHkgdXNlZCBieSB0aGUgYnJvd3NlciBVSS4gV2UgdXN1YWxseSB3YW50IHRvIHN1cHByZXNzIHRoZXNlIHRvIGFsbG93LCBmb3IgZXhhbXBsZSwgVUU0IHRvIHNob3cgc2hhZGVyIGNvbXBsZXhpdHkgd2l0aCB0aGUgRjUga2V5IHdpdGhvdXQgdGhlIHdlYiBwYWdlIHJlZnJlc2hpbmcuXHJcblx0c3VwcHJlc3NCcm93c2VyS2V5cyA9IHRydWU7XHJcblxyXG5cdC8vIFVFNCBoYXMgYSBmYWtlIHRvdWNoZXMgb3B0aW9uIHdoaWNoIGZha2VzIGEgc2luZ2xlIGZpbmdlciB0b3VjaCB3aGVuIHRoZSB1c2VyIGRyYWdzIHdpdGggdGhlaXIgbW91c2UuIFxyXG5cdC8vIFdlIG1heSBwZXJmb3JtIHRoZSByZXZlcnNlOyBhIHNpbmdsZSBmaW5nZXIgdG91Y2ggbWF5IGJlIGNvbnZlcnRlZCBpbnRvIGEgbW91c2UgZHJhZyBVRTQgc2lkZS4gVGhpcyBhbGxvd3MgYSBub24tdG91Y2ggYXBwbGljYXRpb24gdG8gYmUgY29udHJvbGxlZCBwYXJ0aWFsbHkgdmlhIGEgdG91Y2ggZGV2aWNlLlxyXG5cdGZha2VNb3VzZVdpdGhUb3VjaGVzID0gZmFsc2U7XHJcblxyXG5cdC8vY29tcHVsc29yeSBvcHRpb25zIGFuZCBET01zIFxyXG5cdHNpZ25hbGxpbmdTZXJ2ZXJBZGRyZXNzOiBzdHJpbmc7XHJcblx0cGxheWVyRWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG5cdC8vdGhpcyBpcyBhIHZpZGVvIGVsZW1lbnQgdmFyaWFibGUgdG8gYmUgYXNzaWduZWQgd2hlbiB0aGUgdmlkZW8gZWxlbWVudCBpcyBjcmVhdGVkXHJcblx0dmlkZW9QbGF5ZXJFbGVtZW50OiBIVE1MVmlkZW9FbGVtZW50O1xyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0gc2lnbmFsbGluZ1NlcnZlckFkZHJlc3MgLSB0aGUgYWRkcmVzcyBvZiB0aGUgc2lnbmFsaW5nIHNlcnZlciBcclxuXHQgKiBAcGFyYW0gcGxheWVyRWxlbWVudCAtIHRoZSBwbGF5ZXIgZWxlbWVudCBJRCBcclxuXHQgKi9cclxuXHRjb25zdHJ1Y3RvcihzaWduYWxsaW5nU2VydmVyQWRkcmVzczogc3RyaW5nLCBwbGF5ZXJFbGVtZW50OiBIVE1MRGl2RWxlbWVudCkge1xyXG5cdFx0dGhpcy5zaWduYWxsaW5nU2VydmVyQWRkcmVzcyA9IHNpZ25hbGxpbmdTZXJ2ZXJBZGRyZXNzO1xyXG5cdFx0dGhpcy5wbGF5ZXJFbGVtZW50ID0gcGxheWVyRWxlbWVudDtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgZW51bSBhc3NvY2lhdGVkIHdpdGggdGhlIG1vdXNlIGJlaW5nIGxvY2tlZCBvciBob3ZlcmluZyBcclxuICovXHJcbmV4cG9ydCBlbnVtIENvbnRyb2xTY2hlbWVUeXBlIHtcclxuXHRMb2NrZWRNb3VzZSA9IDAsXHJcblx0SG92ZXJpbmdNb3VzZSA9IDEsXHJcbn1cclxuIiwiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuaW1wb3J0IHsgRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUgYXMgRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9EYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZVwiO1xyXG5pbXBvcnQgeyBJSW5pdGlhbFNldHRpbmdzLCB9IGZyb20gXCIuL0lJbml0aWFsU2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgSW5pdGlhbFNldHRpbmdzLCB9IGZyb20gXCIuL0luaXRpYWxTZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBJTGF0ZW5jeVRlc3RSZXN1bHRzIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0lMYXRlbmN5VGVzdFJlc3VsdHNcIlxyXG5pbXBvcnQgeyBMYXRlbmN5VGVzdFJlc3VsdHMgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvTGF0ZW5jeVRlc3RSZXN1bHRzXCJcclxuXHJcblxyXG4vKipcclxuICogSGFuZGxlcyB0aGUgU2VuZGluZyBhbmQgUmVjZWl2aW5nIG9mIG1lc3NhZ2VzIHRvIHRoZSBVRSBJbnN0YW5jZSB2aWEgdGhlIERhdGEgQ2hhbm5lbFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERhdGFDaGFubmVsQ29udHJvbGxlciB7XHJcbiAgICBkYXRhQ2hhbm5lbDogUlRDRGF0YUNoYW5uZWw7XHJcbiAgICBwZWVyQ29ubmVjdGlvbjogUlRDUGVlckNvbm5lY3Rpb247XHJcbiAgICBkYXRhY2hhbm5lbE9wdGlvbnM6IFJUQ0RhdGFDaGFubmVsSW5pdDtcclxuICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICBpc1JlY2VpdmluZ0ZyZWV6ZUZyYW1lID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUbyBDcmVhdGUgYW5kIFNldCB1cCBhIERhdGEgQ2hhbm5lbFxyXG4gICAgICogQHBhcmFtIHBlZXJDb25uZWN0aW9uIC0gVGhlIFJUQyBQZWVyIENvbm5lY3Rpb25cclxuICAgICAqIEBwYXJhbSBsYWJlbCAtIExhYmVsIG9mIHRoZSBEYXRhIENoYW5uZWxcclxuICAgICAqIEBwYXJhbSBkYXRhY2hhbm5lbE9wdGlvbnMgLSBPcHRpb25hbCBSVEMgRGF0YUNoYW5uZWwgb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBjcmVhdGVEYXRhQ2hhbm5lbChwZWVyQ29ubmVjdGlvbjogUlRDUGVlckNvbm5lY3Rpb24sIGxhYmVsOiBzdHJpbmcsIGRhdGFjaGFubmVsT3B0aW9ucz86IFJUQ0RhdGFDaGFubmVsSW5pdCkge1xyXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24gPSBwZWVyQ29ubmVjdGlvbjtcclxuICAgICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgdGhpcy5kYXRhY2hhbm5lbE9wdGlvbnMgPSBkYXRhY2hhbm5lbE9wdGlvbnM7XHJcbiAgICAgICAgaWYgKGRhdGFjaGFubmVsT3B0aW9ucyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YWNoYW5uZWxPcHRpb25zID0ge30gYXMgUlRDRGF0YUNoYW5uZWxJbml0XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YWNoYW5uZWxPcHRpb25zLm9yZGVyZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbCA9IHRoaXMucGVlckNvbm5lY3Rpb24uY3JlYXRlRGF0YUNoYW5uZWwodGhpcy5sYWJlbCwgdGhpcy5kYXRhY2hhbm5lbE9wdGlvbnMpO1xyXG4gICAgICAgIC8vV2UgV2FudCBhbiBBcnJheSBCdWZmZXIgbm90IGEgYmxvYlxyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWwuYmluYXJ5VHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcclxuICAgICAgICB0aGlzLmRhdGFDaGFubmVsLm9ub3BlbiA9ICgpID0+IHRoaXMuaGFuZGxlT25PcGVuKCk7XHJcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5vbmNsb3NlID0gKCkgPT4gdGhpcy5oYW5kbGVPbkNsb3NlKCk7XHJcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5vbm1lc3NhZ2UgPSAoZXY6IE1lc3NhZ2VFdmVudDxhbnk+KSA9PiB0aGlzLmhhbmRsZU9uTWVzc2FnZShldik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHdoZW4gdGhlIERhdGEgQ2hhbm5lbCBpcyBvcGVuZWRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25PcGVuKCkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJEYXRhIENoYW5uZWw6IFwiICsgdGhpcy5sYWJlbCArIFwiIGlzIG9wZW5lZC5cIiwgNyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHdoZW4gdGhlIERhdGEgQ2hhbm5lbCBpcyBjbG9zZWRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25DbG9zZSgpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiRGF0YSBDaGFubmVsOiBcIiArIHRoaXMubGFiZWwgKyBcIiBpcyBjbG9zZWQuXCIsIDcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGVuIGEgbWVzc2FnZSBpcyByZWNlaXZlZCBcclxuICAgICAqIEBwYXJhbSBldmVudCAtIE1lc3NhZ2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25NZXNzYWdlKGV2ZW50OiBNZXNzYWdlRXZlbnQpIHtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IG5ldyBVaW50OEFycmF5KGV2ZW50LmRhdGEpO1xyXG5cclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiTWVzc2FnZSBpbmNvbWluZ1wiLCA2KTtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiTWVzc2FnZTpcIiArIG1lc3NhZ2UsIDYpO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKG1lc3NhZ2VbMF0pIHtcclxuICAgICAgICAgICAgY2FzZSBEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5RdWFsaXR5Q29udHJvbE93bmVyc2hpcDoge1xyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLlF1YWxpdHlDb250cm9sT3duZXJzaGlwXCIsIDYpO1xyXG4gICAgICAgICAgICAgICAgbGV0IFF1YWxpdHlPd25lcnNoaXAgPSBuZXcgQm9vbGVhbihtZXNzYWdlWzFdKS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uUXVhbGl0eUNvbnRyb2xPd25lcnNoaXAoUXVhbGl0eU93bmVyc2hpcCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLlJlc3BvbnNlOiB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUuUmVzcG9uc2VcIiwgNik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uUmVzcG9uc2UobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkNvbW1hbmQ6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5Db21tYW5kXCIsIDYpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNvbW1hbmQobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkZyZWV6ZUZyYW1lOiB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUuRnJlZXplRnJhbWVcIiwgNik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NGcmVlemVGcmFtZU1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLlVuZnJlZXplRnJhbWU6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5GcmVlemVGcmFtZVwiLCA2KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNSZWNlaXZpbmdGcmVlemVGcmFtZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblVuRnJlZXplRnJhbWUoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUuVmlkZW9FbmNvZGVyQXZnUVA6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5WaWRlb0VuY29kZXJBdmdRUFwiLCA2KTtcclxuICAgICAgICAgICAgICAgIGxldCBBdmdRUCA9IE51bWJlcihuZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKG1lc3NhZ2Uuc2xpY2UoMSkpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25WaWRlb0VuY29kZXJBdmdRUChBdmdRUCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLmxhdGVuY3lUZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUubGF0ZW5jeVRlc3RcIiwgNik7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGF0ZW5jeUFzU3RyaW5nID0gbmV3IFRleHREZWNvZGVyKFwidXRmLTE2XCIpLmRlY29kZShtZXNzYWdlLnNsaWNlKDEpKTtcclxuICAgICAgICAgICAgICAgIGxldCBpTGF0ZW5jeVRlc3RSZXN1bHRzOiBJTGF0ZW5jeVRlc3RSZXN1bHRzID0gSlNPTi5wYXJzZShsYXRlbmN5QXNTdHJpbmcpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxhdGVuY3lUZXN0UmVzdWx0czogTGF0ZW5jeVRlc3RSZXN1bHRzID0gbmV3IExhdGVuY3lUZXN0UmVzdWx0cygpO1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihsYXRlbmN5VGVzdFJlc3VsdHMsIGlMYXRlbmN5VGVzdFJlc3VsdHMpO1xyXG4gICAgICAgICAgICAgICAgbGF0ZW5jeVRlc3RSZXN1bHRzLnByb2Nlc3NGaWVsZHMoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkxhdGVuY3lUZXN0UmVzdWx0KGxhdGVuY3lUZXN0UmVzdWx0cyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkluaXRpYWxTZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkluaXRpYWxTZXR0aW5nc1wiLCA2KTtcclxuICAgICAgICAgICAgICAgIGxldCBwYXlsb2FkQXNTdHJpbmcgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKG1lc3NhZ2Uuc2xpY2UoMSkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlJbml0aWFsU2V0dGluZ3M6IElJbml0aWFsU2V0dGluZ3MgPSBKU09OLnBhcnNlKHBheWxvYWRBc1N0cmluZyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5pdGlhbFNldHRpbmdzOiBJbml0aWFsU2V0dGluZ3MgPSBuZXcgSW5pdGlhbFNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGluaXRpYWxTZXR0aW5ncywgaUluaXRpYWxTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsU2V0dGluZ3MudWVDb21wYXRpYmxlKClcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgcGF5bG9hZEFzU3RyaW5nLCA2KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuT25Jbml0aWFsU2V0dGluZ3MoaW5pdGlhbFNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgbWVzc2FnZVswXS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZWQgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKG1lc3NhZ2Uuc2xpY2UoMSkpO1xyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBkZWNvZGVkKTtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5FcnJvcihMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcInVua25vd24gbWVzc2FnZSBzZW50IG9uIHRoZSBEYXRhIGNoYW5uZWxcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpcmVkIHdoZW4gYSBSZXNwb25zZSBtZXNzYWdlIGlzIHNlbnQgZnJvbSB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gTWVzc2FnZSBEYXRhIFVpbnQ4QXJyYXlcclxuICAgICAqL1xyXG4gICAgb25SZXNwb25zZShtZXNzYWdlOiBVaW50OEFycmF5KSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLlJlc3BvbnNlXCIsIDYpO1xyXG4gICAgICAgIGxldCByZXNwb25zZXMgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKG1lc3NhZ2Uuc2xpY2UoMSkpO1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgcmVzcG9uc2VzLCA2KTtcclxuICAgICAgICAvL2FkZCB0byByZXNwb25zZSBoYW5kbGVycyBcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpcmVkIHdoZW4gYSBDb21tYW5kIG1lc3NhZ2UgaXMgc2VudCBmcm9tIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBNZXNzYWdlIERhdGEgVWludDhBcnJheVxyXG4gICAgICovXHJcbiAgICBvbkNvbW1hbmQobWVzc2FnZTogVWludDhBcnJheSkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5Db21tYW5kXCIsIDYpO1xyXG5cclxuICAgICAgICBsZXQgY29tbWFuZEFzU3RyaW5nID0gbmV3IFRleHREZWNvZGVyKFwidXRmLTE2XCIpLmRlY29kZShtZXNzYWdlLnNsaWNlKDEpKTtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiRGF0YSBDaGFubmVsIENvbW1hbmQ6IFwiICsgY29tbWFuZEFzU3RyaW5nLCA2KTtcclxuICAgICAgICBsZXQgY29tbWFuZDogSW5zdGFuY2VDb21tYW5kID0gSlNPTi5wYXJzZShjb21tYW5kQXNTdHJpbmcpO1xyXG4gICAgICAgIGlmIChjb21tYW5kLmNvbW1hbmQgPT09IFwib25TY3JlZW5LZXlib2FyZFwiKSB7XHJcbiAgICAgICAgICAgIC8vc2hvdyBvbiBzY3JlZW4gS2V5Ym9hcmQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBEYXRhIG92ZXIgdGhlIERhdGEgY2hhbm5lbCB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBkYXRhIC0gTWVzc2FnZSBEYXRhIEFycmF5IEJ1ZmZlclxyXG4gICAgICovXHJcbiAgICBzZW5kRGF0YShkYXRhOiBBcnJheUJ1ZmZlcikge1xyXG4gICAgICAgIC8vIHJlc2V0IHRoZSBhZmsgaW5hY3Rpdml0eVxyXG4gICAgICAgIHRoaXMucmVzZXRBZmtXYXJuaW5nVGltZXJPbkRhdGFTZW5kKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRhdGFDaGFubmVsICYmIHRoaXMuZGF0YUNoYW5uZWwucmVhZHlTdGF0ZSA9PSBcIm9wZW5cIikge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsLnNlbmQoZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgTG9nZ2VyLkVycm9yKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiTWVzc2FnZSBGYWlsZWQ6IFwiICsgbmV3IFVpbnQ4QXJyYXkoZGF0YSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpcmVkIHdoZW4gdGhlIFVFIEluc3RhbmNlIHVwZGF0ZXMgd2hvIGhhcyBRdWFsaXR5IE93bmVyc2hpcFxyXG4gICAgICogQHBhcmFtIGhhc1F1YWxpdHlPd25lcnNoaXAgLSBEb2VzIHRoZSBjbGllbnQgaGF2ZSBRdWFsaXR5IE93bmVyc2hpcFxyXG4gICAgICovXHJcbiAgICBvblF1YWxpdHlDb250cm9sT3duZXJzaGlwKGhhc1F1YWxpdHlPd25lcnNoaXA6IGJvb2xlYW4pIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlyZWQgd2hlbiB0aGUgVUUgSW5zdGFuY2Ugc2VuZHMgZnJlZXplIGZyYW1lIGRhdGFcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gRnJlZXplIEZyYW1lIERhdGFcclxuICAgICAqL1xyXG4gICAgcHJvY2Vzc0ZyZWV6ZUZyYW1lTWVzc2FnZShtZXNzYWdlOiBVaW50OEFycmF5KSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpcmVkIHdoZW4gdGhlIFVFIEluc3RhbmNlIHNlbmRzIGEgdW4gRnJlZXplIEZyYW1lXHJcbiAgICAgKi9cclxuICAgIG9uVW5GcmVlemVGcmFtZSgpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlyZWQgd2hlbiB0aGUgVUUgSW5zdGFuY2Ugc2VuZHMgdGhlIFZpZGVvIEVuY29kZXIgQXZnIFFQXHJcbiAgICAgKiBAcGFyYW0gQXZnUVAgLSBBdmcgUVBcclxuICAgICAqL1xyXG4gICAgb25WaWRlb0VuY29kZXJBdmdRUChBdmdRUDogbnVtYmVyKSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpcmVkIHdoZW4gdGhlIFVFIEluc3RhbmNlIHNlbmRzIExhdGVuY3kgdGVzdCBSZXN1bHRzXHJcbiAgICAgKiBAcGFyYW0gbGF0ZW5jeVRlc3RSZXN1bHRzIC0gTGF0ZW5jeSBUZXN0IFJlc3VsdHNcclxuICAgICAqL1xyXG4gICAgb25MYXRlbmN5VGVzdFJlc3VsdChsYXRlbmN5VGVzdFJlc3VsdHM6IExhdGVuY3lUZXN0UmVzdWx0cykgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBVRSBJbnN0YW5jZSBzZW5kcyBJbml0aWFsIFNldHRpbmdzXHJcbiAgICAgKiBAcGFyYW0gSW5pdGlhbFNldHRpbmdzIC0gSW5pdGlhbCBTZXR0aW5nc1xyXG4gICAgICovXHJcbiAgICBPbkluaXRpYWxTZXR0aW5ncyhJbml0aWFsU2V0dGluZ3M6IEluaXRpYWxTZXR0aW5ncykgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvdmVycmlkZSBtZXRob2QgZm9yIHJlc2V0dGluZyB0aGUgQWZrIHdhcm5pbmcgdGltZXIgd2hlbiBkYXRhIGlzIHNlbnQgb3ZlciB0aGUgZGF0YSBjaGFubmVsIFxyXG4gICAgICovXHJcbiAgICByZXNldEFma1dhcm5pbmdUaW1lck9uRGF0YVNlbmQoKSB7IH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJbnN0YW5jZUNvbW1hbmQge1xyXG4gICAgY29tbWFuZDogc3RyaW5nO1xyXG59IiwiLyoqXHJcbiAqIERhdGEgQ2hhbm5lbCBSZWNlaXZlcyBNZXNzYWdlIFR5cGVcclxuICovXHJcbmV4cG9ydCBlbnVtIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlIHtcclxuXHRRdWFsaXR5Q29udHJvbE93bmVyc2hpcCA9IDAsXHJcblx0UmVzcG9uc2UgPSAxLFxyXG5cdENvbW1hbmQgPSAyLFxyXG5cdEZyZWV6ZUZyYW1lID0gMyxcclxuXHRVbmZyZWV6ZUZyYW1lID0gNCxcclxuXHRWaWRlb0VuY29kZXJBdmdRUCA9IDUsXHJcblx0bGF0ZW5jeVRlc3QgPSA2LFxyXG5cdEluaXRpYWxTZXR0aW5ncyA9IDdcclxufSIsImltcG9ydCB7IElFbmNvZGVyLCBJSW5pdGlhbFNldHRpbmdzLCBJUGl4ZWxTdHJlYW1pbmcsIElXZWJSVEMgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvSUluaXRpYWxTZXR0aW5nc1wiXHJcblxyXG4vKipcclxuICogTGF0ZW5jeSBUZXN0IFJlc3VsdHMgRGF0YVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEluaXRpYWxTZXR0aW5ncyBpbXBsZW1lbnRzIElJbml0aWFsU2V0dGluZ3Mge1xyXG5cclxuICAgIFBpeGVsU3RyZWFtaW5nPzogSVBpeGVsU3RyZWFtaW5nO1xyXG4gICAgRW5jb2Rlcj86IElFbmNvZGVyO1xyXG4gICAgV2ViUlRDPzogSVdlYlJUQztcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICB0aGlzLlBpeGVsU3RyZWFtaW5nID0gbmV3IFBpeGVsU3RyZWFtaW5nKClcclxuICAgICAgICB0aGlzLkVuY29kZXIgPSBuZXcgRW5jb2RlcigpXHJcbiAgICAgICAgdGhpcy5XZWJSVEMgPSBuZXcgV2ViUlRDKClcclxuICAgIH1cclxuXHJcbiAgICB1ZUNvbXBhdGlibGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuV2ViUlRDLk1heEZQUyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuV2ViUlRDLkZQUyA9IHRoaXMuV2ViUlRDLk1heEZQU1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFBpeGVsU3RyZWFtaW5nIGltcGxlbWVudHMgSVBpeGVsU3RyZWFtaW5nIHtcclxuICAgIEFsbG93UGl4ZWxTdHJlYW1pbmdDb21tYW5kcz86IGJvb2xlYW47XHJcbiAgICBEaXNhYmxlTGF0ZW5jeVRlc3Q/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRW5jb2RlciBpbXBsZW1lbnRzIElFbmNvZGVyIHtcclxuICAgIFRhcmdldEJpdHJhdGU/OiBudW1iZXI7XHJcbiAgICBNYXhCaXRyYXRlPzogbnVtYmVyO1xyXG4gICAgTWluUVA/OiBudW1iZXI7XHJcbiAgICBNYXhRUD86IG51bWJlcjtcclxuICAgIFJhdGVDb250cm9sPzogXCJDQlJcIiB8IFwiVkJSXCIgfCBcIkNvbnN0UVBcIjtcclxuICAgIEZpbGxlckRhdGE/OiBib29sZWFuO1xyXG4gICAgTXVsdGlQYXNzPzogXCJESVNBQkxFRFwiIHwgXCJRVUFSVEVSXCIgfCBcIkZVTExcIjtcclxuXHJcblxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgV2ViUlRDIGltcGxlbWVudHMgSVdlYlJUQyB7XHJcbiAgICBEZWdyYWRhdGlvblByZWY/OiBcIkJBTEFOQ0VEXCIgfCBcIk1BSU5UQUlOX0ZSQU1FUkFURVwiIHwgXCJNQUlOVEFJTl9SRVNPTFVUSU9OXCI7XHJcbiAgICBNaW5CaXRyYXRlPzogbnVtYmVyO1xyXG4gICAgTWF4Qml0cmF0ZT86IG51bWJlcjtcclxuICAgIExvd1FQPzogbnVtYmVyO1xyXG4gICAgSGlnaFFQPzogbnVtYmVyO1xyXG4gICAgLy8gVUU0LjI3IGNvbXBhdGlibGVcclxuICAgIE1heEZQUz86IG51bWJlcjtcclxuICAgIC8vIFVFNSBjb21wYXRpYmxlXHJcbiAgICBGUFM/OiBudW1iZXI7XHJcblxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBJTGF0ZW5jeVRlc3RSZXN1bHRzIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0lMYXRlbmN5VGVzdFJlc3VsdHNcIlxyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vTG9nZ2VyL0xvZ2dlclwiO1xyXG4vKipcclxuICogTGF0ZW5jeSBUZXN0IFJlc3VsdHMgRGF0YVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIExhdGVuY3lUZXN0UmVzdWx0cyBpbXBsZW1lbnRzIElMYXRlbmN5VGVzdFJlc3VsdHMge1xyXG4gICAgLy9GaWVsZHMgU2V0IGZyb20gdGhlIGxhdGVuY3kgcGF5bG9hZCByZWdhcmRsZXNzIG9mIHZlcnNpb25cclxuICAgIFJlY2VpcHRUaW1lTXM6IG51bWJlciA9IG51bGw7XHJcbiAgICBUcmFuc21pc3Npb25UaW1lTXM6IG51bWJlciA9IG51bGw7XHJcblxyXG4gICAgLy9GaWVsZHMgU2V0IGZyb20gdGhlIGxhdGVuY3kgcGF5bG9hZCBmcm9tIDQuMjcuMlxyXG4gICAgUHJlQ2FwdHVyZVRpbWVNczogbnVtYmVyID0gbnVsbDtcclxuICAgIFBvc3RDYXB0dXJlVGltZU1zOiBudW1iZXIgPSBudWxsO1xyXG4gICAgUHJlRW5jb2RlVGltZU1zOiBudW1iZXIgPSBudWxsO1xyXG4gICAgUG9zdEVuY29kZVRpbWVNczogbnVtYmVyID0gbnVsbDtcclxuXHJcbiAgICAvL0ZpZWxkcyBTZXQgZnJvbSB0aGUgbGF0ZW5jeSBwYXlsb2FkIGZyb20gNS4wXHJcbiAgICBFbmNvZGVNczogbnVtYmVyID0gbnVsbDtcclxuICAgIENhcHR1cmVUb1NlbmRNczogbnVtYmVyID0gbnVsbDtcclxuXHJcblxyXG4gICAgLy9GaWVsZHMgU2V0IHdoZW4gcHJvY2Vzc2VkXHJcbiAgICB0ZXN0U3RhcnRUaW1lTXM6IG51bWJlciA9IDA7XHJcbiAgICBicm93c2VyUmVjZWlwdFRpbWVNczogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvL0ZpZWxkcyBzZXQgZnJvbSBjYWxjdWxhdGlvbnNcclxuICAgIGxhdGVuY3lFeGNsdWRpbmdEZWNvZGU6IG51bWJlciA9IDA7XHJcbiAgICB0ZXN0RHVyYXRpb246IG51bWJlciA9IDA7XHJcbiAgICAvL3VlTGF0ZW5jeTogbnVtYmVyID0gMDtcclxuICAgIG5ldHdvcmtMYXRlbmN5OiBudW1iZXIgPSAwO1xyXG4gICAgYnJvd3NlclNlbmRMYXRlbmN5OiBudW1iZXIgPSAwO1xyXG4gICAgZnJhbWVEaXNwbGF5RGVsdGFUaW1lTXM6IG51bWJlciA9IDA7XHJcbiAgICBlbmRUb0VuZExhdGVuY3k6IG51bWJlciA9IDA7XHJcbiAgICAvL3VlUGl4ZWxTdHJlYW1MYXRlbmN5OiBudW1iZXIgPSAwO1xyXG4gICAgZW5jb2RlTGF0ZW5jeTogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIERlbHRhIFRpbWUgTWlsbGlzZWNvbmRzXHJcbiAgICAgKiBAcGFyYW0gRGVsdGFUaW1lTXMgLSBEZWx0YSBUaW1lIE1pbGxpc2Vjb25kc1xyXG4gICAgICovXHJcbiAgICBzZXRGcmFtZURpc3BsYXlEZWx0YVRpbWUoRGVsdGFUaW1lTXM6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmZyYW1lRGlzcGxheURlbHRhVGltZU1zID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5mcmFtZURpc3BsYXlEZWx0YVRpbWVNcyA9IE1hdGgucm91bmQoRGVsdGFUaW1lTXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm9jZXNzRmllbGRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLkVuY29kZU1zID09IG51bGwgJiYgKHRoaXMuUHJlRW5jb2RlVGltZU1zICE9IG51bGwgfHwgdGhpcy5Qb3N0RW5jb2RlVGltZU1zICE9IG51bGwpKSB7XHJcbiAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgYFNldHRpbmcgRW5jb2RlIE1zIFxcbiAke3RoaXMuUG9zdEVuY29kZVRpbWVNc30gXFxuICR7dGhpcy5QcmVFbmNvZGVUaW1lTXN9YCwgNik7XHJcbiAgICAgICAgICAgIHRoaXMuRW5jb2RlTXMgPSB0aGlzLlBvc3RFbmNvZGVUaW1lTXMgLSB0aGlzLlByZUVuY29kZVRpbWVNc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuQ2FwdHVyZVRvU2VuZE1zID09IG51bGwgJiYgKHRoaXMuUHJlQ2FwdHVyZVRpbWVNcyAhPSBudWxsIHx8IHRoaXMuUG9zdENhcHR1cmVUaW1lTXMgIT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBgU2V0dGluZyBDYXB0dXJlVG9TZW5kTXMgTXMgXFxuICR7dGhpcy5Qb3N0Q2FwdHVyZVRpbWVNc30gXFxuICR7dGhpcy5QcmVDYXB0dXJlVGltZU1zfWAsIDYpO1xyXG4gICAgICAgICAgICB0aGlzLkNhcHR1cmVUb1NlbmRNcyA9IHRoaXMuUG9zdENhcHR1cmVUaW1lTXMgLSB0aGlzLlByZUNhcHR1cmVUaW1lTXNcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvbmZpZyB9IGZyb20gXCIuLlwiO1xyXG5pbXBvcnQgeyBJRGVsZWdhdGUgfSBmcm9tIFwiLi9JRGVsZWdhdGVcIjtcclxuaW1wb3J0IHsgSW5pdGlhbFNldHRpbmdzIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0luaXRpYWxTZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBMYXRlbmN5VGVzdFJlc3VsdHMgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvTGF0ZW5jeVRlc3RSZXN1bHRzXCJcclxuaW1wb3J0IHsgSUFjdGlvbk92ZXJsYXkgfSBmcm9tIFwiLi4vT3ZlcmxheS9JQWN0aW9uT3ZlcmxheVwiO1xyXG5pbXBvcnQgeyBJQWZrT3ZlcmxheSB9IGZyb20gXCIuLi9PdmVybGF5L0lBZmtPdmVybGF5XCI7XHJcbmltcG9ydCB7IElPdmVybGF5IH0gZnJvbSBcIi4uL092ZXJsYXkvSU92ZXJsYXlcIjtcclxuaW1wb3J0IHsgSVRleHRPdmVybGF5IH0gZnJvbSBcIi4uL092ZXJsYXkvSVRleHRPdmVybGF5XCI7XHJcbmltcG9ydCB7IEFnZ3JlZ2F0ZWRTdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvQWdncmVnYXRlZFN0YXRzXCI7XHJcbmltcG9ydCB7IElXZWJSdGNQbGF5ZXJDb250cm9sbGVyIH0gZnJvbSBcIi4uL1dlYlJ0Y1BsYXllci9JV2ViUnRjUGxheWVyQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlSW5zdGFuY2VTdGF0ZSwgTWVzc2FnZUF1dGhSZXNwb25zZSB9IGZyb20gJy4uL1dlYlNvY2tldHMvTWVzc2FnZVJlY2VpdmUnO1xyXG5cclxuLyoqXHJcbiAqIFByb3ZpZGVzIGNvbW1vbiBiYXNlIGZ1bmN0aW9uYWxpdHkgZm9yIGRlbGVnYXRlcyB0aGF0IGltcGxlbWVudCB0aGUgSURlbGVnYXRlIGludGVyZmFjZVxyXG4qL1xyXG5leHBvcnQgY2xhc3MgRGVsZWdhdGVCYXNlIGltcGxlbWVudHMgSURlbGVnYXRlIHtcclxuXHRwdWJsaWMgaVdlYlJ0Y0NvbnRyb2xsZXI6IElXZWJSdGNQbGF5ZXJDb250cm9sbGVyO1xyXG5cdHB1YmxpYyBjb25maWc6IENvbmZpZztcclxuXHRzaG93QWN0aW9uT3JFcnJvck9uRGlzY29ubmVjdDogYm9vbGVhbiA9IHRydWU7XHJcblxyXG5cdC8vIHNldCB0aGUgb3ZlcmxheSBwbGFjZWhvbGRlcnMgXHJcblx0Y3VycmVudE92ZXJsYXk6IElPdmVybGF5O1xyXG5cdGRpc2Nvbm5lY3RPdmVybGF5OiBJQWN0aW9uT3ZlcmxheTtcclxuXHRjb25uZWN0T3ZlcmxheTogSUFjdGlvbk92ZXJsYXk7XHJcblx0cGxheU92ZXJsYXk6IElBY3Rpb25PdmVybGF5O1xyXG5cdGFma092ZXJsYXk6IElBZmtPdmVybGF5O1xyXG5cdGluZm9PdmVybGF5OiBJVGV4dE92ZXJsYXk7XHJcblx0ZXJyb3JPdmVybGF5OiBJVGV4dE92ZXJsYXk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSBjb25maWcgLSBBIG5ld2x5IGluc3RhbnRpYXRlZCBjb25maWcgb2JqZWN0ICBcclxuXHQgKiByZXR1cm5zIHRoZSBiYXNlIGRlbGVnYXRlIG9iamVjdCB3aXRoIHRoZSBjb25maWcgaW5zaWRlIGl0IGFsb25nIHdpdGggYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIE92ZXJsYXkgY29udHJvbGxlciBjbGFzcyBcclxuXHQgKi9cclxuXHRjb25zdHJ1Y3Rvcihjb25maWc6IENvbmZpZykge1xyXG5cdFx0dGhpcy5jb25maWcgPSBjb25maWc7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTaG93cyB0aGUgZGlzY29ubmVjdCBvdmVybGF5IFxyXG5cdCAqL1xyXG5cdHNob3dEaXNjb25uZWN0T3ZlcmxheSh1cGRhdGVUZXh0OiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuaGlkZUN1cnJlbnRPdmVybGF5KCk7XHJcblx0XHR0aGlzLnVwZGF0ZURpc2Nvbm5lY3RPdmVybGF5KHVwZGF0ZVRleHQpO1xyXG5cdFx0dGhpcy5kaXNjb25uZWN0T3ZlcmxheS5zaG93KCk7XHJcblx0XHR0aGlzLmN1cnJlbnRPdmVybGF5ID0gdGhpcy5kaXNjb25uZWN0T3ZlcmxheTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSB0aGUgZGlzY29ubmVjdCBvdmVybGF5cyBzcGFuIHRleHQgXHJcblx0ICogQHBhcmFtIHVwZGF0ZVRleHQgdGhlIG5ldyBjb3VudGRvd24gbnVtYmVyIFxyXG5cdCAqL1xyXG5cdHVwZGF0ZURpc2Nvbm5lY3RPdmVybGF5KHVwZGF0ZVRleHQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy5kaXNjb25uZWN0T3ZlcmxheS51cGRhdGUodXBkYXRlVGV4dCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBBY3RpdmF0ZXMgdGhlIGRpc2Nvbm5lY3Qgb3ZlcmxheXMgYWN0aW9uIFxyXG5cdCAqL1xyXG5cdG9uRGlzY29ubmVjdGlvbkFjdGlvbigpIHtcclxuXHRcdHRoaXMuZGlzY29ubmVjdE92ZXJsYXkuYWN0aXZhdGUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhpZGVzIHRoZSBjdXJyZW50IG92ZXJsYXkgXHJcblx0ICovXHJcblx0aGlkZUN1cnJlbnRPdmVybGF5KCkge1xyXG5cdFx0aWYgKHRoaXMuY3VycmVudE92ZXJsYXkgIT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRPdmVybGF5LmhpZGUoKTtcclxuXHRcdFx0dGhpcy5jdXJyZW50T3ZlcmxheSA9IG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTaG93cyB0aGUgY29ubmVjdCBvdmVybGF5IFxyXG5cdCAqL1xyXG5cdHNob3dDb25uZWN0T3ZlcmxheSgpIHtcclxuXHRcdHRoaXMuaGlkZUN1cnJlbnRPdmVybGF5KCk7XHJcblx0XHR0aGlzLmNvbm5lY3RPdmVybGF5LnNob3coKTtcclxuXHRcdHRoaXMuY3VycmVudE92ZXJsYXkgPSB0aGlzLmNvbm5lY3RPdmVybGF5O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2hvd3MgdGhlIHBsYXkgb3ZlcmxheSBcclxuXHQgKi9cclxuXHRzaG93UGxheU92ZXJsYXkoKSB7XHJcblx0XHR0aGlzLmhpZGVDdXJyZW50T3ZlcmxheSgpO1xyXG5cdFx0dGhpcy5wbGF5T3ZlcmxheS5zaG93KCk7XHJcblx0XHR0aGlzLmN1cnJlbnRPdmVybGF5ID0gdGhpcy5wbGF5T3ZlcmxheTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNob3dzIHRoZSB0ZXh0IG92ZXJsYXkgXHJcblx0ICovXHJcblx0c2hvd1RleHRPdmVybGF5KHRleHQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKTtcclxuXHRcdHRoaXMuaW5mb092ZXJsYXkudXBkYXRlKHRleHQpO1xyXG5cdFx0dGhpcy5pbmZvT3ZlcmxheS5zaG93KCk7XHJcblx0XHR0aGlzLmN1cnJlbnRPdmVybGF5ID0gdGhpcy5pbmZvT3ZlcmxheTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNob3dzIHRoZSBlcnJvciBvdmVybGF5IFxyXG5cdCAqL1xyXG5cdHNob3dFcnJvck92ZXJsYXkodGV4dDogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmhpZGVDdXJyZW50T3ZlcmxheSgpO1xyXG5cdFx0dGhpcy5lcnJvck92ZXJsYXkudXBkYXRlKHRleHQpO1xyXG5cdFx0dGhpcy5lcnJvck92ZXJsYXkuc2hvdygpO1xyXG5cdFx0dGhpcy5jdXJyZW50T3ZlcmxheSA9IHRoaXMuZXJyb3JPdmVybGF5O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQWN0aXZhdGVzIHRoZSBjb25uZWN0IG92ZXJsYXlzIGFjdGlvbiBcclxuXHQgKi9cclxuXHRvbkNvbm5lY3RBY3Rpb24oKSB7XHJcblx0XHR0aGlzLmNvbm5lY3RPdmVybGF5LmFjdGl2YXRlKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBBY3RpdmF0ZXMgdGhlIHBsYXkgb3ZlcmxheXMgYWN0aW9uIFxyXG5cdCAqL1xyXG5cdG9uUGxheUFjdGlvbigpIHtcclxuXHRcdHRoaXMucGxheU92ZXJsYXkuYWN0aXZhdGUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNob3dzIHRoZSBhZmsgb3ZlcmxheSBcclxuXHQgKiBAcGFyYW0gY291bnREb3duIHRoZSBjb3VudGRvd24gbnVtYmVyIGZvciB0aGUgYWZrIGNvdW50ZG93biBcclxuXHQgKi9cclxuXHRzaG93QWZrT3ZlcmxheShjb3VudERvd246IG51bWJlcikge1xyXG5cdFx0dGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKTtcclxuXHRcdHRoaXMudXBkYXRlQWZrT3ZlcmxheShjb3VudERvd24pO1xyXG5cdFx0dGhpcy5hZmtPdmVybGF5LnNob3coKTtcclxuXHRcdHRoaXMuY3VycmVudE92ZXJsYXkgPSB0aGlzLmFma092ZXJsYXk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgdGhlIGFmayBvdmVybGF5cyBjb3VudGRvd24gbnVtYmVyIFxyXG5cdCAqIEBwYXJhbSBjb3VudERvd24gdGhlIG5ldyBjb3VudGRvd24gbnVtYmVyIFxyXG5cdCAqL1xyXG5cdHVwZGF0ZUFma092ZXJsYXkoY291bnREb3duOiBudW1iZXIpIHtcclxuXHRcdHRoaXMuYWZrT3ZlcmxheS51cGRhdGVDb3VudGRvd24oY291bnREb3duKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEFjdGl2YXRlcyB0aGUgYWZrIG92ZXJsYXlzIGFjdGlvbiBcclxuXHQgKi9cclxuXHRvbkFma0FjdGlvbigpIHtcclxuXHRcdHRoaXMuYWZrT3ZlcmxheS5hY3RpdmF0ZSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSW5zdGFudGlhdGUgdGhlIFdlYlJUQ1BsYXllckNvbnRyb2xsZXIgaW50ZXJmYWNlIHRvIHByb3ZpZGUgV2ViUlRDUGxheWVyQ29udHJvbGxlciBmdW5jdGlvbmFsaXR5IHdpdGhpbiB0aGlzIGNsYXNzIGFuZCBzZXQgdXAgYW55dGhpbmcgdGhhdCByZXF1aXJlcyBpdCBcclxuXHQgKiBAcGFyYW0gaVdlYlJ0Y1BsYXllckNvbnRyb2xsZXIgXHJcblx0ICovXHJcblx0c2V0SVdlYlJ0Y1BsYXllckNvbnRyb2xsZXIoaVdlYlJ0Y1BsYXllckNvbnRyb2xsZXI6IElXZWJSdGNQbGF5ZXJDb250cm9sbGVyKSB7XHJcblx0XHR0aGlzLmlXZWJSdGNDb250cm9sbGVyID0gaVdlYlJ0Y1BsYXllckNvbnRyb2xsZXI7XHJcblxyXG5cdFx0dGhpcy5pV2ViUnRjQ29udHJvbGxlci5yZXNpemVQbGF5ZXJTdHlsZSgpO1xyXG5cclxuXHRcdHRoaXMuZGlzY29ubmVjdE92ZXJsYXkub25BY3Rpb24oKCkgPT4ge1xyXG5cdFx0XHR0aGlzLm9uV2ViUnRjQXV0b0Nvbm5lY3QoKTtcclxuXHRcdFx0dGhpcy5pV2ViUnRjQ29udHJvbGxlci5jb25uZWN0VG9TaWduYWxsaW5nU2VydmVyKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBCdWlsZCB0aGUgd2ViUnRjIGNvbm5lY3Qgb3ZlcmxheSBFdmVudCBMaXN0ZW5lciBhbmQgc2hvdyB0aGUgY29ubmVjdCBvdmVybGF5XHJcblx0XHR0aGlzLmNvbm5lY3RPdmVybGF5Lm9uQWN0aW9uKCgpID0+IHRoaXMuaVdlYlJ0Y0NvbnRyb2xsZXIuY29ubmVjdFRvU2lnbmFsbGluZ1NlcnZlcigpKTtcclxuXHJcblx0XHQvLyBzZXQgdXAgdGhlIGFmayBvdmVybGF5cyBhY3Rpb24gXHJcblx0XHR0aGlzLmFma092ZXJsYXkub25BY3Rpb24oKCkgPT4gdGhpcy5pV2ViUnRjQ29udHJvbGxlci5vbkFma0NsaWNrKCkpO1xyXG5cclxuXHRcdC8vIHNldCB1cCB0aGUgcGxheSBvdmVybGF5cyBhY3Rpb24gXHJcblx0XHR0aGlzLnBsYXlPdmVybGF5Lm9uQWN0aW9uKCgpID0+IHtcclxuXHRcdFx0dGhpcy5vblN0cmVhbUxvYWRpbmcoKTtcclxuXHRcdFx0dGhpcy5pV2ViUnRjQ29udHJvbGxlci5wbGF5U3RyZWFtKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBzZXQgdXAgdGhlIGNvbm5lY3Qgb3ZlcmxheXMgYWN0aW9uXHJcblx0XHR0aGlzLnNob3dDb25uZWN0T3JBdXRvQ29ubmVjdE92ZXJsYXlzKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTaG93IHRoZSBDb25uZWN0IE92ZXJsYXkgb3IgYXV0byBjb25uZWN0IFxyXG5cdCAqL1xyXG5cdHNob3dDb25uZWN0T3JBdXRvQ29ubmVjdE92ZXJsYXlzKCkge1xyXG5cdFx0Ly8gc2V0IHVwIGlmIHRoZSBhdXRvIHBsYXkgd2lsbCBiZSB1c2VkIG9yIHJlZ3VsYXIgY2xpY2sgdG8gc3RhcnRcclxuXHRcdGlmICghdGhpcy5jb25maWcuZW5hYmxlU3BzQXV0b0Nvbm5lY3QpIHtcclxuXHRcdFx0dGhpcy5zaG93Q29ubmVjdE92ZXJsYXkoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIGlmIGF1dG9wbGF5aW5nIHNob3cgYW4gaW5mbyBvdmVybGF5IHdoaWxlIHdoaWxlIHdhaXRpbmcgZm9yIHRoZSBjb25uZWN0aW9uIHRvIGJlZ2luIFxyXG5cdFx0XHR0aGlzLm9uV2ViUnRjQXV0b0Nvbm5lY3QoKTtcclxuXHRcdFx0dGhpcy5pV2ViUnRjQ29udHJvbGxlci5jb25uZWN0VG9TaWduYWxsaW5nU2VydmVyKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTaG93IHRoZSB3ZWJSdGNBdXRvQ29ubmVjdCBPdmVybGF5IGFuZCBjb25uZWN0XHJcblx0ICovXHJcblx0b25XZWJSdGNBdXRvQ29ubmVjdCgpIHtcclxuXHRcdHRoaXMuc2hvd1RleHRPdmVybGF5KFwiQXV0byBDb25uZWN0aW5nIE5vd1wiKTtcclxuXHRcdHRoaXMuc2hvd0FjdGlvbk9yRXJyb3JPbkRpc2Nvbm5lY3QgPSB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHVwIGZ1bmN0aW9uYWxpdHkgdG8gaGFwcGVuIHdoZW4gYW4gaW5zdGFuY2Ugc3RhdGUgY2hhbmdlIG9jY3Vyc1xyXG5cdCAqIEBwYXJhbSBpbnN0YW5jZVN0YXRlIC0gdGhlIG1lc3NhZ2UgaW5zdGFuY2Ugc3RhdGUgXHJcblx0ICovXHJcblx0b25JbnN0YW5jZVN0YXRlQ2hhbmdlKGluc3RhbmNlU3RhdGU6IE1lc3NhZ2VJbnN0YW5jZVN0YXRlKSB7IH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHVwIGZ1bmN0aW9uYWxpdHkgdG8gaGFwcGVuIHdoZW4gcmVjZWl2aW5nIGFuIGF1dGggcmVzcG9uc2UgXHJcblx0ICogQHBhcmFtIGF1dGhSZXNwb25zZSAtIHRoZSBhdXRoIHJlc3BvbnNlIG1lc3NhZ2UgdHlwZVxyXG5cdCAqL1xyXG5cdG9uQXV0aGVudGljYXRpb25SZXNwb25zZShhdXRoUmVzcG9uc2U6IE1lc3NhZ2VBdXRoUmVzcG9uc2UpIHsgfVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgdXAgZnVuY3Rpb25hbGl0eSB0byBoYXBwZW4gd2hlbiByZWNlaXZpbmcgYSB3ZWJSVEMgYW5zd2VyIFxyXG5cdCAqL1xyXG5cdG9uV2ViUnRjQW5zd2VyKCkge1xyXG5cdFx0dGhpcy5zaG93VGV4dE92ZXJsYXkoXCJSVEMgQW5zd2VyXCIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2hvd3MgYSB0ZXh0IG92ZXJsYXkgdG8gYWxlcnQgdGhlIHVzZXIgdGhlIHN0cmVhbSBpcyBjdXJyZW50bHkgbG9hZGluZ1xyXG5cdCAqL1xyXG5cdG9uU3RyZWFtTG9hZGluZygpIHtcclxuXHRcdHRoaXMuc2hvd1RleHRPdmVybGF5KFwiTG9hZGluZyBTdHJlYW1cIik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBFdmVudCBmaXJlZCB3aGVuIHRoZSB2aWRlbyBpcyBkaXNjb25uZWN0ZWRcclxuXHQgKi9cclxuXHRvbkRpc2Nvbm5lY3QoZXZlbnRTdHJpbmc6IHN0cmluZykge1xyXG5cdFx0XHJcblx0XHQvLyBpZiB3ZSBoYXZlIG92ZXJyaWRkZW4gdGhlIGRlZmF1bHQgZGlzY29ubmVjdGlvbiBtZXNzc2FnZSwgYXNzaWduIHRoZSBuZXcgdmFsdWUgaGVyZVxyXG5cdFx0aWYgKHRoaXMuaVdlYlJ0Y0NvbnRyb2xsZXIuZ2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZSgpICE9IFwiXCIgJiYgdGhpcy5pV2ViUnRjQ29udHJvbGxlci5nZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKCkgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmlXZWJSdGNDb250cm9sbGVyLmdldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUoKSAhPSBudWxsKSB7XHJcblx0XHRcdGV2ZW50U3RyaW5nID0gdGhpcy5pV2ViUnRjQ29udHJvbGxlci5nZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKCk7XHJcblx0XHRcdHRoaXMuaVdlYlJ0Y0NvbnRyb2xsZXIuc2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZSgnJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuc2hvd0FjdGlvbk9yRXJyb3JPbkRpc2Nvbm5lY3QgPT0gZmFsc2UpIHtcclxuXHRcdFx0dGhpcy5zaG93RXJyb3JPdmVybGF5KGBEaXNjb25uZWN0ZWQ6ICR7ZXZlbnRTdHJpbmd9YCk7XHJcblx0XHRcdHRoaXMuc2hvd0FjdGlvbk9yRXJyb3JPbkRpc2Nvbm5lY3QgPSB0cnVlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5zaG93RGlzY29ubmVjdE92ZXJsYXkoYERpc2Nvbm5lY3RlZDogJHtldmVudFN0cmluZ30gIFxcbiBDbGljayBUbyBSZXN0YXJ0YCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHdoZW4gV2ViIFJ0YyBpcyBjb25uZWN0aW5nIFxyXG5cdCAqL1xyXG5cdG9uV2ViUnRjQ29ubmVjdGluZygpIHtcclxuXHRcdHRoaXMuc2hvd1RleHRPdmVybGF5KFwiU3RhcnRpbmcgY29ubmVjdGlvbiB0byBzZXJ2ZXIsIHBsZWFzZSB3YWl0XCIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB3aGVuIFdlYiBSdGMgaGFzIGNvbm5lY3RlZCBcclxuXHQgKi9cclxuXHRvbldlYlJ0Y0Nvbm5lY3RlZCgpIHtcclxuXHRcdHRoaXMuc2hvd1RleHRPdmVybGF5KFwiV2ViUlRDIGNvbm5lY3RlZCwgd2FpdGluZyBmb3IgdmlkZW9cIik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHdoZW4gV2ViIFJ0YyBmYWlscyB0byBjb25uZWN0IFxyXG5cdCAqL1xyXG5cdG9uV2ViUnRjRmFpbGVkKCkge1xyXG5cdFx0dGhpcy5zaG93RXJyb3JPdmVybGF5KFwiVW5hYmxlIHRvIHNldHVwIHZpZGVvXCIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHVwIG1ldGhvZHMgYW5kIGZ1bmN0aW9ucyB0byBydW4gd2hlbiB0aGUgdmlkZW8gaXMgaW5pdGlhbGlzZWQgXHJcblx0ICovXHJcblx0b25WaWRlb0luaXRpYWxpc2VkKCkgeyB9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCB1cCBmdW5jdGlvbmFsaXR5IHRvIGhhcHBlbiB3aGVuIHJlY2VpdmluZyBsYXRlbmN5IHRlc3QgcmVzdWx0cyBcclxuXHQgKiBAcGFyYW0gbGF0ZW5jeSAtIGxhdGVuY3kgdGVzdCByZXN1bHRzIG9iamVjdFxyXG5cdCAqL1xyXG5cdG9uTGF0ZW5jeVRlc3RSZXN1bHQobGF0ZW5jeTogTGF0ZW5jeVRlc3RSZXN1bHRzKSB7IH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHVwIGZ1bmN0aW9uYWxpdHkgdG8gaGFwcGVuIHdoZW4gcmVjZWl2aW5nIHZpZGVvIHN0YXRpc3RpY3MgXHJcblx0ICogQHBhcmFtIHZpZGVvU3RhdHMgLSB2aWRlbyBzdGF0aXN0aWNzIGFzIGEgYWdncmVnYXRlIHN0YXRzIG9iamVjdCBcclxuXHQgKi9cclxuXHRvblZpZGVvU3RhdHModmlkZW9TdGF0czogQWdncmVnYXRlZFN0YXRzKSB7IH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHVwIGZ1bmN0aW9uYWxpdHkgdG8gaGFwcGVuIHdoZW4gY2FsY3VsYXRpbmcgdGhlIGF2ZXJhZ2UgdmlkZW8gZW5jb2RlciBxcCBcclxuXHQgKiBAcGFyYW0gUVAgLSB0aGUgcXVhbGl0eSBudW1iZXIgb2YgdGhlIHN0cmVhbVxyXG5cdCAqL1xyXG5cdG9uVmlkZW9FbmNvZGVyQXZnUVAoUVA6IG51bWJlcikgeyB9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCB1cCBmdW5jdGlvbmFsaXR5IHRvIGhhcHBlbiB3aGVuIHJlY2VpdmluZyBhbmQgaGFuZGxpbmcgaW5pdGlhbCBzZXR0aW5ncyBmb3IgdGhlIFVFIGFwcCBcclxuXHQgKiBAcGFyYW0gc2V0dGluZ3MgLSBpbml0aWFsIFVFIGFwcCBzZXR0aW5ncyAgXHJcblx0ICovXHJcblx0b25Jbml0aWFsU2V0dGluZ3Moc2V0dGluZ3M6IEluaXRpYWxTZXR0aW5ncykgeyB9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCB1cCBmdW5jdGlvbmFsaXR5IHRvIGhhcHBlbiB3aGVuIHNldHRpbmcgcXVhbGl0eSBjb250cm9sIG93bmVyc2hpcCBvZiBhIHN0cmVhbSBcclxuXHQgKiBAcGFyYW0gaGFzUXVhbGl0eU93bmVyc2hpcCAtIGRvZXMgdGhpcyB1c2VyIGhhdmUgcXVhbGl0eSBvd25lcnNoaXAgb2YgdGhlIHN0cmVhbSB0cnVlIC8gZmFsc2VcclxuXHQgKi9cclxuXHRvblF1YWxpdHlDb250cm9sT3duZXJzaGlwKGhhc1F1YWxpdHlPd25lcnNoaXA6IGJvb2xlYW4pIHsgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBBIGNsYXNzIGZvciBtYW5hZ2luZyB0aGUgZnJlZXplIGZyYW1lIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZyZWV6ZUZyYW1lIHtcclxuICAgIHByb3RlY3RlZCByb290RGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByb3RlY3RlZCByb290RWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBpbWFnZUVsZW1lbnQ6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICBmcmVlemVGcmFtZUhlaWdodCA9IDA7XHJcbiAgICBmcmVlemVGcmFtZVdpZHRoID0gMDtcclxuICAgIGVubGFyZ2VEaXNwbGF5VG9GaWxsV2luZG93OiBib29sZWFuO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0IGEgZnJlZXplIGZyYW1lXHJcbiAgICAgKiBAcGFyYW0gcm9vdERpdiB0aGUgZGl2IHRoYXQgYSBmcmVlemUgZnJhbWUgZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQgaW50b1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihyb290RGl2OiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMucm9vdERpdiA9IHJvb3REaXY7XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgb3ZlcmxheVxyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LmlkID0gJ2ZyZWV6ZUZyYW1lJztcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQuc3R5bGUuekluZGV4ID0gJzIwJztcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIHRoZSBpbWFnZSBwbGFjZSBob2xkZXJcclxuICAgICAgICB0aGlzLmltYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuXHJcbiAgICAgICAgLy8gYXBwZW5kIHRoZSBpbWFnZSBpbnRvIHRoZSByb290IGVsZW1lbnQgYW5kIGFwcGVuZCB0aGUgZWxlbWVudCB0byB0aGUgcm9vdCBkaXZcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuaW1hZ2VFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnJvb3REaXYuYXBwZW5kQ2hpbGQodGhpcy5yb290RWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGZyZWV6ZSBmcmFtZSBlbGVtZW50IGZvciBzaG93aW5nIFxyXG4gICAgICovXHJcbiAgICBzZXRFbGVtZW50Rm9yU2hvdygpIHtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBmcmVlemUgZnJhbWUgZWxlbWVudCBmb3IgaGlkaW5nIFxyXG4gICAgICovXHJcbiAgICBzZXRFbGVtZW50Rm9ySGlkZSgpIHtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIGZyZWV6ZSBmcmFtZXMgaW1hZ2Ugc291cmNlXHJcbiAgICAgKiBAcGFyYW0ganBlZyB0aGUgZnJlZXplIGZyYW1lIGltYWdlIGFzIGEgYnl0ZSBhcnJheSBkYXRhICBcclxuICAgICAqL1xyXG4gICAgdXBkYXRlSW1hZ2VFbGVtZW50U291cmNlKGpwZWc6IFVpbnQ4QXJyYXkpIHtcclxuICAgICAgICBsZXQgYmFzZTY0ID0gYnRvYShqcGVnLnJlZHVjZSgoZGF0YSwgYnl0ZSkgPT4gZGF0YSArIFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZSksICcnKSk7XHJcbiAgICAgICAgdGhpcy5pbWFnZUVsZW1lbnQuc3JjID0gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsJyArIGJhc2U2NDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgZGltZW5zaW9ucyBmb3IgdGhlIGZyZWV6ZSBmcmFtZSBmcm9tIHRoZSBlbGVtZW50IGFuZCByZXNpemUgaXRcclxuICAgICAqL1xyXG4gICAgc2V0RGltZW5zaW9uc0Zyb21FbGVtZW50QW5kUmVzaXplKCkge1xyXG4gICAgICAgIHRoaXMuZnJlZXplRnJhbWVIZWlnaHQgPSB0aGlzLmltYWdlRWxlbWVudC5uYXR1cmFsSGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuZnJlZXplRnJhbWVXaWR0aCA9IHRoaXMuaW1hZ2VFbGVtZW50Lm5hdHVyYWxXaWR0aDtcclxuICAgICAgICB0aGlzLnJlc2l6ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzaXplIGEgZnJlZXplIGZyYW1lIGVsZW1lbnQgXHJcbiAgICAgKi9cclxuICAgIHJlc2l6ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5mcmVlemVGcmFtZVdpZHRoICE9PSAwICYmIHRoaXMuZnJlZXplRnJhbWVIZWlnaHQgIT09IDApIHtcclxuICAgICAgICAgICAgbGV0IGRpc3BsYXlXaWR0aCA9IDA7XHJcbiAgICAgICAgICAgIGxldCBkaXNwbGF5SGVpZ2h0ID0gMDtcclxuICAgICAgICAgICAgbGV0IGRpc3BsYXlUb3AgPSAwO1xyXG4gICAgICAgICAgICBsZXQgZGlzcGxheUxlZnQgPSAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbmxhcmdlRGlzcGxheVRvRmlsbFdpbmRvdyA9PT0gbnVsbCB8fCB0aGlzLmVubGFyZ2VEaXNwbGF5VG9GaWxsV2luZG93ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgd2luZG93QXNwZWN0UmF0aW8gPSB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICAgICAgICAgIGxldCB2aWRlb0FzcGVjdFJhdGlvID0gdGhpcy5mcmVlemVGcmFtZVdpZHRoIC8gdGhpcy5mcmVlemVGcmFtZUhlaWdodDtcclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3dBc3BlY3RSYXRpbyA8IHZpZGVvQXNwZWN0UmF0aW8pIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5SGVpZ2h0ID0gTWF0aC5mbG9vcih3aW5kb3cuaW5uZXJXaWR0aCAvIHZpZGVvQXNwZWN0UmF0aW8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUb3AgPSBNYXRoLmZsb29yKCh3aW5kb3cuaW5uZXJIZWlnaHQgLSBkaXNwbGF5SGVpZ2h0KSAqIDAuNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheUxlZnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5V2lkdGggPSBNYXRoLmZsb29yKHdpbmRvdy5pbm5lckhlaWdodCAqIHZpZGVvQXNwZWN0UmF0aW8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheUxlZnQgPSBNYXRoLmZsb29yKCh3aW5kb3cuaW5uZXJXaWR0aCAtIGRpc3BsYXlXaWR0aCkgKiAwLjUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gVmlkZW8gaXMgY29taW5nIGluIGF0IG5hdGl2ZSByZXNvbHV0aW9uLCB3ZSBjYXJlIG1vcmUgYWJvdXQgdGhlIHBsYXllciBzaXplXHJcbiAgICAgICAgICAgICAgICBsZXQgcGxheWVyQXNwZWN0UmF0aW8gPSB0aGlzLnJvb3REaXYub2Zmc2V0V2lkdGggLyB0aGlzLnJvb3REaXYub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgbGV0IHZpZGVvQXNwZWN0UmF0aW8gPSB0aGlzLmZyZWV6ZUZyYW1lV2lkdGggLyB0aGlzLmZyZWV6ZUZyYW1lSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllckFzcGVjdFJhdGlvIDwgdmlkZW9Bc3BlY3RSYXRpbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlXaWR0aCA9IHRoaXMucm9vdERpdi5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5SGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLnJvb3REaXYub2Zmc2V0V2lkdGggLyB2aWRlb0FzcGVjdFJhdGlvKTtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VG9wID0gTWF0aC5mbG9vcigodGhpcy5yb290RGl2Lm9mZnNldEhlaWdodCAtIGRpc3BsYXlIZWlnaHQpICogMC41KTtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TGVmdCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlXaWR0aCA9IE1hdGguZmxvb3IodGhpcy5yb290RGl2Lm9mZnNldEhlaWdodCAqIHZpZGVvQXNwZWN0UmF0aW8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlIZWlnaHQgPSB0aGlzLnJvb3REaXYub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUb3AgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlMZWZ0ID0gTWF0aC5mbG9vcigodGhpcy5yb290RGl2Lm9mZnNldFdpZHRoIC0gZGlzcGxheVdpZHRoKSAqIDAuNSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yb290RWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMucm9vdERpdi5vZmZzZXRXaWR0aCArICdweCc7XHJcbiAgICAgICAgICAgIHRoaXMucm9vdEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5yb290RGl2Lm9mZnNldEhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgIHRoaXMucm9vdEVsZW1lbnQuc3R5bGUubGVmdCA9IDAgKyAncHgnO1xyXG4gICAgICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnN0eWxlLnRvcCA9IDAgKyAncHgnO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbWFnZUVsZW1lbnQuc3R5bGUud2lkdGggPSBkaXNwbGF5V2lkdGggKyAncHgnO1xyXG4gICAgICAgICAgICB0aGlzLmltYWdlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBkaXNwbGF5SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgdGhpcy5pbWFnZUVsZW1lbnQuc3R5bGUubGVmdCA9IGRpc3BsYXlMZWZ0ICsgJ3B4JztcclxuICAgICAgICAgICAgdGhpcy5pbWFnZUVsZW1lbnQuc3R5bGUudG9wID0gZGlzcGxheVRvcCArICdweCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuaW1wb3J0IHsgRnJlZXplRnJhbWUgfSBmcm9tIFwiLi9GcmVlemVGcmFtZVwiO1xyXG5cclxuLyoqXHJcbiAqIEEgY2xhc3MgZm9yIGNvbnRyb2xsaW5nIGZyZWV6ZSBmcmFtZSBmdW5jdGlvbmFsaXR5IFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZyZWV6ZUZyYW1lQ29udHJvbGxlciB7XHJcbiAgICBmcmVlemVGcmFtZTogRnJlZXplRnJhbWU7XHJcbiAgICByZWNlaXZpbmcgPSBmYWxzZTtcclxuICAgIHNpemUgPSAwO1xyXG4gICAganBlZzogVWludDhBcnJheSA9IHVuZGVmaW5lZDtcclxuICAgIHZhbGlkID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3QgYSBmcmVlemUgZnJhbWUgY29udHJvbGxlciBcclxuICAgICAqIEBwYXJhbSByb290RGl2IHRoZSBkaXYgdGhhdCBhIGZyZWV6ZSBmcmFtZSBlbGVtZW50IHdpbGwgYmUgY3JlYXRlZCBpbnRvXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHJvb3REaXY6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5mcmVlemVGcmFtZSA9IG5ldyBGcmVlemVGcmFtZShyb290RGl2KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgdGhlIGZyZWV6ZSBmcmFtZSBpZiBpdCBpcyB2YWxpZCBcclxuICAgICAqL1xyXG4gICAgc2hvd0ZyZWV6ZUZyYW1lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZnJlZXplRnJhbWUuc2V0RWxlbWVudEZvclNob3coKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIaWRlIHRoZSBmcmVlemUgZnJhbWUgYW5kIHNldCB0aGUgdmFsaWRpdHkgdG8gZmFsc2VcclxuICAgICAqL1xyXG4gICAgaGlkZUZyZWV6ZUZyYW1lKCkge1xyXG4gICAgICAgIHRoaXMudmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmZyZWV6ZUZyYW1lLnNldEVsZW1lbnRGb3JIaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIGZyZWV6ZSBmcmFtZXMgaW1hZ2Ugc291cmNlIGFuZCBsb2FkIGl0ICBcclxuICAgICAqIEBwYXJhbSBqcGVnIHRoZSBmcmVlemUgZnJhbWUgaW1hZ2UgYXMgYSBieXRlIGFycmF5IGRhdGFcclxuICAgICAqIEBwYXJhbSBvbkxvYWRDYWxsQmFjayBhIGNhbGwgYmFjayBmb3IgbWFuYWdpbmcgaWYgdGhlIHBsYXkgb3ZlcmxheSBuZWVkcyB0byBiZSBzaG93biBvciBub3RcclxuICAgICAqL1xyXG4gICAgdXBkYXRlRnJlZXplRnJhbWVBbmRTaG93KGpwZWc6IFVpbnQ4QXJyYXksIG9uTG9hZENhbGxCYWNrOiBGdW5jdGlvbikge1xyXG4gICAgICAgIHRoaXMuZnJlZXplRnJhbWUudXBkYXRlSW1hZ2VFbGVtZW50U291cmNlKGpwZWcpO1xyXG4gICAgICAgIHRoaXMuZnJlZXplRnJhbWUuaW1hZ2VFbGVtZW50Lm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mcmVlemVGcmFtZS5zZXREaW1lbnNpb25zRnJvbUVsZW1lbnRBbmRSZXNpemUoKTtcclxuICAgICAgICAgICAgb25Mb2FkQ2FsbEJhY2soKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzIHRoZSBuZXcgZnJlZXplIGZyYW1lIGltYWdlIGFuZCB1cGRhdGUgaXRcclxuICAgICAqIEBwYXJhbSB2aWV3IHRoZSBmcmVlemUgZnJhbWUgaW1hZ2UgYXMgYSBieXRlIGFycmF5IGRhdGFcclxuICAgICAqIEBwYXJhbSBvbkxvYWRDYWxsQmFjayBhIGNhbGwgYmFjayBmb3IgbWFuYWdpbmcgaWYgdGhlIHBsYXkgb3ZlcmxheSBuZWVkcyB0byBiZSBzaG93biBvciBub3RcclxuICAgICAqL1xyXG4gICAgcHJvY2Vzc0ZyZWV6ZUZyYW1lTWVzc2FnZSh2aWV3OiBVaW50OEFycmF5LCBvbkxvYWRDYWxsQmFjazogRnVuY3Rpb24pIHtcclxuICAgICAgICAvLyBSZXNldCBmcmVlemUgZnJhbWUgaWYgd2UgZ290IGEgZnJlZXplIGZyYW1lIG1lc3NhZ2UgYW5kIHdlIGFyZSBub3QgXCJyZWNlaXZpbmdcIiB5ZXQuXHJcbiAgICAgICAgaWYgKCF0aGlzLnJlY2VpdmluZykge1xyXG4gICAgICAgICAgICB0aGlzLnJlY2VpdmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zaXplID0gMDtcclxuICAgICAgICAgICAgdGhpcy5qcGVnID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXh0cmFjdCB0b3RhbCBzaXplIG9mIGZyZWV6ZSBmcmFtZSAoYWNyb3NzIGFsbCBjaHVua3MpXHJcbiAgICAgICAgdGhpcy5zaXplID0gKG5ldyBEYXRhVmlldyh2aWV3LnNsaWNlKDEsIDUpLmJ1ZmZlcikpLmdldEludDMyKDAsIHRydWUpO1xyXG5cclxuICAgICAgICAvLyBHZXQgdGhlIGpwZWcgcGFydCBvZiB0aGUgcGF5bG9hZFxyXG4gICAgICAgIGxldCBqcGVnQnl0ZXMgPSB2aWV3LnNsaWNlKDEgKyA0KTtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRvIGV4aXN0aW5nIGpwZWcgdGhhdCBob2xkcyB0aGUgZnJlZXplIGZyYW1lXHJcbiAgICAgICAgaWYgKHRoaXMuanBlZykge1xyXG4gICAgICAgICAgICBsZXQganBlZyA9IG5ldyBVaW50OEFycmF5KHRoaXMuanBlZy5sZW5ndGggKyBqcGVnQnl0ZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAganBlZy5zZXQodGhpcy5qcGVnLCAwKTtcclxuICAgICAgICAgICAganBlZy5zZXQoanBlZ0J5dGVzLCB0aGlzLmpwZWcubGVuZ3RoKTtcclxuICAgICAgICAgICAgdGhpcy5qcGVnID0ganBlZztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTm8gZXhpc3RpbmcgZnJlZXplIGZyYW1lIGpwZWcsIG1ha2Ugb25lXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuanBlZyA9IGpwZWdCeXRlcztcclxuICAgICAgICAgICAgdGhpcy5yZWNlaXZpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIGByZWNlaXZlZCBmaXJzdCBjaHVuayBvZiBmcmVlemUgZnJhbWU6ICR7dGhpcy5qcGVnLmxlbmd0aH0vJHt0aGlzLnNpemV9YCwgNik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGaW5pc2hlZCByZWNlaXZpbmcgZnJlZXplIGZyYW1lLCB3ZSBjYW4gc2hvdyBpdCBub3dcclxuICAgICAgICBpZiAodGhpcy5qcGVnLmxlbmd0aCA9PT0gdGhpcy5zaXplKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjZWl2aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIGByZWNlaXZlZCBjb21wbGV0ZSBmcmVlemUgZnJhbWUgJHt0aGlzLnNpemV9YCwgNik7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRnJlZXplRnJhbWVBbmRTaG93KHRoaXMuanBlZywgb25Mb2FkQ2FsbEJhY2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBXZSByZWNlaXZlZCBtb3JlIGRhdGEgdGhhbiB0aGUgZnJlZXplIGZyYW1lIHBheWxvYWQgbWVzc2FnZSBpbmRpY2F0ZSAodGhpcyBpcyBhbiBlcnJvcilcclxuICAgICAgICBlbHNlIGlmICh0aGlzLmpwZWcubGVuZ3RoID4gdGhpcy5zaXplKSB7XHJcbiAgICAgICAgICAgIExvZ2dlci5FcnJvcihMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBgcmVjZWl2ZWQgYmlnZ2VyIGZyZWV6ZSBmcmFtZSB0aGFuIGFkdmVydGlzZWQ6ICR7dGhpcy5qcGVnLmxlbmd0aH0vJHt0aGlzLnNpemV9YCk7XHJcbiAgICAgICAgICAgIHRoaXMuanBlZyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5yZWNlaXZpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBVZUlucHV0TW91c2VNZXNzYWdlIH0gZnJvbSBcIi4uL1VlSW5zdGFuY2VNZXNzYWdlL1VlSW5wdXRNb3VzZU1lc3NhZ2VcIjtcclxuaW1wb3J0IHsgRGF0YUNoYW5uZWxDb250cm9sbGVyIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0RhdGFDaGFubmVsQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBJVG91Y2hDb250cm9sbGVyIH0gZnJvbSBcIi4vSVRvdWNoQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBNb3VzZUJ1dHRvbiB9IGZyb20gXCIuL01vdXNlQnV0dG9uc1wiO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBBbGxvd3MgZm9yIHRoZSB1c2FnZSBvZiBmYWtlIHRvdWNoIGV2ZW50cyBhbmQgaW1wbGVtZW50cyBJVG91Y2hDb250cm9sbGVyXHJcbiAqIEBwYXJhbSBkYXRhQ2hhbm5lbENvbnRyb2xsZXIgLSBUaGUgY29udHJvbGxlciBmb3IgdGhlIERhdGEgY2hhbm5lbCBcclxuICogQHBhcmFtIHZpZGVvUGxheWVyRWxlbWVudCAtIFRoZSB2aWRlbyBwbGF5ZXIgRE9NIGVsZW1lbnQgXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRmFrZVRvdWNoQ29udHJvbGxlciBpbXBsZW1lbnRzIElUb3VjaENvbnRyb2xsZXIge1xyXG4gICAgZmluZ2VyOiBGaW5nZXI7XHJcbiAgICB1ZUlucHV0TW91c2VNZXNzYWdlOiBVZUlucHV0TW91c2VNZXNzYWdlO1xyXG4gICAgdmlkZW9QbGF5ZXJFbGVtZW50OiBIVE1MVmlkZW9FbGVtZW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhdGFDaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyLCB2aWRlb1BsYXllckVsZW1lbnQ6IEhUTUxWaWRlb0VsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLnVlSW5wdXRNb3VzZU1lc3NhZ2UgPSBuZXcgVWVJbnB1dE1vdXNlTWVzc2FnZShkYXRhQ2hhbm5lbENvbnRyb2xsZXIpO1xyXG4gICAgICAgIHRoaXMudmlkZW9QbGF5ZXJFbGVtZW50ID0gdmlkZW9QbGF5ZXJFbGVtZW50O1xyXG4gICAgICAgIGRvY3VtZW50Lm9udG91Y2hzdGFydCA9IChldjogVG91Y2hFdmVudCkgPT4gdGhpcy5vblRvdWNoU3RhcnQoZXYpO1xyXG4gICAgICAgIGRvY3VtZW50Lm9udG91Y2hlbmQgPSAoZXY6IFRvdWNoRXZlbnQpID0+IHRoaXMub25Ub3VjaEVuZChldik7XHJcbiAgICAgICAgZG9jdW1lbnQub250b3VjaG1vdmUgPSAoZXY6IFRvdWNoRXZlbnQpID0+IHRoaXMub25Ub3VjaE1vdmUoZXYpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiBhIHRvdWNoIGV2ZW50IGJlZ2lucyBcclxuICAgICAqIEBwYXJhbSB0b3VjaCAtIHRoZSBhY3RpdmF0aW5nIHRvdWNoIGV2ZW50IFxyXG4gICAgICovXHJcbiAgICBvblRvdWNoU3RhcnQodG91Y2g6IFRvdWNoRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5maW5nZXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsZXQgZmlyc3RfdG91Y2ggPSB0b3VjaC5jaGFuZ2VkVG91Y2hlc1swXTtcclxuICAgICAgICAgICAgdGhpcy5maW5nZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBJRDogZmlyc3RfdG91Y2guaWRlbnRpZmllcixcclxuICAgICAgICAgICAgICAgIFg6IGZpcnN0X3RvdWNoLmNsaWVudFggLSB0aGlzLnZpZGVvUGxheWVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgWTogZmlyc3RfdG91Y2guY2xpZW50WSAtIC0gdGhpcy52aWRlb1BsYXllckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBtb3VzZUV2ZW50ID0gbmV3IE1vdXNlRXZlbnQodG91Y2gudHlwZSwgZmlyc3RfdG91Y2gpXHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpZGVvUGxheWVyRWxlbWVudC5vbm1vdXNlZW50ZXIobW91c2VFdmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMudWVJbnB1dE1vdXNlTWVzc2FnZS5zZW5kTW91c2VEb3duKE1vdXNlQnV0dG9uLm1haW5CdXR0b24sIHRoaXMuZmluZ2VyLlgsIHRoaXMuZmluZ2VyLlkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZW4gYSB0b3VjaCBldmVudCBlbmRzIFxyXG4gICAgICogQHBhcmFtIHRvdWNoRXZlbnQgLSB0aGUgYWN0aXZhdGluZyB0b3VjaCBldmVudCBcclxuICAgICAqL1xyXG4gICAgb25Ub3VjaEVuZCh0b3VjaEV2ZW50OiBUb3VjaEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3VjaEV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0b3VjaCA9IHRvdWNoRXZlbnQuY2hhbmdlZFRvdWNoZXNbaV07XHJcblxyXG4gICAgICAgICAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gdGhpcy5maW5nZXIuSUQpIHtcclxuICAgICAgICAgICAgICAgIGxldCB4ID0gdG91Y2guY2xpZW50WCAtIHRoaXMudmlkZW9QbGF5ZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgeSA9IHRvdWNoLmNsaWVudFkgLSB0aGlzLnZpZGVvUGxheWVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVlSW5wdXRNb3VzZU1lc3NhZ2Uuc2VuZE1vdXNlVXAoTW91c2VCdXR0b24ubWFpbkJ1dHRvbiwgeCwgeSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG1vdXNlRXZlbnQgPSBuZXcgTW91c2VFdmVudCh0b3VjaEV2ZW50LnR5cGUsIHRvdWNoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb1BsYXllckVsZW1lbnQub25tb3VzZWxlYXZlKG1vdXNlRXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5nZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9uIGEgTW92ZSB0b3VjaCBldmVudCBcclxuICAgICAqIEBwYXJhbSB0b3VjaEV2ZW50IC0gdGhlIGFjdGl2YXRpbmcgdG91Y2ggZXZlbnQgXHJcbiAgICAgKi9cclxuICAgIG9uVG91Y2hNb3ZlKHRvdWNoRXZlbnQ6IFRvdWNoRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdWNoRXZlbnQudG91Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdG91Y2ggPSB0b3VjaEV2ZW50LnRvdWNoZXNbaV07XHJcbiAgICAgICAgICAgIGlmICh0b3VjaC5pZGVudGlmaWVyID09PSB0aGlzLmZpbmdlci5JRCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHggPSB0b3VjaC5jbGllbnRYIC0gdGhpcy52aWRlb1BsYXllckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuICAgICAgICAgICAgICAgIGxldCB5ID0gdG91Y2guY2xpZW50WSAtIHRoaXMudmlkZW9QbGF5ZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuICAgICAgICAgICAgICAgIHRoaXMudWVJbnB1dE1vdXNlTWVzc2FnZS5zZW5kTW91c2VNb3ZlKHgsIHksIHggLSB0aGlzLmZpbmdlci5YLCB5IC0gdGhpcy5maW5nZXIuWSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmdlci5YID0geDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZ2VyLlkgPSB5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogVGhlIGludGVyZmFjZSBmb3IgZmluZ2VyIHBvc2l0aW9uIG1hcHBpbmcgXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEZpbmdlciB7XHJcbiAgICBJRDogbnVtYmVyO1xyXG4gICAgWDogbnVtYmVyO1xyXG4gICAgWTogbnVtYmVyO1xyXG59IiwiaW1wb3J0IHsgRGF0YUNoYW5uZWxDb250cm9sbGVyIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0RhdGFDaGFubmVsQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vTG9nZ2VyL0xvZ2dlclwiO1xyXG5pbXBvcnQgeyBVZUlucHV0R2FtZVBhZE1lc3NhZ2UgfSBmcm9tIFwiLi4vVWVJbnN0YW5jZU1lc3NhZ2UvVWVJbnB1dEdhbWVQYWRNZXNzYWdlXCJcclxuXHJcbi8qKlxyXG4gKiBUaGUgY2xhc3MgdGhhdCBoYW5kbGVzIHRoZSBmdW5jdGlvbmFsaXR5IG9mIGdhbWVwYWRzIGFuZCBjb250cm9sbGVycyBcclxuICovXHJcbmV4cG9ydCBjbGFzcyBHYW1lUGFkQ29udHJvbGxlciB7XHJcbiAgICB1ZUlucHV0R2FtZVBhZE1lc3NhZ2U6IFVlSW5wdXRHYW1lUGFkTWVzc2FnZTtcclxuICAgIGNvbnRyb2xsZXJzOiBDb250cm9sbGVyW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gZGF0YUNoYW5uZWxDb250cm9sbGVyIC0gdGhlIGRhdGEgY2hhbmVsIGNvbnRyb2xsZXIgIFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhQ2hhbm5lbENvbnRyb2xsZXI6IERhdGFDaGFubmVsQ29udHJvbGxlcikge1xyXG4gICAgICAgIHRoaXMudWVJbnB1dEdhbWVQYWRNZXNzYWdlID0gbmV3IFVlSW5wdXRHYW1lUGFkTWVzc2FnZShkYXRhQ2hhbm5lbENvbnRyb2xsZXIpO1xyXG4gICAgICAgIGlmIChcIkdhbWVwYWRFdmVudFwiIGluIHdpbmRvdykge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImdhbWVwYWRjb25uZWN0ZWRcIiwgKGV2OiBHYW1lcGFkRXZlbnQpID0+IHRoaXMuZ2FtZVBhZENvbm5lY3RIYW5kbGVyKGV2KSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZ2FtZXBhZGRpc2Nvbm5lY3RlZFwiLCAoZXY6IEdhbWVwYWRFdmVudCkgPT4gdGhpcy5nYW1lUGFkRGlzY29ubmVjdEhhbmRsZXIoZXYpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKFwiV2ViS2l0R2FtZXBhZEV2ZW50XCIgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0Z2FtZXBhZGNvbm5lY3RlZFwiLCAoZXY6IEdhbWVwYWRFdmVudCkgPT4gdGhpcy5nYW1lUGFkQ29ubmVjdEhhbmRsZXIoZXYpKTtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRnYW1lcGFkZGlzY29ubmVjdGVkXCIsIChldjogR2FtZXBhZEV2ZW50KSA9PiB0aGlzLmdhbWVQYWREaXNjb25uZWN0SGFuZGxlcihldikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25uZWN0cyB0aGUgZ2FtZXBhZCBoYW5kbGVyIFxyXG4gICAgICogQHBhcmFtIGdhbWVQYWRFdmVudCAtIHRoZSBhY3RpdmF0aW5nIGdhbWVwYWQgZXZlbnQgXHJcbiAgICAgKi9cclxuICAgIGdhbWVQYWRDb25uZWN0SGFuZGxlcihnYW1lUGFkRXZlbnQ6IEdhbWVwYWRFdmVudCkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJHYW1lcGFkIGNvbm5lY3QgaGFuZGxlclwiLCA2KTtcclxuICAgICAgICBsZXQgZ2FtZXBhZCA9IGdhbWVQYWRFdmVudC5nYW1lcGFkO1xyXG5cclxuICAgICAgICBsZXQgdGVtcDogQ29udHJvbGxlciA9IHtcclxuICAgICAgICAgICAgY3VycmVudFN0YXRlOiBnYW1lcGFkLFxyXG4gICAgICAgICAgICBwcmV2U3RhdGU6IGdhbWVwYWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJzLnB1c2godGVtcCk7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyc1tnYW1lcGFkLmluZGV4XS5jdXJyZW50U3RhdGUgPSBnYW1lcGFkO1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlcnNbZ2FtZXBhZC5pbmRleF0ucHJldlN0YXRlID0gZ2FtZXBhZDtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiZ2FtZXBhZDogXCIgKyBnYW1lcGFkLmlkICsgXCIgY29ubmVjdGVkXCIsIDYpO1xyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy51cGRhdGVTdGF0dXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNjb25uZWN0cyB0aGUgZ2FtZXBhZCBoYW5kbGVyIFxyXG4gICAgICogQHBhcmFtIGdhbWVQYWRFdmVudCAtIHRoZSBhY3RpdmF0aW5nIGdhbWVwYWQgZXZlbnQgXHJcbiAgICAgKi9cclxuICAgIGdhbWVQYWREaXNjb25uZWN0SGFuZGxlcihnYW1lUGFkRXZlbnQ6IEdhbWVwYWRFdmVudCkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJHYW1lcGFkIGRpc2Nvbm5lY3QgaGFuZGxlclwiLCA2KTtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiZ2FtZXBhZDogXCIgKyBnYW1lUGFkRXZlbnQuZ2FtZXBhZC5pZCArIFwiIGRpc2Nvbm5lY3RlZFwiLCA2KTtcclxuICAgICAgICBkZWxldGUgdGhpcy5jb250cm9sbGVyc1tnYW1lUGFkRXZlbnQuZ2FtZXBhZC5pbmRleF07XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVycyA9IHRoaXMuY29udHJvbGxlcnMuZmlsdGVyKGNvbnRyb2xsZXIgPT4gY29udHJvbGxlciAhPT0gdW5kZWZpbmVkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNjYW4gZm9yIGNvbm5lY3RlZCBnYW1lcGFkcyBcclxuICAgICAqL1xyXG4gICAgc2NhbkdhbWVQYWRzKCkge1xyXG4gICAgICAgIHZhciBnYW1lcGFkcyA9ICgobmF2aWdhdG9yLmdldEdhbWVwYWRzKSA/IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpIDogW10pOy8vICA6IChuYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHMgPyBuYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHMoKSA6IFtdKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdhbWVwYWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChnYW1lcGFkc1tpXSAmJiAoZ2FtZXBhZHNbaV0uaW5kZXggaW4gdGhpcy5jb250cm9sbGVycykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlcnNbZ2FtZXBhZHNbaV0uaW5kZXhdLmN1cnJlbnRTdGF0ZSA9IGdhbWVwYWRzW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgc3RhdHVzIG9mIHRoZSBnYW1lcGFkIGFuZCBzZW5kcyB0aGUgaW5wdXRzICBcclxuICAgICAqL1xyXG4gICAgdXBkYXRlU3RhdHVzKCkge1xyXG4gICAgICAgIHRoaXMuc2NhbkdhbWVQYWRzKCk7XHJcbiAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIG11bHRpcGxlIGNvbnRyb2xsZXJzIGluIHRoZSBjYXNlIHRoZSBtdWx0aXBsZSBnYW1lcGFkcyBhcmUgY29ubmVjdGVkXHJcblxyXG4gICAgICAgIGZvciAobGV0IGNvbnRyb2xsZXIgb2YgdGhpcy5jb250cm9sbGVycykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50U3RhdGUgPSBjb250cm9sbGVyLmN1cnJlbnRTdGF0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRyb2xsZXIuY3VycmVudFN0YXRlLmJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudEJ1dHRvbiA9IGNvbnRyb2xsZXIuY3VycmVudFN0YXRlLmJ1dHRvbnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByZXZpb3VzQnV0dG9uID0gY29udHJvbGxlci5wcmV2U3RhdGUuYnV0dG9uc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQnV0dG9uIDYgaXMgYWN0dWFsbHkgdGhlIGxlZnQgdHJpZ2dlciwgc2VuZCBpdCB0byBVRSBhcyBhbiBhbmFsb2cgYXhpc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEJ1dHRvbiA3IGlzIGFjdHVhbGx5IHRoZSByaWdodCB0cmlnZ2VyLCBzZW5kIGl0IHRvIFVFIGFzIGFuIGFuYWxvZyBheGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJlc3QgYXJlIG5vcm1hbCBidXR0b25zLiBUcmVhdCBhcyBzdWNoXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRCdXR0b24ucHJlc3NlZCAmJiAhcHJldmlvdXNCdXR0b24ucHJlc3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXcgcHJlc3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gNikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51ZUlucHV0R2FtZVBhZE1lc3NhZ2Uuc2VuZENvbnRyb2xsZXJBeGlzTW92ZShjdXJyZW50U3RhdGUuaW5kZXgsIDUsIGN1cnJlbnRCdXR0b24udmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT0gNykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51ZUlucHV0R2FtZVBhZE1lc3NhZ2Uuc2VuZENvbnRyb2xsZXJBeGlzTW92ZShjdXJyZW50U3RhdGUuaW5kZXgsIDYsIGN1cnJlbnRCdXR0b24udmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51ZUlucHV0R2FtZVBhZE1lc3NhZ2Uuc2VuZENvbnRyb2xsZXJCdXR0b25QcmVzc2VkKGN1cnJlbnRTdGF0ZS5pbmRleCwgaSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghY3VycmVudEJ1dHRvbi5wcmVzc2VkICYmIHByZXZpb3VzQnV0dG9uLnByZXNzZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVsZWFzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSA2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVlSW5wdXRHYW1lUGFkTWVzc2FnZS5zZW5kQ29udHJvbGxlckF4aXNNb3ZlKGN1cnJlbnRTdGF0ZS5pbmRleCwgNSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PSA3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVlSW5wdXRHYW1lUGFkTWVzc2FnZS5zZW5kQ29udHJvbGxlckF4aXNNb3ZlKGN1cnJlbnRTdGF0ZS5pbmRleCwgNiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVlSW5wdXRHYW1lUGFkTWVzc2FnZS5zZW5kQ29udHJvbGxlckJ1dHRvblJlbGVhc2VkKGN1cnJlbnRTdGF0ZS5pbmRleCwgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRCdXR0b24ucHJlc3NlZCAmJiBwcmV2aW91c0J1dHRvbi5wcmVzc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcGVhdCBwcmVzcyAvIGhvbGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gNikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51ZUlucHV0R2FtZVBhZE1lc3NhZ2Uuc2VuZENvbnRyb2xsZXJBeGlzTW92ZShjdXJyZW50U3RhdGUuaW5kZXgsIDUsIGN1cnJlbnRCdXR0b24udmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT0gNykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51ZUlucHV0R2FtZVBhZE1lc3NhZ2Uuc2VuZENvbnRyb2xsZXJBeGlzTW92ZShjdXJyZW50U3RhdGUuaW5kZXgsIDYsIGN1cnJlbnRCdXR0b24udmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51ZUlucHV0R2FtZVBhZE1lc3NhZ2Uuc2VuZENvbnRyb2xsZXJCdXR0b25QcmVzc2VkKGN1cnJlbnRTdGF0ZS5pbmRleCwgaSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTGFzdCBjYXNlIGlzIGJ1dHRvbiBpc24ndCBjdXJyZW50bHkgcHJlc3NlZCBhbmQgd2Fzbid0IHByZXNzZWQgYmVmb3JlLiBUaGlzIGRvZXNuJ3QgbmVlZCBhbiBlbHNlIGJsb2NrXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50U3RhdGUuYXhlcy5sZW5ndGg7IGkgKz0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB4ID0gcGFyc2VGbG9hdChjdXJyZW50U3RhdGUuYXhlc1tpXS50b0ZpeGVkKDQpKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL3czYy5naXRodWIuaW8vZ2FtZXBhZC8jcmVtYXBwaW5nIEdhbWVwYWQgYnJvd3NlciBzaWRlIHN0YW5kYXJkIG1hcHBpbmcgaGFzIHBvc2l0aXZlIGRvd24sIG5lZ2F0aXZlIHVwLiBUaGlzIGlzIGRvd25yaWdodCBkaXNndXN0aW5nLiBTbyB3ZSBmaXggaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHkgPSAtcGFyc2VGbG9hdChjdXJyZW50U3RhdGUuYXhlc1tpICsgMV0udG9GaXhlZCg0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGVmdCBzdGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBheGlzIDEgPSBsZWZ0IGhvcml6b250YWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51ZUlucHV0R2FtZVBhZE1lc3NhZ2Uuc2VuZENvbnRyb2xsZXJBeGlzTW92ZShjdXJyZW50U3RhdGUuaW5kZXgsIDEsIHgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBheGlzIDIgPSBsZWZ0IHZlcnRpY2FsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudWVJbnB1dEdhbWVQYWRNZXNzYWdlLnNlbmRDb250cm9sbGVyQXhpc01vdmUoY3VycmVudFN0YXRlLmluZGV4LCAyLCB5KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmlnaHQgc3RpY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXhpcyAzID0gcmlnaHQgaG9yaXpvbnRhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVlSW5wdXRHYW1lUGFkTWVzc2FnZS5zZW5kQ29udHJvbGxlckF4aXNNb3ZlKGN1cnJlbnRTdGF0ZS5pbmRleCwgMywgeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF4aXMgNCA9IHJpZ2h0IHZlcnRpY2FsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudWVJbnB1dEdhbWVQYWRNZXNzYWdlLnNlbmRDb250cm9sbGVyQXhpc01vdmUoY3VycmVudFN0YXRlLmluZGV4LCA0LCB5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJzW2N1cnJlbnRTdGF0ZS5pbmRleF0ucHJldlN0YXRlID0gY3VycmVudFN0YXRlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkVycm9yKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiT2ggZGVhciB0aGUgZ2FtZXBhZCBwb2xsIGxvb3AgaGFzIHRocm93biBhbiBlcnJvclwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMudXBkYXRlU3RhdHVzKCkpO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBpbnRlcmZhY2UgZm9yIGNvbnRyb2xsZXJzIFxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb250cm9sbGVyIHtcclxuICAgIGN1cnJlbnRTdGF0ZTogR2FtZXBhZDtcclxuICAgIHByZXZTdGF0ZTogR2FtZXBhZDtcclxufSIsImltcG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXJcIlxyXG5cclxuLyoqXHJcbiAqIFRoZSBDbGFzcyB0aGF0IGhhbmRsZXMgZ3lybyBpbnB1dCBcclxuICovXHJcbmV4cG9ydCBjbGFzcyBHeXJvQ29udHJvbGxlciB7XHJcbiBcclxuICAgIGRhdGFDaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyO1xyXG4gXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhQ2hhbm5lbENvbnRyb2xsZXI6IERhdGFDaGFubmVsQ29udHJvbGxlcikge1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyID0gZGF0YUNoYW5uZWxDb250cm9sbGVyO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IEZha2VUb3VjaENvbnRyb2xsZXIgfSBmcm9tIFwiLi9GYWtlVG91Y2hDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IEtleWJvYXJkQ29udHJvbGxlciB9IGZyb20gXCIuL0tleWJvYXJkQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBNb3VzZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9Nb3VzZUNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgSVRvdWNoQ29udHJvbGxlciB9IGZyb20gXCIuL0lUb3VjaENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgVG91Y2hDb250cm9sbGVyIH0gZnJvbSBcIi4vVG91Y2hDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IEdhbWVQYWRDb250cm9sbGVyIH0gZnJvbSBcIi4vR2FtZXBhZENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgQ29udHJvbFNjaGVtZVR5cGUgfSBmcm9tIFwiLi4vQ29uZmlnL0NvbmZpZ1wiO1xyXG5pbXBvcnQgeyBWaWRlb1BsYXllck1vdXNlTG9ja2VkRXZlbnRzIH0gZnJvbSBcIi4uL1ZpZGVvUGxheWVyL1ZpZGVvUGxheWVyTW91c2VMb2NrZWRFdmVudHNcIjtcclxuaW1wb3J0IHsgVmlkZW9QbGF5ZXJNb3VzZUhvdmVyRXZlbnRzIH0gZnJvbSBcIi4uL1ZpZGVvUGxheWVyL1ZpZGVvUGxheWVyTW91c2VIb3ZlckV2ZW50c1wiO1xyXG5pbXBvcnQgeyBHeXJvQ29udHJvbGxlciB9IGZyb20gXCIuL0d5cm9Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7IElWaWRlb1BsYXllciB9IGZyb20gXCIuLi9WaWRlb1BsYXllci9JVmlkZW9QbGF5ZXJcIjtcclxuaW1wb3J0IHsgSVZpZGVvUGxheWVyTW91c2VJbnRlcmZhY2UgfSBmcm9tIFwiLi4vVmlkZW9QbGF5ZXIvVmlkZW9QbGF5ZXJNb3VzZUludGVyZmFjZVwiO1xyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vTG9nZ2VyL0xvZ2dlclwiO1xyXG5cclxuLyoqXHJcbiAqIENsYXNzIGZvciBoYW5kbGluZyBpbnB1dHMgZm9yIG1vdXNlIGFuZCBrZXlib2FyZCAgIFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIElucHV0Q29udHJvbGxlciB7XHJcblxyXG4gICAgdmlkZW9FbGVtZW50UHJvdmlkZXI6IElWaWRlb1BsYXllcjtcclxuICAgIGRhdGFDaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyO1xyXG4gICAga2V5Ym9hcmRDb250cm9sbGVyOiBLZXlib2FyZENvbnRyb2xsZXI7XHJcbiAgICBtb3VzZUNvbnRyb2xsZXI6IE1vdXNlQ29udHJvbGxlcjtcclxuICAgIHRvdWNoQ29udHJvbGxlcjogSVRvdWNoQ29udHJvbGxlclxyXG4gICAgZmFrZVRvdWNoQ29udHJvbGxlcjogRmFrZVRvdWNoQ29udHJvbGxlcjtcclxuICAgIGdhbWVQYWRDb250cm9sbGVyOiBHYW1lUGFkQ29udHJvbGxlcjtcclxuICAgIGd5cm9Db250cm9sbGVyOiBHeXJvQ29udHJvbGxlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIGRhdGFDaGFubmVsQ29udHJvbGxlciAtIHRoZSBkYXRhIGNoYW5uZWwgY29udHJvbGxlclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhQ2hhbm5lbENvbnRyb2xsZXI6IERhdGFDaGFubmVsQ29udHJvbGxlciwgdmlkZW9FbGVtZW50UHJvdmlkZXI6IElWaWRlb1BsYXllcikge1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyID0gZGF0YUNoYW5uZWxDb250cm9sbGVyO1xyXG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIgPSB2aWRlb0VsZW1lbnRQcm92aWRlcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlZ2lzdGVycyBicm93c2VyIGtleSBldmVudHMgIFxyXG4gICAgICogQHBhcmFtIHN1cHByZXNzQnJvd3NlcktleXMgLSBvcHRpb24gdG8gc3VwcHJlc3MgYnJvd3NlciBrZXlzIFxyXG4gICAgICovXHJcbiAgICByZWdpc3RlcktleUJvYXJkKHN1cHByZXNzQnJvd3NlcktleXM6IGJvb2xlYW4pIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiUmVnaXN0ZXIgS2V5Ym9hcmQgRXZlbnRzXCIsIDcpO1xyXG4gICAgICAgIHRoaXMua2V5Ym9hcmRDb250cm9sbGVyID0gbmV3IEtleWJvYXJkQ29udHJvbGxlcih0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlciwgc3VwcHJlc3NCcm93c2VyS2V5cyk7XHJcbiAgICAgICAgdGhpcy5rZXlib2FyZENvbnRyb2xsZXIucmVnaXN0ZXJLZXlCb2FyZEV2ZW50cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmVnaXN0ZXIgbW91c2UgZXZlbnRzIGJhc2VkIG9uIGEgY29udHJvbCB0eXBlIFxyXG4gICAgICogQHBhcmFtIGNvbnRyb2xTY2hlbWUgLSBpZiB0aGUgbW91c2UgaXMgZWl0aGVyIGhvdmVyaW5nIG9yIGxvY2tlZCBcclxuICAgICAqL1xyXG4gICAgcmVnaXN0ZXJNb3VzZShjb250cm9sU2NoZW1lOiBDb250cm9sU2NoZW1lVHlwZSkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJSZWdpc3RlciBNb3VzZSBFdmVudHNcIiwgNyk7XHJcblxyXG4gICAgICAgIC8vIGNhc3RpbmcgdGhlc2UgYXMgYW55IGFzIHRoZXkgZG8gbm90IGhhdmUgdGhlIG1veiBhdHRyaWJ1dGVzIHdlIHJlcXVpcmVcclxuICAgICAgICBsZXQgdmlkZW9FbGVtZW50ID0gdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKSBhcyBhbnk7XHJcbiAgICAgICAgbGV0IHZpZGVvSW5wdXRCaW5kaW5nczogSVZpZGVvUGxheWVyTW91c2VJbnRlcmZhY2U7XHJcblxyXG4gICAgICAgIHRoaXMubW91c2VDb250cm9sbGVyID0gbmV3IE1vdXNlQ29udHJvbGxlcih0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlciwgdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlcik7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoY29udHJvbFNjaGVtZSkge1xyXG4gICAgICAgICAgICBjYXNlIENvbnRyb2xTY2hlbWVUeXBlLkxvY2tlZE1vdXNlOlxyXG5cclxuICAgICAgICAgICAgICAgIHZpZGVvSW5wdXRCaW5kaW5ncyA9IG5ldyBWaWRlb1BsYXllck1vdXNlTG9ja2VkRXZlbnRzKHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIsIHRoaXMubW91c2VDb250cm9sbGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2aWRlb0VsZW1lbnQub25jbGljayA9IChldmVudDogTW91c2VFdmVudCkgPT4gdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5zZXRDbGlja0FjdGlvbnMoZXZlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsb2NrY2hhbmdlJywgKCkgPT4gdmlkZW9JbnB1dEJpbmRpbmdzLmhhbmRsZUxvY2tTdGF0ZUNoYW5nZSgpLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3pwb2ludGVybG9ja2NoYW5nZScsICgpID0+IHZpZGVvSW5wdXRCaW5kaW5ncy5oYW5kbGVMb2NrU3RhdGVDaGFuZ2UoKSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgQ29udHJvbFNjaGVtZVR5cGUuSG92ZXJpbmdNb3VzZTpcclxuICAgICAgICAgICAgICAgIHZpZGVvSW5wdXRCaW5kaW5ncyA9IG5ldyBWaWRlb1BsYXllck1vdXNlSG92ZXJFdmVudHModGhpcy5tb3VzZUNvbnRyb2xsZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgb25jbGljayB0byBudWxsIGlmIHRoZSBpbnB1dCBiaW5kaW5ncyB3ZXJlIHByZXZpb3VzbHkgc2V0IHRvIHBvaW50ZXJsb2NrXHJcbiAgICAgICAgICAgICAgICB2aWRlb0VsZW1lbnQub25jbGljayA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSAobW91c2VFdmVudCkgPT4gdmlkZW9JbnB1dEJpbmRpbmdzLmhhbmRsZU1vdXNlTW92ZShtb3VzZUV2ZW50KTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50Lm9ud2hlZWwgPSAobW91c2VFdmVudCkgPT4gdmlkZW9JbnB1dEJpbmRpbmdzLmhhbmRsZU1vdXNlV2hlZWwobW91c2VFdmVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmlkZW9FbGVtZW50Lm9ubW91c2Vkb3duID0gKG1vdXNlRXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZpZGVvSW5wdXRCaW5kaW5ncy5oYW5kbGVNb3VzZURvd24obW91c2VFdmVudCk7XHJcbiAgICAgICAgICAgICAgICB2aWRlb0VsZW1lbnQub25tb3VzZXVwID0gKG1vdXNlRXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZpZGVvSW5wdXRCaW5kaW5ncy5oYW5kbGVNb3VzZVVwKG1vdXNlRXZlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuSW5mbyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcInVua25vd24gQ29udHJvbCBTY2hlbWUgVHlwZSBEZWZhdWx0aW5nIHRvIExvY2tlZCBNb3VzZSBFdmVudHNcIik7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlZ2lzdGVyIHRvdWNoIGV2ZW50cyBcclxuICAgICAqIEBwYXJhbSBmYWtlTW91c2VUb3VjaCAtIHRoZSBmYWtlZCBtb3VzZSB0b3VjaCBldmVudCBcclxuICAgICAqIEBwYXJhbSBwbGF5ZXJFbGVtZW50IC0gdGhlIHBsYXllciBlbGVtZW50cyBET00gXHJcbiAgICAgKi9cclxuICAgIHJlZ2lzdGVyVG91Y2goZmFrZU1vdXNlVG91Y2g6IGJvb2xlYW4sIHBsYXllckVsZW1lbnQ6IEhUTUxWaWRlb0VsZW1lbnQpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiUmVnaXN0ZXJpbmcgVG91Y2hcIiwgNik7XHJcbiAgICAgICAgaWYgKGZha2VNb3VzZVRvdWNoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG91Y2hDb250cm9sbGVyID0gbmV3IEZha2VUb3VjaENvbnRyb2xsZXIodGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIsICg8SFRNTFZpZGVvRWxlbWVudD5wbGF5ZXJFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidmlkZW9cIilbMF0pKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRvdWNoQ29udHJvbGxlciA9IG5ldyBUb3VjaENvbnRyb2xsZXIodGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIsIHBsYXllckVsZW1lbnQsIHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlZ2lzdGVycyBhIGdhbWVwYWQgXHJcbiAgICAgKi9cclxuICAgIHJlZ2lzdGVyR2FtZVBhZCgpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiUmVnaXN0ZXIgR2FtZSBQYWRcIiwgNyk7XHJcbiAgICAgICAgdGhpcy5nYW1lUGFkQ29udHJvbGxlciA9IG5ldyBHYW1lUGFkQ29udHJvbGxlcih0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlcik7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlZ2lzdGVycyBhIGd5cm8gZGV2aWNlIFxyXG4gICAgICovXHJcbiAgICByZWdpc3Rlckd5cm8oKSB7XHJcbiAgICAgICAgdGhpcy5neXJvQ29udHJvbGxlciA9IG5ldyBHeXJvQ29udHJvbGxlcih0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlcik7XHJcblxyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IFNwZWNpYWxLZXlDb2RlcyB9IGZyb20gXCIuL1NwZWNpYWxLZXlDb2Rlc1wiO1xyXG5pbXBvcnQgeyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IFVlSW5wdXRLZXlib2FyZE1lc3NhZ2UgfSBmcm9tIFwiLi4vVWVJbnN0YW5jZU1lc3NhZ2UvVWVJbnB1dEtleWJvYXJkTWVzc2FnZVwiO1xyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vTG9nZ2VyL0xvZ2dlclwiO1xyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgdGhlIEtleWJvYXJkIElucHV0cyBmb3IgdGhlIGRvY3VtZW50XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgS2V5Ym9hcmRDb250cm9sbGVyIHtcclxuICAgIHVlSW5wdXRLZXlCb2FyZE1lc3NhZ2U6IFVlSW5wdXRLZXlib2FyZE1lc3NhZ2U7XHJcbiAgICBzdXBwcmVzc0Jyb3dzZXJLZXlzOiBib29sZWFuO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gZGF0YUNoYW5uZWxDb250cm9sbGVyIC0gRGF0YSBDaGFubmVsIENvbnRyb2xsZXJcclxuICAgICAqIEBwYXJhbSBzdXBwcmVzc0Jyb3dzZXJLZXlzIC0gU3VwcHJlc3MgQnJvd3NlciBLZXlzXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGRhdGFDaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyLCBzdXBwcmVzc0Jyb3dzZXJLZXlzOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy51ZUlucHV0S2V5Qm9hcmRNZXNzYWdlID0gbmV3IFVlSW5wdXRLZXlib2FyZE1lc3NhZ2UoZGF0YUNoYW5uZWxDb250cm9sbGVyKTtcclxuICAgICAgICB0aGlzLnN1cHByZXNzQnJvd3NlcktleXMgPSBzdXBwcmVzc0Jyb3dzZXJLZXlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXJzIGRvY3VtZW50IGtleWJvYXJkIGV2ZW50cyB3aXRoIHRoZSBjb250cm9sbGVyXHJcbiAgICAgKi9cclxuICAgIHJlZ2lzdGVyS2V5Qm9hcmRFdmVudHMoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQub25rZXlkb3duID0gKGV2OiBLZXlib2FyZEV2ZW50KSA9PiB0aGlzLmhhbmRsZU9uS2V5RG93bihldik7XHJcbiAgICAgICAgZG9jdW1lbnQub25rZXl1cCA9IChldjogS2V5Ym9hcmRFdmVudCkgPT4gdGhpcy5oYW5kbGVPbktleVVwKGV2KTtcclxuXHJcbiAgICAgICAgLy9UaGlzIGhhcyBiZWVuIGRlcHJlY2F0ZWQgYXMgYXQgSnVuIDEzIDIwMjFcclxuICAgICAgICBkb2N1bWVudC5vbmtleXByZXNzID0gKGV2OiBLZXlib2FyZEV2ZW50KSA9PiB0aGlzLmhhbmRsZU9uS2V5UHJlc3MoZXYpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyBXaGVuIGEga2V5IGlzIGRvd25cclxuICAgICAqIEBwYXJhbSBrZXlib2FyZEV2ZW50IC0gS2V5Ym9hcmQgZXZlbnQgXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZU9uS2V5RG93bihrZXlib2FyZEV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcImhhbmRsZU9uS2V5RG93blwiLCA2KTtcclxuICAgICAgICB0aGlzLnVlSW5wdXRLZXlCb2FyZE1lc3NhZ2Uuc2VuZEtleURvd24odGhpcy5nZXRLZXljb2RlKGtleWJvYXJkRXZlbnQpLCBrZXlib2FyZEV2ZW50LnJlcGVhdCk7XHJcbiAgICAgICAgLyogdGhpcyBuZWVkcyB0byBiZSB0ZXN0ZWQgYnV0IGl0IGlzIGJlbGlldmVkIHRoYXQgdGhpcyBpcyBub3QgbmVlZGVkKi9cclxuICAgICAgICAvLyBiYWNrU3BhY2UgaXMgbm90IGNvbnNpZGVyZWQgYSBrZXlwcmVzcyBpbiBKYXZhU2NyaXB0IGJ1dCB3ZSBuZWVkIGl0XHJcbiAgICAgICAgLy8gdG8gYmUgc28gY2hhcmFjdGVycyBtYXkgYmUgZGVsZXRlZCBpbiBhIFVFNCB0ZXh0IGVudHJ5IGZpZWxkLlxyXG4gICAgICAgIGlmIChrZXlib2FyZEV2ZW50LmtleUNvZGUgPT09IFNwZWNpYWxLZXlDb2Rlcy5iYWNrU3BhY2UpIHtcclxuICAgICAgICAgICAgLy9sZXQgdGVtcDogS2V5Ym9hcmRFdmVudCA9IHtjaGFyQ29kZTogU3BlY2lhbEtleUNvZGVzLmJhY2tTcGFjZX07XHJcbiAgICAgICAgICAgIC8vZG9jdW1lbnQub25rZXlwcmVzcyh7IGNoYXJDb2RlOiBTcGVjaWFsS2V5Q29kZXMuYmFja1NwYWNlIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3VwcHJlc3NCcm93c2VyS2V5cyAmJiB0aGlzLmlzS2V5Q29kZUJyb3dzZXJLZXkoa2V5Ym9hcmRFdmVudC5rZXlDb2RlKSkge1xyXG4gICAgICAgICAgICBrZXlib2FyZEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogaGFuZGxlcyB3aGVuIGEga2V5IGlzIHVwXHJcbiAgICAgKiBAcGFyYW0ga2V5Ym9hcmRFdmVudCAtIEtleWJvYXJkIGV2ZW50XHJcbiAgICAgKi9cclxuICAgIGhhbmRsZU9uS2V5VXAoa2V5Ym9hcmRFdmVudDogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJoYW5kbGVPbktleVVwXCIsIDYpO1xyXG4gICAgICAgIHRoaXMudWVJbnB1dEtleUJvYXJkTWVzc2FnZS5zZW5kS2V5VXAodGhpcy5nZXRLZXljb2RlKGtleWJvYXJkRXZlbnQpKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3VwcHJlc3NCcm93c2VyS2V5cyAmJiB0aGlzLmlzS2V5Q29kZUJyb3dzZXJLZXkoa2V5Ym9hcmRFdmVudC5rZXlDb2RlKSkge1xyXG4gICAgICAgICAgICBrZXlib2FyZEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGVuIGEga2V5IGlzIHByZXNzXHJcbiAgICAgKiBAcGFyYW0ga2V5Ym9hcmQgLSBLZXlib2FyZCBFdmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVPbktleVByZXNzKGtleWJvYXJkOiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcImhhbmRsZU9ua2V5cHJlc3NcIiwgNik7XHJcbiAgICAgICAgdGhpcy51ZUlucHV0S2V5Qm9hcmRNZXNzYWdlLnNlbmRLZXlQcmVzcyhrZXlib2FyZC5jaGFyQ29kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBLZXljb2RlIG9mIHRoZSBLZXkgcHJlc3NlZFxyXG4gICAgICogQHBhcmFtIGtleWJvYXJkRXZlbnQgLSBLZXkgYm9hcmQgRXZlbnRcclxuICAgICAqIEByZXR1cm5zIHRoZSBrZXkgY29kZSBvZiB0aGUgS2V5XHJcbiAgICAgKi9cclxuICAgIGdldEtleWNvZGUoa2V5Ym9hcmRFdmVudDogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIC8vTmVlZCB0byBtb3ZlIHRoaXMgdG8gYSBuZXdlciB2ZXJzaW9uIHVzaW5nIGtleWJvYXJkIGV2ZW50IGxvY2F0aW9uLiBhcyBrZXlib2FyZEV2ZW50LmtleWNvZGUgaXMgZGVwcmVjYXRlZFxyXG5cclxuICAgICAgICBpZiAoa2V5Ym9hcmRFdmVudC5rZXlDb2RlID09PSBTcGVjaWFsS2V5Q29kZXMuc2hpZnQgJiYga2V5Ym9hcmRFdmVudC5jb2RlID09PSAnU2hpZnRSaWdodCcpIHJldHVybiBTcGVjaWFsS2V5Q29kZXMucmlnaHRTaGlmdDtcclxuICAgICAgICBlbHNlIGlmIChrZXlib2FyZEV2ZW50LmtleUNvZGUgPT09IFNwZWNpYWxLZXlDb2Rlcy5jb250cm9sICYmIGtleWJvYXJkRXZlbnQuY29kZSA9PT0gJ0NvbnRyb2xSaWdodCcpIHJldHVybiBTcGVjaWFsS2V5Q29kZXMucmlnaHRDb250cm9sO1xyXG4gICAgICAgIGVsc2UgaWYgKGtleWJvYXJkRXZlbnQua2V5Q29kZSA9PT0gU3BlY2lhbEtleUNvZGVzLmFsdCAmJiBrZXlib2FyZEV2ZW50LmNvZGUgPT09ICdBbHRSaWdodCcpIHJldHVybiBTcGVjaWFsS2V5Q29kZXMucmlnaHRBbHQ7XHJcbiAgICAgICAgZWxzZSByZXR1cm4ga2V5Ym9hcmRFdmVudC5rZXlDb2RlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnJvd3NlciBrZXlzIGRvIG5vdCBoYXZlIGEgY2hhckNvZGUgc28gd2Ugb25seSBuZWVkIHRvIHRlc3Qga2V5Q29kZS5cclxuICAgICAqL1xyXG4gICAgaXNLZXlDb2RlQnJvd3NlcktleShrZXlDb2RlOiBudW1iZXIpIHtcclxuICAgICAgICAvLyBGdW5jdGlvbiBrZXlzIG9yIHRhYiBrZXkuXHJcbiAgICAgICAgcmV0dXJuIGtleUNvZGUgPj0gMTEyICYmIGtleUNvZGUgPD0gMTIzIHx8IGtleUNvZGUgPT09IDk7XHJcbiAgICB9XHJcbn1cclxuLyogNTQ1NzUyNGY0ZDRkICovIiwiLyoqXHJcbiAqIE1vdXNlIEJ1dHRvbiBEYXRhXHJcbiAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTW91c2VFdmVudC9idXR0b259XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTW91c2VCdXR0b24ge1xyXG5cdHN0YXRpYyBtYWluQnV0dG9uID0gMDtcdFx0XHQvLyBMZWZ0IGJ1dHRvbi5cclxuXHRzdGF0aWMgYXV4aWxpYXJ5QnV0dG9uID0gMTtcdFx0Ly8gV2hlZWwgYnV0dG9uLlxyXG5cdHN0YXRpYyBzZWNvbmRhcnlCdXR0b24gPSAyO1x0XHQvLyBSaWdodCBidXR0b24uXHJcblx0c3RhdGljIGZvdXJ0aEJ1dHRvbiA9IDM7XHRcdC8vIEJyb3dzZXIgQmFjayBidXR0b24uXHJcblx0c3RhdGljIGZpZnRoQnV0dG9uID0gNDtcdFx0XHQvLyBCcm93c2VyIEZvcndhcmQgYnV0dG9uLlxyXG59XHJcblxyXG4vKipcclxuICogTW91c2UgQnV0dG9uIE1hc2sgRGF0YVxyXG4gKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL01vdXNlRXZlbnQvYnV0dG9uc31cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNb3VzZUJ1dHRvbnNNYXNrIHtcclxuXHRzdGF0aWMgcHJpbWFyeUJ1dHRvbiA9IDE7XHRcdC8vIExlZnQgYnV0dG9uLlxyXG5cdHN0YXRpYyBzZWNvbmRhcnlCdXR0b24gPSAyO1x0XHQvLyBSaWdodCBidXR0b24uXHJcblx0c3RhdGljIGF1eGlsaWFyeUJ1dHRvbiA9IDQ7XHRcdC8vIFdoZWVsIGJ1dHRvbi5cclxuXHRzdGF0aWMgZm91cnRoQnV0dG9uID0gODtcdFx0Ly8gQnJvd3NlciBCYWNrIGJ1dHRvbi5cclxuXHRzdGF0aWMgZmlmdGhCdXR0b24gPSAxNjtcdFx0Ly8gQnJvd3NlciBGb3J3YXJkIGJ1dHRvbi5cclxufSIsImltcG9ydCB7IFVlSW5wdXRNb3VzZU1lc3NhZ2UgfSBmcm9tIFwiLi4vVWVJbnN0YW5jZU1lc3NhZ2UvVWVJbnB1dE1vdXNlTWVzc2FnZVwiO1xyXG5pbXBvcnQgeyBNb3VzZUJ1dHRvbnNNYXNrLCBNb3VzZUJ1dHRvbiB9IGZyb20gXCIuL01vdXNlQnV0dG9uc1wiO1xyXG5pbXBvcnQgeyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IE5vcm1hbGlzZUFuZFF1YW50aXNlU2lnbmVkLCBVbnF1YW50aXNlZEFuZERlbm9ybWFsaXNlVW5zaWduZWQsIE5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQgfSBmcm9tIFwiLi9Db29yZGluYXRlRGF0YVwiXHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IElWaWRlb1BsYXllciB9IGZyb20gXCIuLi9WaWRlb1BsYXllci9JVmlkZW9QbGF5ZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHRoZSBNb3VzZSBJbnB1dHMgZm9yIHRoZSBkb2N1bWVudFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1vdXNlQ29udHJvbGxlciB7XHJcblxyXG5cdHJlYWRvbmx5IHVuc2lnbmVkT3V0T2ZSYW5nZTogbnVtYmVyID0gNjU1MzU7XHJcblx0cmVhZG9ubHkgc2lnbmVkT3V0T2ZSYW5nZTogbnVtYmVyID0gMzI3Njc7XHJcblxyXG5cdHVlSW5wdXRNb3VzZU1lc3NhZ2U6IFVlSW5wdXRNb3VzZU1lc3NhZ2U7XHJcblx0dmlkZW9FbGVtZW50UHJvdmlkZXI6IElWaWRlb1BsYXllcjtcclxuXHJcblx0cHJpbnRJbnB1dHM6IGJvb2xlYW47XHJcblxyXG5cdC8qKlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSBkYXRhQ2hhbm5lbENvbnRyb2xsZXIgLSBEYXRhIENoYW5uZWwgQ29udHJvbGxlclxyXG5cdCAqL1xyXG5cdGNvbnN0cnVjdG9yKGRhdGFDaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyLCB2aWRlb0VsZW1lbnRQcm92aWRlcjogSVZpZGVvUGxheWVyKSB7XHJcblx0XHR0aGlzLnByaW50SW5wdXRzID0gZmFsc2U7XHJcblx0XHR0aGlzLnVlSW5wdXRNb3VzZU1lc3NhZ2UgPSBuZXcgVWVJbnB1dE1vdXNlTWVzc2FnZShkYXRhQ2hhbm5lbENvbnRyb2xsZXIpO1xyXG5cdFx0dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlciA9IHZpZGVvRWxlbWVudFByb3ZpZGVyO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlIHdoZW4gYSBtb3VzZSBidXR0b24gaXMgcmVsZWFzZWRcclxuXHQgKiBAcGFyYW0gYnV0dG9ucyAtIE1vdXNlIEJ1dHRvblxyXG5cdCAqIEBwYXJhbSBYIC0gTW91c2UgcG9pbnRlciBYIGNvb3JkaW5hdGVcclxuXHQgKiBAcGFyYW0gWSAtIE1vdXNlIHBvaW50ZXIgWSBjb29yZGluYXRlXHJcblx0ICovXHJcblx0cmVsZWFzZU1vdXNlQnV0dG9ucyhidXR0b25zOiBudW1iZXIsIFg6IG51bWJlciwgWTogbnVtYmVyKSB7XHJcblx0XHRpZiAoYnV0dG9ucyAmIE1vdXNlQnV0dG9uc01hc2sucHJpbWFyeUJ1dHRvbikge1xyXG5cdFx0XHR0aGlzLnNlbmRNb3VzZVVwKE1vdXNlQnV0dG9uLm1haW5CdXR0b24sIFgsIFkpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJ1dHRvbnMgJiBNb3VzZUJ1dHRvbnNNYXNrLnNlY29uZGFyeUJ1dHRvbikge1xyXG5cdFx0XHR0aGlzLnNlbmRNb3VzZVVwKE1vdXNlQnV0dG9uLnNlY29uZGFyeUJ1dHRvbiwgWCwgWSk7XHJcblx0XHR9XHJcblx0XHRpZiAoYnV0dG9ucyAmIE1vdXNlQnV0dG9uc01hc2suYXV4aWxpYXJ5QnV0dG9uKSB7XHJcblx0XHRcdHRoaXMuc2VuZE1vdXNlVXAoTW91c2VCdXR0b24uYXV4aWxpYXJ5QnV0dG9uLCBYLCBZKTtcclxuXHRcdH1cclxuXHRcdGlmIChidXR0b25zICYgTW91c2VCdXR0b25zTWFzay5mb3VydGhCdXR0b24pIHtcclxuXHRcdFx0dGhpcy5zZW5kTW91c2VVcChNb3VzZUJ1dHRvbi5mb3VydGhCdXR0b24sIFgsIFkpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJ1dHRvbnMgJiBNb3VzZUJ1dHRvbnNNYXNrLmZpZnRoQnV0dG9uKSB7XHJcblx0XHRcdHRoaXMuc2VuZE1vdXNlVXAoTW91c2VCdXR0b24uZmlmdGhCdXR0b24sIFgsIFkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlIHdoZW4gYSBtb3VzZSBidXR0b24gaXMgcHJlc3NlZFxyXG5cdCAqIEBwYXJhbSBidXR0b25zIC0gTW91c2UgQnV0dG9uXHJcblx0ICogQHBhcmFtIFggLSBNb3VzZSBwb2ludGVyIFggY29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSBZIC0gTW91c2UgcG9pbnRlciBZIGNvb3JkaW5hdGVcclxuXHQgKi9cclxuXHRwcmVzc01vdXNlQnV0dG9ucyhidXR0b25zOiBudW1iZXIsIFg6IG51bWJlciwgWTogbnVtYmVyKSB7XHJcblx0XHRpZiAoYnV0dG9ucyAmIE1vdXNlQnV0dG9uc01hc2sucHJpbWFyeUJ1dHRvbikge1xyXG5cdFx0XHR0aGlzLnNlbmRNb3VzZURvd24oTW91c2VCdXR0b24ubWFpbkJ1dHRvbiwgWCwgWSk7XHJcblx0XHR9XHJcblx0XHRpZiAoYnV0dG9ucyAmIE1vdXNlQnV0dG9uc01hc2suc2Vjb25kYXJ5QnV0dG9uKSB7XHJcblx0XHRcdHRoaXMuc2VuZE1vdXNlRG93bihNb3VzZUJ1dHRvbi5zZWNvbmRhcnlCdXR0b24sIFgsIFkpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJ1dHRvbnMgJiBNb3VzZUJ1dHRvbnNNYXNrLmF1eGlsaWFyeUJ1dHRvbikge1xyXG5cdFx0XHR0aGlzLnNlbmRNb3VzZURvd24oTW91c2VCdXR0b24uYXV4aWxpYXJ5QnV0dG9uLCBYLCBZKTtcclxuXHRcdH1cclxuXHRcdGlmIChidXR0b25zICYgTW91c2VCdXR0b25zTWFzay5mb3VydGhCdXR0b24pIHtcclxuXHRcdFx0dGhpcy5zZW5kTW91c2VEb3duKE1vdXNlQnV0dG9uLmZvdXJ0aEJ1dHRvbiwgWCwgWSk7XHJcblx0XHR9XHJcblx0XHRpZiAoYnV0dG9ucyAmIE1vdXNlQnV0dG9uc01hc2suZmlmdGhCdXR0b24pIHtcclxuXHRcdFx0dGhpcy5zZW5kTW91c2VEb3duKE1vdXNlQnV0dG9uLmZpZnRoQnV0dG9uLCBYLCBZKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZSB3aGVuIGEgbW91c2UgaXMgbW92ZWRcclxuXHQgKiBAcGFyYW0gWCAtIE1vdXNlIFggQ29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSBZIC0gTW91c2UgWSBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIGRlbHRhWCAtIE1vdXNlIERlbHRhIFggQ29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSBkZWx0YVkgLSBNb3VzZSBEZWx0YSBZIENvb3JkaW5hdGVcclxuXHQgKi9cclxuXHRzZW5kTW91c2VNb3ZlKFg6IG51bWJlciwgWTogbnVtYmVyLCBkZWx0YVg6IG51bWJlciwgZGVsdGFZOiBudW1iZXIpIHtcclxuXHRcdGlmICh0aGlzLnByaW50SW5wdXRzKSB7XHJcblx0XHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgYHg6ICR7WH0sIHk6JHtZfSwgZFg6ICR7ZGVsdGFYfSwgZFk6ICR7ZGVsdGFZfWAsIDcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBtb3VzZUNvcmQ6IE5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQgPSB0aGlzLm5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQoWCwgWSk7XHJcblx0XHRsZXQgZGVsdGFDb2RlOiBOb3JtYWxpc2VBbmRRdWFudGlzZVNpZ25lZCA9IHRoaXMubm9ybWFsaXNlQW5kUXVhbnRpc2VTaWduZWQoZGVsdGFYLCBkZWx0YVkpO1xyXG5cclxuXHRcdHRoaXMudWVJbnB1dE1vdXNlTWVzc2FnZS5zZW5kTW91c2VNb3ZlKG1vdXNlQ29yZC54LCBtb3VzZUNvcmQueSwgZGVsdGFDb2RlLngsIGRlbHRhQ29kZS55KTtcclxuXHR9XHJcblxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHdoZW4gYSBtb3VzZSBidXR0b24gaXMgcHJlc3NlZCBkb3duXHJcblx0ICogQHBhcmFtIGJ1dHRvbiAtIE1vdXNlIEJ1dHRvbiBQcmVzc2VkXHJcblx0ICogQHBhcmFtIFggIC0gTW91c2UgWCBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIFkgIC0gTW91c2UgWSBDb29yZGluYXRlXHJcblx0ICovXHJcblx0c2VuZE1vdXNlRG93bihidXR0b246IG51bWJlciwgWDogbnVtYmVyLCBZOiBudW1iZXIpIHtcclxuXHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgYG1vdXNlIGJ1dHRvbiAke2J1dHRvbn0gZG93biBhdCAoJHtYfSwgJHtZfSlgLCA2KTtcclxuXHRcdGxldCBjb29yZDogTm9ybWFsaXNlQW5kUXVhbnRpc2VVbnNpZ25lZCA9IHRoaXMubm9ybWFsaXNlQW5kUXVhbnRpc2VVbnNpZ25lZChYLCBZKTtcclxuXHRcdHRoaXMudWVJbnB1dE1vdXNlTWVzc2FnZS5zZW5kTW91c2VEb3duKGJ1dHRvbiwgY29vcmQueCwgY29vcmQueSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHdoZW4gYSBtb3VzZSBidXR0b24gaXMgcHJlc3NlZCB1cFxyXG5cdCAqIEBwYXJhbSBidXR0b24gLSBNb3VzZSBCdXR0b24gUHJlc3NlZFxyXG5cdCAqIEBwYXJhbSBYICAtIE1vdXNlIFggQ29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSBZICAtIE1vdXNlIFkgQ29vcmRpbmF0ZVxyXG5cdCAqL1xyXG5cdHNlbmRNb3VzZVVwKGJ1dHRvbjogbnVtYmVyLCBYOiBudW1iZXIsIFk6IG51bWJlcikge1xyXG5cdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBgbW91c2UgYnV0dG9uICR7YnV0dG9ufSB1cCBhdCAoJHtYfSwgJHtZfSlgLCA2KTtcclxuXHRcdGxldCBjb29yZDogTm9ybWFsaXNlQW5kUXVhbnRpc2VVbnNpZ25lZCA9IHRoaXMubm9ybWFsaXNlQW5kUXVhbnRpc2VVbnNpZ25lZChYLCBZKTtcclxuXHRcdHRoaXMudWVJbnB1dE1vdXNlTWVzc2FnZS5zZW5kTW91c2VVcChidXR0b24sIGNvb3JkLngsIGNvb3JkLnkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB3aGVuIGEgbW91c2Ugd2hlZWwgZXZlbnRcclxuXHQgKiBAcGFyYW0gZGVsdGFZIC0gTW91c2UgV2hlZWwgZGF0YVxyXG5cdCAqIEBwYXJhbSBYICAtIE1vdXNlIFggQ29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSBZICAtIE1vdXNlIFkgQ29vcmRpbmF0ZVxyXG5cdCAqL1xyXG5cdHNlbmRNb3VzZVdoZWVsKGRlbHRhWTogbnVtYmVyLCBYOiBudW1iZXIsIFk6IG51bWJlcikge1xyXG5cdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBgbW91c2Ugd2hlZWwgd2l0aCBkZWx0YSAke2RlbHRhWX0gYXQgKCR7WH0sICR7WX0pYCwgNik7XHJcblx0XHRsZXQgY29vcmQ6IE5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQgPSB0aGlzLm5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQoWCwgWSk7XHJcblx0XHR0aGlzLnVlSW5wdXRNb3VzZU1lc3NhZ2Uuc2VuZE1vdXNlV2hlZWwoZGVsdGFZLCBjb29yZC54LCBjb29yZC55KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZXMgbW91c2UgZW50ZXJcclxuXHQgKi9cclxuXHRzZW5kTW91c2VFbnRlcigpIHtcclxuXHRcdHRoaXMudWVJbnB1dE1vdXNlTWVzc2FnZS5zZW5kTW91c2VFbnRlcigpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyBtb3VzZSBMZWF2ZVxyXG5cdCAqL1xyXG5cdHNlbmRNb3VzZUxlYXZlKCkge1xyXG5cdFx0dGhpcy51ZUlucHV0TW91c2VNZXNzYWdlLnNlbmRNb3VzZUxlYXZlKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBOb3JtYWxpc2VzIGFuZCBRdWFudGlzZWQgdGhlIE1vdXNlIENvb3JkaW5hdGVzXHRcclxuXHQgKiBAcGFyYW0geCAtIE1vdXNlIFggQ29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSB5IC0gTW91c2UgWSBDb29yZGluYXRlXHJcblx0ICogQHJldHVybnMgLSBOb3JtYWxpemUgQW5kIFF1YW50aXplIFVuc2lnbmVkIERhdGEgVHlwZVxyXG5cdCAqL1xyXG5cdG5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBOb3JtYWxpc2VBbmRRdWFudGlzZVVuc2lnbmVkIHtcclxuXHJcblx0XHRsZXQgcm9vdERpdiA9IHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCk7XHJcblx0XHRsZXQgdmlkZW9FbGVtZW50ID0gdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKTtcclxuXHJcblx0XHRpZiAocm9vdERpdiAmJiB2aWRlb0VsZW1lbnQpIHtcclxuXHRcdFx0bGV0IHBsYXllckFzcGVjdFJhdGlvID0gcm9vdERpdi5jbGllbnRIZWlnaHQgLyByb290RGl2LmNsaWVudFdpZHRoO1xyXG5cdFx0XHRsZXQgdmlkZW9Bc3BlY3RSYXRpbyA9IHZpZGVvRWxlbWVudC52aWRlb0hlaWdodCAvIHZpZGVvRWxlbWVudC52aWRlb1dpZHRoO1xyXG5cclxuXHRcdFx0Ly8gVW5zaWduZWQgWFkgcG9zaXRpb25zIGFyZSB0aGUgcmF0aW8gKDAuMC4uMS4wKSBhbG9uZyBhIHZpZXdwb3J0IGF4aXMsXHJcblx0XHRcdC8vIHF1YW50aXplZCBpbnRvIGFuIHVpbnQxNiAoMC4uNjU1MzYpLlxyXG5cdFx0XHQvLyBTaWduZWQgWFkgZGVsdGFzIGFyZSB0aGUgcmF0aW8gKC0xLjAuLjEuMCkgYWxvbmcgYSB2aWV3cG9ydCBheGlzLFxyXG5cdFx0XHQvLyBxdWFudGl6ZWQgaW50byBhbiBpbnQxNiAoLTMyNzY3Li4zMjc2NykuXHJcblx0XHRcdC8vIFRoaXMgYWxsb3dzIHRoZSBicm93c2VyIHZpZXdwb3J0IGFuZCBjbGllbnQgdmlld3BvcnQgdG8gaGF2ZSBhIGRpZmZlcmVudFxyXG5cdFx0XHQvLyBzaXplLlxyXG5cdFx0XHQvLyBIYWNrOiBDdXJyZW50bHkgd2Ugc2V0IGFuIG91dC1vZi1yYW5nZSBwb3NpdGlvbiB0byBhbiBleHRyZW1lICg2NTUzNSlcclxuXHRcdFx0Ly8gYXMgd2UgY2FuJ3QgeWV0IGFjY3VyYXRlbHkgZGV0ZWN0IG1vdXNlIGVudGVyIGFuZCBsZWF2ZSBldmVudHNcclxuXHRcdFx0Ly8gcHJlY2lzZWx5IGluc2lkZSBhIHZpZGVvIHdpdGggYW4gYXNwZWN0IHJhdGlvIHdoaWNoIGNhdXNlcyBtYXR0ZXMuXHJcblx0XHRcdGlmIChwbGF5ZXJBc3BlY3RSYXRpbyA+IHZpZGVvQXNwZWN0UmF0aW8pIHtcclxuXHRcdFx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdTZXR1cCBOb3JtYWxpemUgYW5kIFF1YW50aXplIGZvciBwbGF5ZXJBc3BlY3RSYXRpbyA+IHZpZGVvQXNwZWN0UmF0aW8nLCA2KTtcclxuXHJcblx0XHRcdFx0bGV0IHJhdGlvID0gcGxheWVyQXNwZWN0UmF0aW8gLyB2aWRlb0FzcGVjdFJhdGlvO1xyXG5cdFx0XHRcdC8vIFVuc2lnbmVkLlxyXG5cdFx0XHRcdGxldCBub3JtYWxpemVkWCA9IHggLyByb290RGl2LmNsaWVudFdpZHRoO1xyXG5cdFx0XHRcdGxldCBub3JtYWxpemVkWSA9IHJhdGlvICogKHkgLyByb290RGl2LmNsaWVudEhlaWdodCAtIDAuNSkgKyAwLjU7XHJcblxyXG5cdFx0XHRcdGlmIChub3JtYWxpemVkWCA8IDAuMCB8fCBub3JtYWxpemVkWCA+IDEuMCB8fCBub3JtYWxpemVkWSA8IDAuMCB8fCBub3JtYWxpemVkWSA+IDEuMCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0aW5SYW5nZTogZmFsc2UsXHJcblx0XHRcdFx0XHRcdHg6IHRoaXMudW5zaWduZWRPdXRPZlJhbmdlLFxyXG5cdFx0XHRcdFx0XHR5OiB0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHRpblJhbmdlOiB0cnVlLFxyXG5cdFx0XHRcdFx0XHR4OiBub3JtYWxpemVkWCAqICh0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZSArIDEpLFxyXG5cdFx0XHRcdFx0XHR5OiBub3JtYWxpemVkWSAqICh0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZSArIDEpXHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdTZXR1cCBOb3JtYWxpemUgYW5kIFF1YW50aXplIGZvciBwbGF5ZXJBc3BlY3RSYXRpbyA8PSB2aWRlb0FzcGVjdFJhdGlvJywgNik7XHJcblxyXG5cdFx0XHRcdGxldCByYXRpbyA9IHZpZGVvQXNwZWN0UmF0aW8gLyBwbGF5ZXJBc3BlY3RSYXRpbztcclxuXHRcdFx0XHQvLyBVbnNpZ25lZC5cclxuXHRcdFx0XHRsZXQgbm9ybWFsaXplZFggPSByYXRpbyAqICh4IC8gcm9vdERpdi5jbGllbnRXaWR0aCAtIDAuNSkgKyAwLjU7XHJcblx0XHRcdFx0bGV0IG5vcm1hbGl6ZWRZID0geSAvIHJvb3REaXYuY2xpZW50SGVpZ2h0O1xyXG5cdFx0XHRcdGlmIChub3JtYWxpemVkWCA8IDAuMCB8fCBub3JtYWxpemVkWCA+IDEuMCB8fCBub3JtYWxpemVkWSA8IDAuMCB8fCBub3JtYWxpemVkWSA+IDEuMCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0aW5SYW5nZTogZmFsc2UsXHJcblx0XHRcdFx0XHRcdHg6IHRoaXMudW5zaWduZWRPdXRPZlJhbmdlLFxyXG5cdFx0XHRcdFx0XHR5OiB0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZVxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0aW5SYW5nZTogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0eDogbm9ybWFsaXplZFggKiAodGhpcy51bnNpZ25lZE91dE9mUmFuZ2UgKyAxKSxcclxuXHRcdFx0XHRcdFx0eTogbm9ybWFsaXplZFkgKiAodGhpcy51bnNpZ25lZE91dE9mUmFuZ2UgKyAxKVxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlbm9ybWFsaXNlcyBhbmQgdW5xdWFudGlzZWQgdGhlIE1vdXNlIENvb3JkaW5hdGVzXHRcclxuXHQgKiBAcGFyYW0geCAtIE1vdXNlIFggQ29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSB5IC0gTW91c2UgWSBDb29yZGluYXRlXHJcblx0ICogQHJldHVybnMgLSB1bnF1YW50aXNlIGFuZCBEZW5vcm1hbGl6ZSBVbnNpZ25lZCBEYXRhIFR5cGVcclxuXHQgKi9cclxuXHR1bnF1YW50aXNlQW5kRGVub3JtYWxpc2VVbnNpZ25lZCh4OiBudW1iZXIsIHk6IG51bWJlcik6IFVucXVhbnRpc2VkQW5kRGVub3JtYWxpc2VVbnNpZ25lZCB7XHJcblxyXG5cdFx0bGV0IHJvb3REaXYgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvUGFyZW50RWxlbWVudCgpO1xyXG5cdFx0bGV0IHZpZGVvRWxlbWVudCA9IHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9FbGVtZW50KCk7XHJcblxyXG5cdFx0aWYgKHJvb3REaXYgJiYgdmlkZW9FbGVtZW50KSB7XHJcblx0XHRcdGxldCBwbGF5ZXJBc3BlY3RSYXRpbyA9IHJvb3REaXYuY2xpZW50SGVpZ2h0IC8gcm9vdERpdi5jbGllbnRXaWR0aDtcclxuXHRcdFx0bGV0IHZpZGVvQXNwZWN0UmF0aW8gPSB2aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQgLyB2aWRlb0VsZW1lbnQudmlkZW9XaWR0aDtcclxuXHJcblx0XHRcdC8vIFVuc2lnbmVkIFhZIHBvc2l0aW9ucyBhcmUgdGhlIHJhdGlvICgwLjAuLjEuMCkgYWxvbmcgYSB2aWV3cG9ydCBheGlzLFxyXG5cdFx0XHQvLyBxdWFudGl6ZWQgaW50byBhbiB1aW50MTYgKDAuLjY1NTM2KS5cclxuXHRcdFx0Ly8gU2lnbmVkIFhZIGRlbHRhcyBhcmUgdGhlIHJhdGlvICgtMS4wLi4xLjApIGFsb25nIGEgdmlld3BvcnQgYXhpcyxcclxuXHRcdFx0Ly8gcXVhbnRpemVkIGludG8gYW4gaW50MTYgKC0zMjc2Ny4uMzI3NjcpLlxyXG5cdFx0XHQvLyBUaGlzIGFsbG93cyB0aGUgYnJvd3NlciB2aWV3cG9ydCBhbmQgY2xpZW50IHZpZXdwb3J0IHRvIGhhdmUgYSBkaWZmZXJlbnRcclxuXHRcdFx0Ly8gc2l6ZS5cclxuXHRcdFx0Ly8gSGFjazogQ3VycmVudGx5IHdlIHNldCBhbiBvdXQtb2YtcmFuZ2UgcG9zaXRpb24gdG8gYW4gZXh0cmVtZSAoNjU1MzUpXHJcblx0XHRcdC8vIGFzIHdlIGNhbid0IHlldCBhY2N1cmF0ZWx5IGRldGVjdCBtb3VzZSBlbnRlciBhbmQgbGVhdmUgZXZlbnRzXHJcblx0XHRcdC8vIHByZWNpc2VseSBpbnNpZGUgYSB2aWRlbyB3aXRoIGFuIGFzcGVjdCByYXRpbyB3aGljaCBjYXVzZXMgbWF0dGVzLlxyXG5cdFx0XHRpZiAocGxheWVyQXNwZWN0UmF0aW8gPiB2aWRlb0FzcGVjdFJhdGlvKSB7XHJcblx0XHRcdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCAnU2V0dXAgTm9ybWFsaXplIGFuZCBRdWFudGl6ZSBmb3IgcGxheWVyQXNwZWN0UmF0aW8gPiB2aWRlb0FzcGVjdFJhdGlvJywgNik7XHJcblxyXG5cdFx0XHRcdGxldCByYXRpbyA9IHBsYXllckFzcGVjdFJhdGlvIC8gdmlkZW9Bc3BlY3RSYXRpbztcclxuXHRcdFx0XHQvLyBVbnNpZ25lZC5cclxuXHRcdFx0XHRsZXQgbm9ybWFsaXplZFggPSB4IC8gKHRoaXMudW5zaWduZWRPdXRPZlJhbmdlICsgMSk7XHJcblx0XHRcdFx0bGV0IG5vcm1hbGl6ZWRZID0gKHkgLyAodGhpcy51bnNpZ25lZE91dE9mUmFuZ2UgKyAxKSAtIDAuNSkgLyByYXRpbyArIDAuNTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdHg6IG5vcm1hbGl6ZWRYICogcm9vdERpdi5jbGllbnRXaWR0aCxcclxuXHRcdFx0XHRcdHk6IG5vcm1hbGl6ZWRZICogcm9vdERpdi5jbGllbnRIZWlnaHRcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgJ1NldHVwIE5vcm1hbGl6ZSBhbmQgUXVhbnRpemUgZm9yIHBsYXllckFzcGVjdFJhdGlvIDw9IHZpZGVvQXNwZWN0UmF0aW8nLCA2KTtcclxuXHJcblx0XHRcdFx0bGV0IHJhdGlvID0gdmlkZW9Bc3BlY3RSYXRpbyAvIHBsYXllckFzcGVjdFJhdGlvO1xyXG5cdFx0XHRcdC8vIFVuc2lnbmVkLlxyXG5cdFx0XHRcdGxldCBub3JtYWxpemVkWCA9ICh4IC8gKHRoaXMudW5zaWduZWRPdXRPZlJhbmdlICsgMSkgLSAwLjUpIC8gcmF0aW8gKyAwLjU7XHJcblx0XHRcdFx0bGV0IG5vcm1hbGl6ZWRZID0geSAvICh0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZSArIDEpO1xyXG5cdFx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHR4OiBub3JtYWxpemVkWCAqIHJvb3REaXYuY2xpZW50V2lkdGgsXHJcblx0XHRcdFx0XHR5OiBub3JtYWxpemVkWSAqIHJvb3REaXYuY2xpZW50SGVpZ2h0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBOb3JtYWxpc2VzIGFuZCBRdWFudGlzZWQgdGhlIE1vdXNlIENvb3JkaW5hdGVzXHRcclxuXHQgKiBAcGFyYW0geCAtIE1vdXNlIFggQ29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSB5IC0gTW91c2UgWSBDb29yZGluYXRlXHJcblx0ICogQHJldHVybnMgLSBOb3JtYWxpemUgQW5kIFF1YW50aXplIFNpZ25lZCBEYXRhIFR5cGVcclxuXHQgKi9cclxuXHRub3JtYWxpc2VBbmRRdWFudGlzZVNpZ25lZCh4OiBudW1iZXIsIHk6IG51bWJlcik6IE5vcm1hbGlzZUFuZFF1YW50aXNlU2lnbmVkIHtcclxuXHJcblx0XHRsZXQgcm9vdERpdiA9IHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCk7XHJcblx0XHRsZXQgdmlkZW9FbGVtZW50ID0gdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKTtcclxuXHJcblx0XHRpZiAocm9vdERpdiAmJiB2aWRlb0VsZW1lbnQpIHtcclxuXHRcdFx0bGV0IHBsYXllckFzcGVjdFJhdGlvID0gcm9vdERpdi5jbGllbnRIZWlnaHQgLyByb290RGl2LmNsaWVudFdpZHRoO1xyXG5cdFx0XHRsZXQgdmlkZW9Bc3BlY3RSYXRpbyA9IHZpZGVvRWxlbWVudC52aWRlb0hlaWdodCAvIHZpZGVvRWxlbWVudC52aWRlb1dpZHRoO1xyXG5cclxuXHRcdFx0Ly8gVW5zaWduZWQgWFkgcG9zaXRpb25zIGFyZSB0aGUgcmF0aW8gKDAuMC4uMS4wKSBhbG9uZyBhIHZpZXdwb3J0IGF4aXMsXHJcblx0XHRcdC8vIHF1YW50aXplZCBpbnRvIGFuIHVpbnQxNiAoMC4uNjU1MzYpLlxyXG5cdFx0XHQvLyBTaWduZWQgWFkgZGVsdGFzIGFyZSB0aGUgcmF0aW8gKC0xLjAuLjEuMCkgYWxvbmcgYSB2aWV3cG9ydCBheGlzLFxyXG5cdFx0XHQvLyBxdWFudGl6ZWQgaW50byBhbiBpbnQxNiAoLTMyNzY3Li4zMjc2NykuXHJcblx0XHRcdC8vIFRoaXMgYWxsb3dzIHRoZSBicm93c2VyIHZpZXdwb3J0IGFuZCBjbGllbnQgdmlld3BvcnQgdG8gaGF2ZSBhIGRpZmZlcmVudFxyXG5cdFx0XHQvLyBzaXplLlxyXG5cdFx0XHQvLyBIYWNrOiBDdXJyZW50bHkgd2Ugc2V0IGFuIG91dC1vZi1yYW5nZSBwb3NpdGlvbiB0byBhbiBleHRyZW1lICg2NTUzNSlcclxuXHRcdFx0Ly8gYXMgd2UgY2FuJ3QgeWV0IGFjY3VyYXRlbHkgZGV0ZWN0IG1vdXNlIGVudGVyIGFuZCBsZWF2ZSBldmVudHNcclxuXHRcdFx0Ly8gcHJlY2lzZWx5IGluc2lkZSBhIHZpZGVvIHdpdGggYW4gYXNwZWN0IHJhdGlvIHdoaWNoIGNhdXNlcyBtYXR0ZXMuXHJcblx0XHRcdGlmIChwbGF5ZXJBc3BlY3RSYXRpbyA+IHZpZGVvQXNwZWN0UmF0aW8pIHtcclxuXHRcdFx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdTZXR1cCBOb3JtYWxpemUgYW5kIFF1YW50aXplIGZvciBwbGF5ZXJBc3BlY3RSYXRpbyA+IHZpZGVvQXNwZWN0UmF0aW8nLCA2KTtcclxuXHJcblx0XHRcdFx0bGV0IHJhdGlvID0gcGxheWVyQXNwZWN0UmF0aW8gLyB2aWRlb0FzcGVjdFJhdGlvO1xyXG5cdFx0XHRcdC8vIFVuc2lnbmVkLlxyXG5cdFx0XHRcdGxldCBub3JtYWxpemVkWCA9IHggLyAoMC41ICogcm9vdERpdi5jbGllbnRXaWR0aCk7XHJcblx0XHRcdFx0bGV0IG5vcm1hbGl6ZWRZID0gKHJhdGlvICogeSkgLyAoMC41ICogcm9vdERpdi5jbGllbnRIZWlnaHQpO1xyXG5cdFx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHR4OiBub3JtYWxpemVkWCAqIHRoaXMuc2lnbmVkT3V0T2ZSYW5nZSxcclxuXHRcdFx0XHRcdHk6IG5vcm1hbGl6ZWRZICogdGhpcy5zaWduZWRPdXRPZlJhbmdlXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpZiAodGhpcy5wcmludElucHV0cykge1xyXG5cdFx0XHRcdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCAnU2V0dXAgTm9ybWFsaXplIGFuZCBRdWFudGl6ZSBmb3IgcGxheWVyQXNwZWN0UmF0aW8gPD0gdmlkZW9Bc3BlY3RSYXRpbycsIDYpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRsZXQgcmF0aW8gPSB2aWRlb0FzcGVjdFJhdGlvIC8gcGxheWVyQXNwZWN0UmF0aW87XHJcblx0XHRcdFx0Ly8gU2lnbmVkLlxyXG5cdFx0XHRcdGxldCBub3JtYWxpemVkWCA9IChyYXRpbyAqIHgpIC8gKDAuNSAqIHJvb3REaXYuY2xpZW50V2lkdGgpO1xyXG5cdFx0XHRcdGxldCBub3JtYWxpemVkWSA9IHkgLyAoMC41ICogcm9vdERpdi5jbGllbnRIZWlnaHQpO1xyXG5cdFx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHR4OiBub3JtYWxpemVkWCAqIHRoaXMuc2lnbmVkT3V0T2ZSYW5nZSxcclxuXHRcdFx0XHRcdHk6IG5vcm1hbGl6ZWRZICogdGhpcy5zaWduZWRPdXRPZlJhbmdlXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59IiwiLyoqXHJcbiAqIFJlZ2lzdGVycyB0aGUgU3BlY2lhbCBLZXkgY29kZXNcclxuICogIE11c3QgYmUga2VwdCBpbiBzeW5jIHdpdGggSmF2YVNjcmlwdEtleUNvZGVUb0ZLZXkgQysrIGFycmF5LiBcclxuICogVGhlIGluZGV4IG9mIHRoZSBlbnRyeSBpbiB0aGUgYXJyYXkgaXMgdGhlIHNwZWNpYWwga2V5IGNvZGUgZ2l2ZW4gYmVsb3cuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3BlY2lhbEtleUNvZGVzIHtcclxuXHRzdGF0aWMgYmFja1NwYWNlID0gODtcclxuXHRzdGF0aWMgc2hpZnQgPSAxNjtcclxuXHRzdGF0aWMgY29udHJvbCA9IDE3O1xyXG5cdHN0YXRpYyBhbHQgPSAxODtcclxuXHRzdGF0aWMgcmlnaHRTaGlmdCA9IDI1MztcclxuXHRzdGF0aWMgcmlnaHRDb250cm9sID0gMjU0O1xyXG5cdHN0YXRpYyByaWdodEFsdCA9IDI1NTtcclxufVxyXG4iLCJpbXBvcnQgeyBVZUlucHV0VG91Y2hNZXNzYWdlIH0gZnJvbSBcIi4uL1VlSW5zdGFuY2VNZXNzYWdlL1VlSW5wdXRUb3VjaE1lc3NhZ2VcIjtcclxuaW1wb3J0IHsgRGF0YUNoYW5uZWxDb250cm9sbGVyIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0RhdGFDaGFubmVsQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBJVG91Y2hDb250cm9sbGVyIH0gZnJvbSBcIi4vSVRvdWNoQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBJVmlkZW9QbGF5ZXIgfSBmcm9tIFwiLi4vVmlkZW9QbGF5ZXIvSVZpZGVvUGxheWVyXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbi8qKiBcclxuICogSGFuZGxlcyB0aGUgVG91Y2ggaW5wdXQgRXZlbnRzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVG91Y2hDb250cm9sbGVyIGltcGxlbWVudHMgSVRvdWNoQ29udHJvbGxlciB7XHJcbiAgICB1ZUlucHV0VG91Y2hNZXNzYWdlOiBVZUlucHV0VG91Y2hNZXNzYWdlO1xyXG4gICAgcGxheWVyRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIGRhdGFDaGFubmVsQ29udHJvbGxlciAtIHRoZSBkYXRhIGNoYW5uZWwgY29udHJvbGxlciBcclxuICAgICAqIEBwYXJhbSBwbGF5ZXJFbGVtZW50IC0gdGhlIHBsYXllciBlbGVtZW50IERPTVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhQ2hhbm5lbENvbnRyb2xsZXI6IERhdGFDaGFubmVsQ29udHJvbGxlciwgcGxheWVyRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCwgdmlkZW9FbGVtZW50UHJvdmlkZXI6IElWaWRlb1BsYXllcikge1xyXG4gICAgICAgIHRoaXMudWVJbnB1dFRvdWNoTWVzc2FnZSA9IG5ldyBVZUlucHV0VG91Y2hNZXNzYWdlKGRhdGFDaGFubmVsQ29udHJvbGxlciwgdmlkZW9FbGVtZW50UHJvdmlkZXIpO1xyXG4gICAgICAgIHRoaXMucGxheWVyRWxlbWVudCA9IHBsYXllckVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJFbGVtZW50Lm9udG91Y2hzdGFydCA9IChldjogVG91Y2hFdmVudCkgPT4gdGhpcy5vblRvdWNoU3RhcnQoZXYpO1xyXG4gICAgICAgIHRoaXMucGxheWVyRWxlbWVudC5vbnRvdWNoZW5kID0gKGV2OiBUb3VjaEV2ZW50KSA9PiB0aGlzLm9uVG91Y2hFbmQoZXYpO1xyXG4gICAgICAgIHRoaXMucGxheWVyRWxlbWVudC5vbnRvdWNobW92ZSA9IChldjogVG91Y2hFdmVudCkgPT4gdGhpcy5vblRvdWNoTW92ZShldik7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlRvdWNoIEV2ZW50cyBSZWdpc3RlcmVkXCIsIDYpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiBhIHRvdWNoIGV2ZW50IHN0YXJ0cyBcclxuICAgICAqIEBwYXJhbSBldmVudCAtIHRoZSB0b3VjaCBldmVudCBiZWluZyBpbnRlcmNlcHRlZCAgXHJcbiAgICAgKi9cclxuICAgIG9uVG91Y2hTdGFydCh0b3VjaEV2ZW50OiBUb3VjaEV2ZW50KSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIm9uIFRvdWNoIFN0YXJ0XCIsIDYpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG91Y2hFdmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdG91Y2g6IFRvdWNoID0gdG91Y2hFdmVudC5jaGFuZ2VkVG91Y2hlc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGxldCBmaW5nZXIgPSB0aGlzLnVlSW5wdXRUb3VjaE1lc3NhZ2UuZmluZ2Vycy5wb3AoKTtcclxuICAgICAgICAgICAgaWYgKGZpbmdlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwid2hvIGhhcyBtb3JlIHRoZW4gMTAgZmluZ2Vyc1wiLCA2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVlSW5wdXRUb3VjaE1lc3NhZ2UuZmluZ2Vyc0lkc1t0b3VjaC5pZGVudGlmaWVyXSA9IGZpbmdlcjtcclxuICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcInRvdWNoLmlkZW50aWZpZXI6IFwiICsgdG91Y2guaWRlbnRpZmllciwgNik7XHJcbiAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJmaW5nZXI6IFwiICsgZmluZ2VyLCA2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudWVJbnB1dFRvdWNoTWVzc2FnZS5zZW5kVG91Y2hTdGFydCh0b3VjaEV2ZW50LmNoYW5nZWRUb3VjaGVzKTtcclxuICAgICAgICB0b3VjaEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIGEgdG91Y2ggZXZlbnQgZW5kcyBcclxuICAgICAqIEBwYXJhbSBldmVudCAtIHRoZSB0b3VjaCBldmVudCBiZWluZyBpbnRlcmNlcHRlZCAgXHJcbiAgICAgKi9cclxuICAgIG9uVG91Y2hFbmQodG91Y2hFdmVudDogVG91Y2hFdmVudCkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJvbiBUb3VjaCBFTkRcIiwgNik7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG91Y2hFdmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdG91Y2ggPSB0b3VjaEV2ZW50LmNoYW5nZWRUb3VjaGVzW2ldO1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwib24gRm9yZ2V0IFRvdWNoXCIsIDYpO1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwidG91Y2ggaWQ6IFwiICsgdG91Y2guaWRlbnRpZmllciwgNik7XHJcbiAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJGaW5nZXJzIGlkIFRvdWNoIGlkOiBcIiArIHRoaXMudWVJbnB1dFRvdWNoTWVzc2FnZS5maW5nZXJzSWRzW3RvdWNoLmlkZW50aWZpZXJdLCA2KTtcclxuICAgICAgICAgICAgdGhpcy51ZUlucHV0VG91Y2hNZXNzYWdlLmZpbmdlcnMucHVzaCh0aGlzLnVlSW5wdXRUb3VjaE1lc3NhZ2UuZmluZ2Vyc0lkc1t0b3VjaC5pZGVudGlmaWVyXSk7XHJcbiAgICAgICAgICAgIHRoaXMudWVJbnB1dFRvdWNoTWVzc2FnZS5maW5nZXJzLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi1hfSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnVlSW5wdXRUb3VjaE1lc3NhZ2UuZmluZ2Vyc0lkc1t0b3VjaC5pZGVudGlmaWVyXTtcclxuICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcInRvdWNoLmlkZW50aWZpZXI6IFwiICsgdG91Y2guaWRlbnRpZmllciwgNik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudWVJbnB1dFRvdWNoTWVzc2FnZS5zZW5kVG91Y2hFbmQodG91Y2hFdmVudC5jaGFuZ2VkVG91Y2hlcyk7XHJcbiAgICAgICAgdG91Y2hFdmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB3aGVuIGEgbW92aW5nIHRvdWNoIGV2ZW50IG9jY3VycyBcclxuICAgICAqIEBwYXJhbSBldmVudCAtIHRoZSB0b3VjaCBldmVudCBiZWluZyBpbnRlcmNlcHRlZCAgXHJcbiAgICAgKi9cclxuICAgIG9uVG91Y2hNb3ZlKHRvdWNoRXZlbnQ6IFRvdWNoRXZlbnQpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdWNoRXZlbnQudG91Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdG91Y2ggPSB0b3VjaEV2ZW50LnRvdWNoZXNbaV07XHJcbiAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJYOiBcIiArIHRvdWNoLmNsaWVudFggKyBcIiBZOiBcIiArIHRvdWNoLmNsaWVudFksIDYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVlSW5wdXRUb3VjaE1lc3NhZ2Uuc2VuZFRvdWNoTW92ZSh0b3VjaEV2ZW50LnRvdWNoZXMpO1xyXG4gICAgICAgIHRvdWNoRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgTG9nZ2VyIHtcclxuICAgIHN0YXRpYyB2ZXJib3NlTG9nTGV2ZWw6IG51bWJlciA9IDc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYXB0dXJlcyB0aGUgc3RhY2sgYW5kIHJldHVybnMgaXRcclxuICAgICAqIEByZXR1cm5zIHRoZSBjdXJyZW50IHN0YWNrXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBHZXRTdGFja1RyYWNlKCkge1xyXG4gICAgICAgIGxldCBlcnJvciA9IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIGxldCBmb3JtYXR0ZWRTdGFjayA9IFwiTm8gU3RhY2sgQXZhaWxhYmxlIGZvciB0aGlzIGJyb3dzZXJcIjtcclxuXHJcbiAgICAgICAgLy8gZm9ybWF0IHRoZSBlcnJvclxyXG4gICAgICAgIGlmIChlcnJvci5zdGFjaykge1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWRTdGFjayA9IGVycm9yLnN0YWNrLnRvU3RyaW5nKCkucmVwbGFjZSgvRXJyb3IvZywgJycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFN0YWNrO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgbG9nIHZlcmJvc2l0eSBsZXZlbFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgU2V0TG9nZ2VyVmVyYm9zaXR5KHZlcmJvc2VMb2dMZXZlbDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmVyYm9zZUxvZ0xldmVsICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy52ZXJib3NlTG9nTGV2ZWwgPSB2ZXJib3NlTG9nTGV2ZWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0YW5kYXJkIGxvZ2dpbmcgb3V0cHV0IFxyXG4gICAgICogQHBhcmFtIHN0YWNrIC0gdGhlIHN0YWNrIHRyYWNlXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIHRoZSBtZXNzYWdlIHRvIGJlIGxvZ2dlZFxyXG4gICAgICogQHBhcmFtIHZlcmJvc2l0eSAtIHRoZSB2ZXJib3NpdHkgbGV2ZWxcclxuICAgICAqL1xyXG4gICAgc3RhdGljIExvZyhzdGFjazogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIHZlcmJvc2l0eT86IG51bWJlcikge1xyXG4gICAgICAgIGlmICh2ZXJib3NpdHkgPiB0aGlzLnZlcmJvc2VMb2dMZXZlbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmV0dXJuU3RyaW5nID0gYExldmVsOiBMb2csIENhbGxlcjogJHtzdGFja30sIE1zZzogJHttZXNzYWdlfWA7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmV0dXJuU3RyaW5nKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzdGFuZGFyZCBsb2dnaW5nIG91dHB1dCBcclxuICAgICAqIEBwYXJhbSBzdGFjayAtIHRoZSBzdGFjayB0cmFjZVxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSB0aGUgbWVzc2FnZSB0byBiZSBsb2dnZWRcclxuICAgICAqIEBwYXJhbSB2ZXJib3NpdHkgLSB0aGUgdmVyYm9zaXR5IGxldmVsXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBJbmZvKHN0YWNrOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgdmVyYm9zaXR5PzogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHZlcmJvc2l0eSA+IHRoaXMudmVyYm9zZUxvZ0xldmVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZXR1cm5TdHJpbmcgPSBgTGV2ZWw6IEluZm8sIE1zZzogJHttZXNzYWdlfWA7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKHJldHVyblN0cmluZyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3RhbmRhcmQgbG9nZ2luZyBvdXRwdXQgXHJcbiAgICAgKiBAcGFyYW0gc3RhY2sgLSB0aGUgc3RhY2sgdHJhY2VcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gdGhlIG1lc3NhZ2UgdG8gYmUgbG9nZ2VkXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBFcnJvcihzdGFjazogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgcmV0dXJuU3RyaW5nID0gYExldmVsOiBFcnJvciwgQ2FsbGVyOiAke3N0YWNrfSwgTXNnOiAke21lc3NhZ2V9YDtcclxuICAgICAgICBjb25zb2xlLmVycm9yKHJldHVyblN0cmluZyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vTG9nZ2VyL0xvZ2dlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1pY0NvbnRyb2xsZXIge1xyXG4gICAgdXNlTWljOiBib29sZWFuO1xyXG4gICAgaXNMb2NhbGhvc3RDb25uZWN0aW9uOiBib29sZWFuO1xyXG4gICAgaXNIdHRwc0Nvbm5lY3Rpb246IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IodXJsUGFyYW1zOiBVUkxTZWFyY2hQYXJhbXMpIHtcclxuICAgICAgICAvLyBnZXQgdGhlIG1pYyBzdGF0dXMgZnJvbSB0aGUgdXJsIFxyXG4gICAgICAgIHRoaXMudXNlTWljID0gdXJsUGFyYW1zLmhhcygndXNlTWljJyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVzZU1pYykge1xyXG4gICAgICAgICAgICBMb2dnZXIuSW5mbyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIk1pY3JvcGhvbmUgYWNjZXNzIGlzIGVuYWJsZWQgSVQgSVMgRVhQRVJJTUVOVEFMIEFORCBJUyBOT1QgUFJPUEVSTFkgU1VQUE9SVEVEIEFDUk9TUyBVRS4gSUYgSVQgRE9FUyBOT1QgV09SSyBJVFMgWU9VUiBPV04gRkFVTFQhIFlPVSBIQVZFIEJFRU4gVE9MRC5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpZiAoIXRoaXMudXNlTWljKSB7XHJcbiAgICAgICAgLy8gICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJNaWNyb3Bob25lIGFjY2VzcyBpcyBub3QgZW5hYmxlZC4gUGFzcyA/dXNlTWljIGluIHRoZSB1cmwgdG8gZW5hYmxlIGl0LlwiKTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSBjb25uZWN0aW9uIGlzIG5vdCBsb2NhbCBhbmQgaXMgaHR0cHMgb3IgbWljIHdpbGwgbm90IHdvcmsgXHJcbiAgICAgICAgdGhpcy5pc0xvY2FsaG9zdENvbm5lY3Rpb24gPSBsb2NhdGlvbi5ob3N0bmFtZSA9PT0gXCJsb2NhbGhvc3RcIiB8fCBsb2NhdGlvbi5ob3N0bmFtZSA9PT0gXCIxMjcuMC4wLjFcIjtcclxuICAgICAgICB0aGlzLmlzSHR0cHNDb25uZWN0aW9uID0gbG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonO1xyXG4gICAgICAgIGlmICh0aGlzLnVzZU1pYyAmJiAhdGhpcy5pc0xvY2FsaG9zdENvbm5lY3Rpb24gJiYgIXRoaXMuaXNIdHRwc0Nvbm5lY3Rpb24pIHtcclxuICAgICAgICAgICAgdGhpcy51c2VNaWMgPSBmYWxzZTtcclxuICAgICAgICAgICAgTG9nZ2VyLkVycm9yKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiTWljcm9waG9uZSBhY2Nlc3MgaW4gdGhlIGJyb3dzZXIgd2lsbCBub3Qgd29yayBpZiB5b3UgYXJlIG5vdCBvbiBIVFRQUyBvciBsb2NhbGhvc3QuIERpc2FibGluZyBtaWMgYWNjZXNzLlwiKTtcclxuICAgICAgICAgICAgTG9nZ2VyLkVycm9yKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiRm9yIHRlc3RpbmcgeW91IGNhbiBlbmFibGUgSFRUUCBtaWNyb3Bob25lIGFjY2VzcyBDaHJvbWUgYnkgdmlzaXRpbmcgY2hyb21lOi8vZmxhZ3MvIGFuZCBlbmFibGluZyAndW5zYWZlbHktdHJlYXQtaW5zZWN1cmUtb3JpZ2luLWFzLXNlY3VyZSdcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IGluYm91bmRBdWRpb1N0YXRzIH0gZnJvbSBcIi4vSW5ib3VuZEF1ZGlvU3RhdHNcIjtcclxuaW1wb3J0IHsgaW5ib3VuZFZpZGVvU3RhdHMgfSBmcm9tIFwiLi9JbmJvdW5kVmlkZW9TdGF0c1wiO1xyXG5pbXBvcnQgeyBkYXRhQ2hhbm5lbFN0YXRzIH0gZnJvbSBcIi4vRGF0YUNoYW5uZWxTdGF0c1wiO1xyXG5pbXBvcnQgeyBDYW5kaWRhdGVTdGF0IH0gZnJvbSBcIi4vQ2FuZGlkYXRlU3RhdFwiO1xyXG5pbXBvcnQgeyBDYW5kaWRhdGVQYWlyU3RhdHMgfSBmcm9tIFwiLi9DYW5kaWRhdGVQYWlyU3RhdHNcIjtcclxuaW1wb3J0IHsgT3V0Qm91bmRWaWRlb1N0YXRzIH0gZnJvbSBcIi4vT3V0Qm91bmRWaWRlb1N0YXRzXCI7XHJcbmltcG9ydCB7IFN0cmVhbVN0YXRzIH0gZnJvbSBcIi4vU3RyZWFtU3RhdHNcIjtcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBUaGUgQWdncmVnYXRlZCBTdGF0cyB0aGF0IGlzIGdlbmVyYXRlZCBmcm9tIHRoZSBSVEMgU3RhdHMgUmVwb3J0XHJcbiAqL1xyXG5cclxudHlwZSBSVENTdGF0c1R5cGVTUFMgPSBSVENTdGF0c1R5cGUgfCBcInN0cmVhbVwiXHJcbmV4cG9ydCBjbGFzcyBBZ2dyZWdhdGVkU3RhdHMge1xyXG4gICAgaW5ib3VuZFZpZGVvU3RhdHM6IGluYm91bmRWaWRlb1N0YXRzO1xyXG4gICAgaW5ib3VuZEF1ZGlvU3RhdHM6IGluYm91bmRBdWRpb1N0YXRzO1xyXG4gICAgbGFzdFZpZGVvU3RhdHM6IGluYm91bmRWaWRlb1N0YXRzO1xyXG4gICAgY2FuZGlkYXRlUGFpcjogQ2FuZGlkYXRlUGFpclN0YXRzXHJcbiAgICBkYXRhQ2hhbm5lbFN0YXRzOiBkYXRhQ2hhbm5lbFN0YXRzO1xyXG4gICAgbG9jYWxDYW5kaWRhdGVzOiBBcnJheTxDYW5kaWRhdGVTdGF0PjtcclxuICAgIHJlbW90ZUNhbmRpZGF0ZXM6IEFycmF5PENhbmRpZGF0ZVN0YXQ+O1xyXG4gICAgb3V0Qm91bmRWaWRlb1N0YXRzOiBPdXRCb3VuZFZpZGVvU3RhdHM7XHJcbiAgICBzdHJlYW1TdGF0czogU3RyZWFtU3RhdHNcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzID0gbmV3IGluYm91bmRWaWRlb1N0YXRzKCk7XHJcbiAgICAgICAgdGhpcy5pbmJvdW5kQXVkaW9TdGF0cyA9IG5ldyBpbmJvdW5kQXVkaW9TdGF0cygpO1xyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlUGFpciA9IG5ldyBDYW5kaWRhdGVQYWlyU3RhdHMoKTtcclxuICAgICAgICB0aGlzLmRhdGFDaGFubmVsU3RhdHMgPSBuZXcgZGF0YUNoYW5uZWxTdGF0cygpO1xyXG4gICAgICAgIHRoaXMub3V0Qm91bmRWaWRlb1N0YXRzID0gbmV3IE91dEJvdW5kVmlkZW9TdGF0cygpO1xyXG4gICAgICAgIHRoaXMuc3RyZWFtU3RhdHMgPSBuZXcgU3RyZWFtU3RhdHMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdhdGhlciBhbGwgdGhlIGluZm9ybWF0aW9uIGZyb20gdGhlIFJUQyBQZWVyIENvbm5lY3Rpb24gUmVwb3J0XHJcbiAgICAgKiBAcGFyYW0gcnRjU3RhdHNSZXBvcnQgLSBSVEMgU3RhdHMgUmVwb3J0XHJcbiAgICAgKi9cclxuICAgIHByb2Nlc3NTdGF0cyhydGNTdGF0c1JlcG9ydDogUlRDU3RhdHNSZXBvcnQpIHtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FuZGlkYXRlcyA9IG5ldyBBcnJheTxDYW5kaWRhdGVTdGF0PigpO1xyXG4gICAgICAgIHRoaXMucmVtb3RlQ2FuZGlkYXRlcyA9IG5ldyBBcnJheTxDYW5kaWRhdGVTdGF0PigpO1xyXG5cclxuICAgICAgICBydGNTdGF0c1JlcG9ydC5mb3JFYWNoKChzdGF0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0eXBlOiBSVENTdGF0c1R5cGVTUFMgPSBzdGF0LnR5cGU7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjYW5kaWRhdGUtcGFpclwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FuZGlkYXRlUGFpcihzdGF0KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjZXJ0aWZpY2F0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImNvZGVjXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiY3NyY1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImRhdGEtY2hhbm5lbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRGF0YUNoYW5uZWwoc3RhdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiaW5ib3VuZC1ydHBcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUluQm91bmRSVFAoc3RhdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibG9jYWwtY2FuZGlkYXRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVMb2NhbENhbmRpZGF0ZShzdGF0KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtZWRpYS1zb3VyY2VcIjpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJvdXRib3VuZC1ydHBcIjpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJwZWVyLWNvbm5lY3Rpb25cIjpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyZW1vdGUtY2FuZGlkYXRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZW1vdGVDYW5kaWRhdGUoc3RhdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicmVtb3RlLWluYm91bmQtcnRwXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicmVtb3RlLW91dGJvdW5kLXJ0cFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVtb3RlT3V0Qm91bmQoc3RhdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidHJhY2tcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVRyYWNrKHN0YXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zcG9ydFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInN0cmVhbVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU3RyZWFtKHN0YXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJ1bmhhbmRsZWQgU3RhdCBUeXBlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgc3RhdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzIHN0cmVhbSBzdGF0cyBkYXRhIGZyb20gd2VicnRjXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBzdGF0IHRoZSBzdGF0cyBjb21pbmcgaW4gZnJvbSB3ZWJydGNcclxuICAgICAqL1xyXG4gICAgaGFuZGxlU3RyZWFtKHN0YXQ6IGFueSkge1xyXG4gICAgICAgIHRoaXMuc3RyZWFtU3RhdHMgPSBzdGF0XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogUHJvY2VzcyB0aGUgSWNlIENhbmRpZGF0ZSBQYWlyIERhdGEgXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUNhbmRpZGF0ZVBhaXIoc3RhdDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5jYW5kaWRhdGVQYWlyLmJ5dGVzUmVjZWl2ZWQgPSBzdGF0LmJ5dGVzUmVjZWl2ZWQ7XHJcbiAgICAgICAgdGhpcy5jYW5kaWRhdGVQYWlyLmJ5dGVzU2VudCA9IHN0YXQuYnl0ZXNTZW50O1xyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlUGFpci5sb2NhbENhbmRpZGF0ZUlkID0gc3RhdC5sb2NhbENhbmRpZGF0ZUlkXHJcbiAgICAgICAgdGhpcy5jYW5kaWRhdGVQYWlyLnJlbW90ZUNhbmRpZGF0ZUlkID0gc3RhdC5yZW1vdGVDYW5kaWRhdGVJZFxyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlUGFpci5ub21pbmF0ZWQgPSBzdGF0Lm5vbWluYXRlZDtcclxuICAgICAgICB0aGlzLmNhbmRpZGF0ZVBhaXIucmVhZGFibGUgPSBzdGF0LnJlYWRhYmxlO1xyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlUGFpci5zZWxlY3RlZCA9IHN0YXQuc2VsZWN0ZWQ7XHJcbiAgICAgICAgdGhpcy5jYW5kaWRhdGVQYWlyLndyaXRhYmxlID0gc3RhdC53cml0YWJsZTtcclxuICAgICAgICB0aGlzLmNhbmRpZGF0ZVBhaXIuc3RhdGUgPSBzdGF0LnN0YXRlO1xyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlUGFpci5jdXJyZW50Um91bmRUcmlwVGltZSA9IHN0YXQuY3VycmVudFJvdW5kVHJpcFRpbWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogUHJvY2VzcyB0aGUgRGF0YSBDaGFubmVsIERhdGEgXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZURhdGFDaGFubmVsKHN0YXQ6IGFueSkge1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxTdGF0cy5ieXRlc1JlY2VpdmVkID0gc3RhdC5kYXRheXRlc1JlY2VpdmVkO1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxTdGF0cy5ieXRlc1NlbnQgPSBzdGF0LmJ5dGVzU2VudFxyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxTdGF0cy5kYXRhQ2hhbm5lbElkZW50aWZpZXIgPSBzdGF0LmRhdGFDaGFubmVsSWRlbnRpZmllclxyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxTdGF0cy5pZCA9IHN0YXQuaWRcclxuICAgICAgICB0aGlzLmRhdGFDaGFubmVsU3RhdHMubGFiZWwgPSBzdGF0LmxhYmVsXHJcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbFN0YXRzLm1lc3NhZ2VzUmVjZWl2ZWQgPSBzdGF0Lm1lc3NhZ2VzUmVjZWl2ZWRcclxuICAgICAgICB0aGlzLmRhdGFDaGFubmVsU3RhdHMubWVzc2FnZXNTZW50ID0gc3RhdC5tZXNzYWdlc1NlbnRcclxuICAgICAgICB0aGlzLmRhdGFDaGFubmVsU3RhdHMucHJvdG9jb2wgPSBzdGF0LnByb3RvY29sXHJcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbFN0YXRzLnN0YXRlID0gc3RhdC5zdGF0ZVxyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxTdGF0cy50aW1lc3RhbXAgPSBzdGF0LnRpbWVzdGFtcFxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIFByb2Nlc3MgdGhlIExvY2FsIEljZSBDYW5kaWRhdGUgRGF0YSBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlTG9jYWxDYW5kaWRhdGUoc3RhdDogYW55KSB7XHJcbiAgICAgICAgbGV0IGxvY2FsQ2FuZGlkYXRlID0gbmV3IENhbmRpZGF0ZVN0YXQoKTtcclxuICAgICAgICBsb2NhbENhbmRpZGF0ZS5sYWJlbCA9IFwibG9jYWwtY2FuZGlkYXRlXCJcclxuICAgICAgICBsb2NhbENhbmRpZGF0ZS5hZGRyZXNzID0gc3RhdC5hZGRyZXNzO1xyXG4gICAgICAgIGxvY2FsQ2FuZGlkYXRlLnBvcnQgPSBzdGF0LnBvcnRcclxuICAgICAgICBsb2NhbENhbmRpZGF0ZS5wcm90b2NvbCA9IHN0YXQucHJvdG9jb2w7XHJcbiAgICAgICAgbG9jYWxDYW5kaWRhdGUuY2FuZGlkYXRlVHlwZSA9IHN0YXQuY2FuZGlkYXRlVHlwZTtcclxuICAgICAgICBsb2NhbENhbmRpZGF0ZS5pZCA9IHN0YXQuaWQ7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhbmRpZGF0ZXMucHVzaChsb2NhbENhbmRpZGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzIHRoZSBSZW1vdGUgSWNlIENhbmRpZGF0ZSBEYXRhIFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVSZW1vdGVDYW5kaWRhdGUoc3RhdDogYW55KSB7XHJcbiAgICAgICAgbGV0IFJlbW90ZUNhbmRpZGF0ZSA9IG5ldyBDYW5kaWRhdGVTdGF0KCk7XHJcbiAgICAgICAgUmVtb3RlQ2FuZGlkYXRlLmxhYmVsID0gXCJsb2NhbC1jYW5kaWRhdGVcIlxyXG4gICAgICAgIFJlbW90ZUNhbmRpZGF0ZS5hZGRyZXNzID0gc3RhdC5hZGRyZXNzO1xyXG4gICAgICAgIFJlbW90ZUNhbmRpZGF0ZS5wb3J0ID0gc3RhdC5wb3J0XHJcbiAgICAgICAgUmVtb3RlQ2FuZGlkYXRlLnByb3RvY29sID0gc3RhdC5wcm90b2NvbDtcclxuICAgICAgICBSZW1vdGVDYW5kaWRhdGUuaWQgPSBzdGF0LmlkO1xyXG4gICAgICAgIFJlbW90ZUNhbmRpZGF0ZS5jYW5kaWRhdGVUeXBlID0gc3RhdC5jYW5kaWRhdGVUeXBlO1xyXG4gICAgICAgIHRoaXMucmVtb3RlQ2FuZGlkYXRlcy5wdXNoKFJlbW90ZUNhbmRpZGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogUHJvY2VzcyB0aGUgSW5ib3VuZCBSVFAgQXVkaW8gYW5kIFZpZGVvIERhdGEgIFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVJbkJvdW5kUlRQKHN0YXQ6IGFueSkge1xyXG4gICAgICAgIHN3aXRjaCAoc3RhdC5raW5kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ2aWRlb1wiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy50aW1lc3RhbXAgPSBzdGF0LnRpbWVzdGFtcDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYnl0ZXNSZWNlaXZlZCA9IHN0YXQuYnl0ZXNSZWNlaXZlZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzRGVjb2RlZCA9IHN0YXQuZnJhbWVzRGVjb2RlZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMucGFja2V0c0xvc3QgPSBzdGF0LnBhY2tldHNMb3N0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5qaXR0ZXIgPSBzdGF0LmppdHRlcjtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJ5dGVzUmVjZWl2ZWRTdGFydCA9ICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJ5dGVzUmVjZWl2ZWRTdGFydCA9PSBudWxsKSA/IHN0YXQuYnl0ZXNSZWNlaXZlZCA6IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYnl0ZXNSZWNlaXZlZFN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXNEZWNvZGVkU3RhcnQgPSAodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXNEZWNvZGVkU3RhcnQgPT0gbnVsbCkgPyBzdGF0LmZyYW1lc0RlY29kZWQgOiB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lc0RlY29kZWRTdGFydDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMudGltZXN0YW1wU3RhcnQgPSAodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy50aW1lc3RhbXBTdGFydCA9PSBudWxsKSA/IHN0YXQudGltZXN0YW1wIDogdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy50aW1lc3RhbXBTdGFydDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzRGVjb2RlZFN0YXJ0ID0gKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzRGVjb2RlZFN0YXJ0ID09IG51bGwpID8gc3RhdC5mcmFtZXNEZWNvZGVkIDogdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXNEZWNvZGVkU3RhcnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGFzdFZpZGVvU3RhdHMgIT0gdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYml0cmF0ZSA9IDggKiAoc3RhdC5ieXRlc1JlY2VpdmVkIC0gdGhpcy5sYXN0VmlkZW9TdGF0cy5ieXRlc1JlY2VpdmVkKSAvIChzdGF0LnRpbWVzdGFtcCAtIHRoaXMubGFzdFZpZGVvU3RhdHMudGltZXN0YW1wKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJpdHJhdGUgPSBNYXRoLmZsb29yKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYml0cmF0ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMubG93Qml0cmF0ZSA9ICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0JpdHJhdGUgPT0gdW5kZWZpbmVkIHx8IE51bWJlci5pc05hTih0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0JpdHJhdGUpKSA/IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYml0cmF0ZSA6IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMubG93Qml0cmF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0JpdHJhdGUgPSAodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5iaXRyYXRlIDwgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5sb3dCaXRyYXRlIHx8IE51bWJlci5pc05hTih0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0JpdHJhdGUpKSA/IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYml0cmF0ZSA6IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMubG93Qml0cmF0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5oaWdoQml0cmF0ZSA9ICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmhpZ2hCaXRyYXRlID09IHVuZGVmaW5lZCB8fCBOdW1iZXIuaXNOYU4odGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5oaWdoQml0cmF0ZSkpID8gdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5iaXRyYXRlIDogdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5oaWdoQml0cmF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmhpZ2hCaXRyYXRlID0gKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYml0cmF0ZSA+IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuaGlnaEJpdHJhdGUpID8gdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5iaXRyYXRlIDogdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5oaWdoQml0cmF0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5hdmdCaXRyYXRlID0gOCAqICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJ5dGVzUmVjZWl2ZWQgLSB0aGlzLmxhc3RWaWRlb1N0YXRzLmJ5dGVzUmVjZWl2ZWQpIC8gKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMudGltZXN0YW1wIC0gdGhpcy5sYXN0VmlkZW9TdGF0cy50aW1lc3RhbXApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYXZnQml0cmF0ZSA9IE1hdGguZmxvb3IodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5hdmdCaXRyYXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXJhdGUgPSAodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXNEZWNvZGVkIC0gdGhpcy5sYXN0VmlkZW9TdGF0cy5mcmFtZXNEZWNvZGVkKSAvICgodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy50aW1lc3RhbXAgLSB0aGlzLmxhc3RWaWRlb1N0YXRzLnRpbWVzdGFtcCkgLyAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lcmF0ZSA9IE1hdGguZmxvb3IodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXJhdGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0ZyYW1lcmF0ZSA9ICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0ZyYW1lcmF0ZSA9PSB1bmRlZmluZWQgfHwgTnVtYmVyLmlzTmFOKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMubG93RnJhbWVyYXRlKSkgPyB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lcmF0ZSA6IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMubG93RnJhbWVyYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMubG93RnJhbWVyYXRlID0gKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVyYXRlIDwgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5sb3dGcmFtZXJhdGUpID8gdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXJhdGUgOiB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0ZyYW1lcmF0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5oaWdoRnJhbWVyYXRlID0gKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuaGlnaEZyYW1lcmF0ZSA9PSB1bmRlZmluZWQgfHwgTnVtYmVyLmlzTmFOKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuaGlnaEZyYW1lcmF0ZSkpID8gdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXJhdGUgOiB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmhpZ2hGcmFtZXJhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5oaWdoRnJhbWVyYXRlID0gKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVyYXRlIDwgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5oaWdoRnJhbWVyYXRlKSA/IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVyYXRlIDogdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5oaWdoRnJhbWVyYXRlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmF2ZXJhZ2VGcmFtZVJhdGUgPSAodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXNEZWNvZGVkIC0gdGhpcy5sYXN0VmlkZW9TdGF0cy5mcmFtZXNEZWNvZGVkU3RhcnQpIC8gKCh0aGlzLmluYm91bmRWaWRlb1N0YXRzLnRpbWVzdGFtcCAtIHRoaXMubGFzdFZpZGVvU3RhdHMudGltZXN0YW1wU3RhcnQpIC8gMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5hdmVyYWdlRnJhbWVSYXRlID0gTWF0aC5mbG9vcih0aGlzLmluYm91bmRWaWRlb1N0YXRzLmF2ZXJhZ2VGcmFtZVJhdGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0VmlkZW9TdGF0cyA9IHsgLi4udGhpcy5pbmJvdW5kVmlkZW9TdGF0cyB9O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJhdWRpb1wiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kQXVkaW9TdGF0cy5ieXRlc1JlY2VpdmVkID0gc3RhdC5ieXRlc1JlY2VpdmVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRBdWRpb1N0YXRzLmppdHRlciA9IHN0YXQuaml0dGVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kQXVkaW9TdGF0cy5wYWNrZXRzTG9zdCA9IHN0YXQucGFja2V0c2xvc3Q7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRBdWRpb1N0YXRzLnRpbWVzdGFtcCA9IHN0YXQudGltZXN0YW1wO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiS2luZCBpcyBub3QgaGFuZGxlZFwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIFByb2Nlc3MgdGhlIG91dGJvdW5kIFJUUCBBdWRpbyBhbmQgVmlkZW8gRGF0YSAgXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZVJlbW90ZU91dEJvdW5kKHN0YXQ6IGFueSkge1xyXG4gICAgICAgIHN3aXRjaCAoc3RhdC5raW5kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ2aWRlb1wiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vdXRCb3VuZFZpZGVvU3RhdHMuYnl0ZXNTZW50ID0gc3RhdC5ieXRlc1NlbnQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm91dEJvdW5kVmlkZW9TdGF0cy5pZCA9IHN0YXQuaWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm91dEJvdW5kVmlkZW9TdGF0cy5sb2NhbElkID0gc3RhdC5sb2NhbElkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vdXRCb3VuZFZpZGVvU3RhdHMucGFja2V0c1NlbnQgPSBzdGF0LnBhY2tldHNTZW50O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vdXRCb3VuZFZpZGVvU3RhdHMucmVtb3RlVGltZXN0YW1wID0gc3RhdC5yZW1vdGVUaW1lc3RhbXA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm91dEJvdW5kVmlkZW9TdGF0cy50aW1lc3RhbXAgPSBzdGF0LnRpbWVzdGFtcDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYXVkaW9cIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBQcm9jZXNzIHRoZSBJbmJvdW5kIFZpZGVvIFRyYWNrIERhdGEgIFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVUcmFjayhzdGF0OiBhbnkpIHtcclxuXHJcbiAgICAgICAgLy8gd2Ugb25seSB3YW50IHRvIGV4dHJhY3Qgc3RhdHMgZnJvbSB0aGUgdmlkZW8gdHJhY2tcclxuICAgICAgICBpZihzdGF0LnR5cGUgPT09ICd0cmFjaycgJiYgKHN0YXQudHJhY2tJZGVudGlmaWVyID09PSAndmlkZW9fbGFiZWwnIHx8IHN0YXQua2luZCA9PT0gJ3ZpZGVvJykpIHtcclxuICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXNEcm9wcGVkID0gc3RhdC5mcmFtZXNEcm9wcGVkO1xyXG4gICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lc1JlY2VpdmVkID0gc3RhdC5mcmFtZXNSZWNlaXZlZDtcclxuICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXNEcm9wcGVkUGVyY2VudGFnZSA9IHN0YXQuZnJhbWVzRHJvcHBlZCAvIHN0YXQuZnJhbWVzUmVjZWl2ZWQgKiAxMDA7XHJcbiAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVIZWlnaHQgPSBzdGF0LmZyYW1lSGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lV2lkdGggPSBzdGF0LmZyYW1lV2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVIZWlnaHRTdGFydCA9ICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lSGVpZ2h0U3RhcnQgPT0gbnVsbCkgPyBzdGF0LmZyYW1lSGVpZ2h0IDogdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZUhlaWdodFN0YXJ0O1xyXG4gICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lV2lkdGhTdGFydCA9ICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lV2lkdGhTdGFydCA9PSBudWxsKSA/IHN0YXQuZnJhbWVXaWR0aCA6IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVXaWR0aFN0YXJ0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBDaGVjayBpZiBhIHZhbHVlIGNvbWluZyBpbiBmcm9tIG91ciBzdGF0cyBpcyBhY3R1YWxseSBhIG51bWJlciAgXHJcbiAgICAgKi9cclxuICAgIGlzTnVtYmVyKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsIi8qKiBcclxuICogSUNFIENhbmRpZGF0ZSBQYWlyIFN0YXRzIGNvbGxlY3RlZCBmcm9tIHRoZSBSVEMgU3RhdHMgUmVwb3J0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2FuZGlkYXRlUGFpclN0YXRzIHtcclxuICAgIGJ5dGVzUmVjZWl2ZWQ6IG51bWJlcjtcclxuICAgIGJ5dGVzU2VudDogbnVtYmVyO1xyXG4gICAgbG9jYWxDYW5kaWRhdGVJZDogc3RyaW5nO1xyXG4gICAgcmVtb3RlQ2FuZGlkYXRlSWQ6IHN0cmluZztcclxuICAgIG5vbWluYXRlZDogYm9vbGVhbjtcclxuICAgIHJlYWRhYmxlOiBib29sZWFuO1xyXG4gICAgd3JpdGFibGU6IGJvb2xlYW47XHJcbiAgICBzZWxlY3RlZDogYm9vbGVhbjtcclxuICAgIHN0YXRlOiBzdHJpbmc7XHJcbiAgICBjdXJyZW50Um91bmRUcmlwVGltZTogbnVtYmVyO1xyXG59XHJcbiIsIi8qKiBcclxuICogSUNFIENhbmRpZGF0ZSBTdGF0IGNvbGxlY3RlZCBmcm9tIHRoZSBSVEMgU3RhdHMgUmVwb3J0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2FuZGlkYXRlU3RhdCB7XHJcbiAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIGFkZHJlc3M6IHN0cmluZztcclxuICAgIGNhbmRpZGF0ZVR5cGU6IHN0cmluZztcclxuICAgIHBvcnQ6IG51bWJlcjtcclxuICAgIHByb3RvY29sOiBcInRjcFwiIHwgXCJ1ZHBcIlxyXG59IiwiLyoqIFxyXG4gKiBEYXRhIENoYW5uZWwgU3RhdHMgY29sbGVjdGVkIGZyb20gdGhlIFJUQyBTdGF0cyBSZXBvcnRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBkYXRhQ2hhbm5lbFN0YXRzIHtcclxuICAgIGJ5dGVzUmVjZWl2ZWQ6IG51bWJlcjtcclxuICAgIGJ5dGVzU2VudDogbnVtYmVyO1xyXG4gICAgZGF0YUNoYW5uZWxJZGVudGlmaWVyOiBudW1iZXI7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgbGFiZWw6IHN0cmluZztcclxuICAgIG1lc3NhZ2VzUmVjZWl2ZWQ6IG51bWJlcjtcclxuICAgIG1lc3NhZ2VzU2VudDogbnVtYmVyO1xyXG4gICAgcHJvdG9jb2w6IHN0cmluZztcclxuICAgIHN0YXRlOiBzdHJpbmc7XHJcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcclxufSIsIi8qKiBcclxuICogSW5ib3VuZCBBdWRpbyBTdGF0cyBjb2xsZWN0ZWQgZnJvbSB0aGUgUlRDIFN0YXRzIFJlcG9ydFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIGluYm91bmRBdWRpb1N0YXRzIHtcclxuICAgIGJ5dGVzUmVjZWl2ZWQ6IG51bWJlcjtcclxuICAgIGppdHRlcjogbnVtYmVyO1xyXG4gICAgcGFja2V0c0xvc3Q6IG51bWJlcjtcclxuICAgIHRpbWVzdGFtcDogbnVtYmVyO1xyXG59IiwiLyoqIFxyXG4gKiBJbmJvdW5kIFZpZGVvIFN0YXRzIGNvbGxlY3RlZCBmcm9tIHRoZSBSVEMgU3RhdHMgUmVwb3J0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgaW5ib3VuZFZpZGVvU3RhdHMge1xyXG4gICAgcmVjZWl2ZVRvQ29tcG9zaXRlTXM6IG51bWJlciA9IDA7XHJcbiAgICB0aW1lc3RhbXA6IG51bWJlciA9IDA7XHJcbiAgICBieXRlc1JlY2VpdmVkOiBudW1iZXIgPSAwO1xyXG4gICAgZnJhbWVzRGVjb2RlZDogbnVtYmVyID0gMDtcclxuICAgIHBhY2tldHNMb3N0OiBudW1iZXIgPSAwO1xyXG4gICAgYnl0ZXNSZWNlaXZlZFN0YXJ0OiBudW1iZXIgPSAwO1xyXG4gICAgZnJhbWVzRGVjb2RlZFN0YXJ0OiBudW1iZXIgPSAwO1xyXG4gICAgdGltZXN0YW1wU3RhcnQ6IG51bWJlciA9IDA7XHJcbiAgICBiaXRyYXRlOiBudW1iZXIgPSAwO1xyXG4gICAgbG93Qml0cmF0ZTogbnVtYmVyID0gMDtcclxuICAgIGhpZ2hCaXRyYXRlOiBudW1iZXIgPSAwO1xyXG4gICAgYXZnQml0cmF0ZTogbnVtYmVyID0gMDtcclxuICAgIGZyYW1lcmF0ZTogbnVtYmVyID0gMDtcclxuICAgIGxvd0ZyYW1lcmF0ZTogbnVtYmVyID0gMDtcclxuICAgIGhpZ2hGcmFtZXJhdGU6IG51bWJlciA9IDA7XHJcbiAgICBhdmVyYWdlRnJhbWVSYXRlOiBudW1iZXIgPSAwO1xyXG4gICAgZnJhbWVzRHJvcHBlZDogbnVtYmVyID0gMDtcclxuICAgIGZyYW1lc1JlY2VpdmVkOiBudW1iZXIgPSAwO1xyXG4gICAgZnJhbWVzRHJvcHBlZFBlcmNlbnRhZ2U6IG51bWJlciA9IDA7XHJcbiAgICBmcmFtZUhlaWdodDogbnVtYmVyID0gMDtcclxuICAgIGZyYW1lV2lkdGg6IG51bWJlciA9IDA7XHJcbiAgICBmcmFtZUhlaWdodFN0YXJ0OiBudW1iZXIgPSAwO1xyXG4gICAgZnJhbWVXaWR0aFN0YXJ0OiBudW1iZXIgPSAwO1xyXG4gICAgaml0dGVyOiBudW1iZXIgPSAwO1xyXG59IiwiLyoqIFxyXG4gKiBPdXRib3VuZCBWaWRlbyBTdGF0cyBjb2xsZWN0ZWQgZnJvbSB0aGUgUlRDIFN0YXRzIFJlcG9ydFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE91dEJvdW5kVmlkZW9TdGF0cyB7XHJcbiAgICBieXRlc1NlbnQ6IG51bWJlcjtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBsb2NhbElkOiBzdHJpbmc7XHJcbiAgICBwYWNrZXRzU2VudDogbnVtYmVyO1xyXG4gICAgcmVtb3RlVGltZXN0YW1wOiBudW1iZXI7XHJcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcclxufSIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IEFnZ3JlZ2F0ZWRTdGF0cyB9IGZyb20gXCIuL0FnZ3JlZ2F0ZWRTdGF0c1wiO1xyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgdGhlIFBlZXIgQ29ubmVjdGlvbiBcclxuICovXHJcbmV4cG9ydCBjbGFzcyBQZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIge1xyXG4gICAgcGVlckNvbm5lY3Rpb246IFJUQ1BlZXJDb25uZWN0aW9uO1xyXG4gICAgYWdncmVnYXRlZFN0YXRzOiBBZ2dyZWdhdGVkU3RhdHM7XHJcbiAgICBmb3JjZVR1cm46IGJvb2xlYW47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBuZXcgUlRDIFBlZXIgQ29ubmVjdGlvbiBjbGllbnRcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gUGVlciBjb25uZWN0aW9uIE9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogUlRDQ29uZmlndXJhdGlvbiwgdHVyblN0YXRlOiBib29sZWFuKSB7XHJcblxyXG4gICAgICAgIC8vIFNldCB0aGUgdHVybiBzdGF0ZSB0byB0cnVlIG9yIGZhbHNlIGZvciBydGMgb3B0aW9uc1xyXG4gICAgICAgIHRoaXMuZm9yY2VUdXJuID0gdHVyblN0YXRlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mb3JjZVR1cm4gPT09IHRydWUpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5pY2VUcmFuc3BvcnRQb2xpY3kgPSBcInJlbGF5XCI7XHJcbiAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJGb3JjaW5nIFRVUk4gdXNhZ2UgYnkgc2V0dGluZyBJQ0UgVHJhbnNwb3J0IFBvbGljeSBpbiBwZWVyIGNvbm5lY3Rpb24gY29uZmlnLlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGJ1aWxkIGEgbmV3IHBlZXIgY29ubmVjdGlvbiB3aXRoIHRoZSBvcHRpb25zXHJcbiAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbiA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbihvcHRpb25zKTtcclxuICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UgPSAoZXY6IEV2ZW50KSA9PiB0aGlzLmhhbmRsZVNpZ25hbFN0YXRlQ2hhbmdlKGV2KTtcclxuICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gKGV2OiBFdmVudCkgPT4gdGhpcy5oYW5kbGVJY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2UoZXYpO1xyXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24ub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSA9IChldjogRXZlbnQpID0+IHRoaXMuaGFuZGxlSWNlR2F0aGVyaW5nU3RhdGVDaGFuZ2UoZXYpO1xyXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24ub250cmFjayA9IChldjogUlRDVHJhY2tFdmVudCkgPT4gdGhpcy5oYW5kbGVPblRyYWNrKGV2KTtcclxuICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlID0gKGV2OiBSVENQZWVyQ29ubmVjdGlvbkljZUV2ZW50KSA9PiB0aGlzLmhhbmRlbEljZUNhbmRpZGF0ZShldik7XHJcbiAgICAgICAgdGhpcy5hZ2dyZWdhdGVkU3RhdHMgPSBuZXcgQWdncmVnYXRlZFN0YXRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYW4gb2ZmZXIgZm9yIHRoZSBXZWIgUlRDIGhhbmRzaGFrZSBhbmQgc2VuZCB0aGUgb2ZmZXIgdG8gdGhlIHNpZ25hbGluZyBzZXJ2ZXIgdmlhIHdlYnNvY2tldFxyXG4gICAgICogQHBhcmFtIG9mZmVyT3B0aW9ucyAtIFJUQyBPZmZlciBPcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZU9mZmVyKG9mZmVyT3B0aW9uczogUlRDT2ZmZXJPcHRpb25zLCB1c2VNaWM6IGJvb2xlYW4pIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiQ3JlYXRlIE9mZmVyXCIsIDYpO1xyXG5cclxuICAgICAgICB0aGlzLnNldHVwVHJhY2tzVG9TZW5kQXN5bmModXNlTWljKS5maW5hbGx5KCgpID0+IHsgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIob2ZmZXJPcHRpb25zKS50aGVuKChvZmZlcjogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uSW5pdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dUZXh0T3ZlcmxheUNvbm5lY3RpbmcoKTtcclxuICAgICAgICAgICAgb2ZmZXIuc2RwID0gdGhpcy5tdW5nZU9mZmVyKG9mZmVyLnNkcCwgdXNlTWljKTtcclxuICAgICAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKG9mZmVyKTtcclxuICAgICAgICAgICAgdGhpcy5vblNlbmRXZWJSVENPZmZlcihvZmZlcik7XHJcbiAgICAgICAgfSkuY2F0Y2goKG9uUmVqZWN0ZWRSZWFzb246IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dUZXh0T3ZlcmxheVNldHVwRmFpbHVyZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgQWdncmVnYXRlZCBTdGF0cyBhbmQgdGhlbiBmaXJlIGEgb25WaWRlbyBTdGF0cyBldmVudFxyXG4gICAgICovXHJcbiAgICBnZW5lcmF0ZVN0YXRzKCkge1xyXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uZ2V0U3RhdHMobnVsbCkudGhlbigoU3RhdHNEYXRhOiBSVENTdGF0c1JlcG9ydCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFnZ3JlZ2F0ZWRTdGF0cy5wcm9jZXNzU3RhdHMoU3RhdHNEYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5vblZpZGVvU3RhdHModGhpcy5hZ2dyZWdhdGVkU3RhdHMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xvc2UgVGhlIFBlZXIgQ29ubmVjdGlvblxyXG4gICAgICovXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5wZWVyQ29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmNsb3NlKClcclxuICAgICAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTW9kaWZ5IHRoZSBTZXNzaW9uIERlc2NyaXB0b3IgXHJcbiAgICAgKiBAcGFyYW0gc2RwIC0gU2Vzc2lvbiBEZXNjcmlwdG9yIGFzIGEgc3RyaW5nXHJcbiAgICAgKiBAcGFyYW0gdXNlTWljIC0gSXMgdGhlIG1pY3JvcGhvbmUgaW4gdXNlXHJcbiAgICAgKiBAcmV0dXJucyBBIG1vZGlmaWVkIFNlc3Npb24gRGVzY3JpcHRvclxyXG4gICAgICovXHJcbiAgICBtdW5nZU9mZmVyKHNkcDogc3RyaW5nLCB1c2VNaWM6IGJvb2xlYW4pIHtcclxuICAgICAgICBsZXQgdGVtcCA9IHNkcDtcclxuICAgICAgICB0ZW1wLnJlcGxhY2UoLyhhPWZtdHA6XFxkKyAuKmxldmVsLWFzeW1tZXRyeS1hbGxvd2VkPS4qKVxcclxcbi9nbSwgXCIkMTt4LWdvb2dsZS1zdGFydC1iaXRyYXRlPTEwMDAwO3gtZ29vZ2xlLW1heC1iaXRyYXRlPTEwMDAwMFxcclxcblwiKTtcclxuICAgICAgICB0ZW1wLnJlcGxhY2UoJ3VzZWluYmFuZGZlYz0xJywgJ3VzZWluYmFuZGZlYz0xO3N0ZXJlbz0xO3Nwcm9wLW1heGNhcHR1cmVyYXRlPTQ4MDAwJyk7XHJcblxyXG4gICAgICAgIC8vIEluY3JlYXNlIHRoZSBjYXB0dXJlIHJhdGUgb2YgYXVkaW8gc28gd2UgY2FuIGhhdmUgaGlnaGVyIHF1YWxpdHkgYXVkaW8gb3ZlciBtaWNcclxuICAgICAgICBpZiAodXNlTWljKSB7XHJcbiAgICAgICAgICAgIHRlbXAgPSB0ZW1wLnJlcGxhY2UoJ3VzZWluYmFuZGZlYz0xJywgJ3VzZWluYmFuZGZlYz0xO3Nwcm9wLW1heGNhcHR1cmVyYXRlPTQ4MDAwO21heGF2ZXJhZ2ViaXRyYXRlPTUxMDAwMCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRlbXA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIFJlbW90ZSBEZXNjcmlwdG9yIGZyb20gdGhlIHNpZ25hbGluZyBzZXJ2ZXIgdG8gdGhlIFJUQyBQZWVyIENvbm5lY3Rpb24gXHJcbiAgICAgKiBAcGFyYW0gc2RwQW5zd2VyIC0gUlRDIFNlc3Npb24gRGVzY3JpcHRvciBmcm9tIHRoZSBTaWduYWxpbmcgU2VydmVyXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUFuc3dlcihzZHBBbnN3ZXI6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbkluaXQpIHtcclxuICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKHNkcEFuc3dlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIGEgSWNlIENhbmRpZGF0ZSBpcyByZWNlaXZlZCBhZGQgdG8gdGhlIFJUQyBQZWVyIENvbm5lY3Rpb24gXHJcbiAgICAgKiBAcGFyYW0gaWNlQ2FuZGlkYXRlIC0gUlRDIEljZSBDYW5kaWRhdGUgZnJvbSB0aGUgU2lnbmFsaW5nIFNlcnZlclxyXG4gICAgICovXHJcbiAgICBoYW5kbGVPbkljZShpY2VDYW5kaWRhdGU6IFJUQ0ljZUNhbmRpZGF0ZSkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJwZWVyY29ubmVjdGlvbiBoYW5kbGVPbkljZVwiLCA2KTtcclxuXHJcbiAgICAgICAgLy8gLy8gaWYgZm9yY2luZyBUVVJOLCByZWplY3QgYW55IGNhbmRpZGF0ZXMgbm90IHJlbGF5XHJcbiAgICAgICAgaWYgKHRoaXMuZm9yY2VUdXJuKSB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIG5vIHJlbGF5IGFkZHJlc3MgaXMgZm91bmQsIGlmIHNvLCB3ZSBhcmUgYXNzdW1pbmcgaXQgbWVhbnMgbm8gVFVSTiBzZXJ2ZXJcclxuICAgICAgICAgICAgaWYgKGljZUNhbmRpZGF0ZS5jYW5kaWRhdGUuaW5kZXhPZihcInJlbGF5XCIpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkluZm8oTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgYERyb3BwaW5nIGNhbmRpZGF0ZSBiZWNhdXNlIGl0IHdhcyBub3QgVFVSTiByZWxheS4gfCBUeXBlPSAke2ljZUNhbmRpZGF0ZS50eXBlfSB8IFByb3RvY29sPSAke2ljZUNhbmRpZGF0ZS5wcm90b2NvbH0gfCBBZGRyZXNzPSR7aWNlQ2FuZGlkYXRlLmFkZHJlc3N9IHwgUG9ydD0ke2ljZUNhbmRpZGF0ZS5wb3J0fSB8YCwgNik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uYWRkSWNlQ2FuZGlkYXRlKGljZUNhbmRpZGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIHRoZSBSVEMgUGVlciBDb25uZWN0aW9uIFNpZ25hbGluZyBzZXJ2ZXIgc3RhdGUgQ2hhbmdlc1xyXG4gICAgICogQHBhcmFtIHN0YXRlIC0gU2lnbmFsaW5nIFNlcnZlciBTdGF0ZSBDaGFuZ2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlU2lnbmFsU3RhdGVDaGFuZ2Uoc3RhdGU6IEV2ZW50KSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCAnc2lnbmFsaW5nIHN0YXRlIGNoYW5nZTogJyArIHN0YXRlLCA2KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZSB3aGVuIHRoZSBJY2UgQ29ubmVjdGlvbiBTdGF0ZSBDaGFuZ2VzXHJcbiAgICAgKiBAcGFyYW0gc3RhdGUgLSBJY2UgQ29ubmVjdGlvbiBTdGF0ZVxyXG4gICAgICovXHJcbiAgICBoYW5kbGVJY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2Uoc3RhdGU6IEV2ZW50KSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCAnaWNlIGNvbm5lY3Rpb24gc3RhdGUgY2hhbmdlOiAnICsgc3RhdGUsIDYpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHdoZW4gdGhlIEljZSBHYXRoZXJpbmcgU3RhdGUgQ2hhbmdlc1xyXG4gICAgICogQHBhcmFtIHN0YXRlIC0gSWNlIEdhdGhlcmluZyBTdGF0ZSBDaGFuZ2VcclxuICAgICAqL1xyXG4gICAgaGFuZGxlSWNlR2F0aGVyaW5nU3RhdGVDaGFuZ2Uoc3RhdGU6IEV2ZW50KSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCAnaWNlIGdhdGhlcmluZyBzdGF0ZSBjaGFuZ2U6ICcgKyBKU09OLnN0cmluZ2lmeShzdGF0ZSksIDYpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWN0aXZhdGVzIHRoZSBvblRyYWNrIG1ldGhvZFxyXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIHdlYlJ0YyB0cmFjayBldmVudCBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25UcmFjayhldmVudDogUlRDVHJhY2tFdmVudCkge1xyXG4gICAgICAgIHRoaXMub25UcmFjayhldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY3RpdmF0ZXMgdGhlIG9uUGVlckljZUNhbmRpZGF0ZSBcclxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBwZWVyIGljZSBjYW5kaWRhdGVcclxuICAgICAqL1xyXG4gICAgaGFuZGVsSWNlQ2FuZGlkYXRlKGV2ZW50OiBSVENQZWVyQ29ubmVjdGlvbkljZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5vblBlZXJJY2VDYW5kaWRhdGUoZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW4gb3ZlcnJpZGUgbWV0aG9kIGZvciBvblRyYWNrIGZvciB1c2Ugb3V0c2lkZSBvZiB0aGUgUGVlckNvbm5lY3Rpb25Db250cm9sbGVyXHJcbiAgICAgKiBAcGFyYW0gdHJhY2tFdmVudCAtIFRoZSB3ZWJSdGMgdHJhY2sgZXZlbnRcclxuICAgICAqL1xyXG4gICAgb25UcmFjayh0cmFja0V2ZW50OiBSVENUcmFja0V2ZW50KSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFuIG92ZXJyaWRlIG1ldGhvZCBmb3Igb25QZWVySWNlQ2FuZGlkYXRlIGZvciB1c2Ugb3V0c2lkZSBvZiB0aGUgUGVlckNvbm5lY3Rpb25Db250cm9sbGVyXHJcbiAgICAgKiBAcGFyYW0gcGVlckNvbm5lY3Rpb25JY2VFdmVudCAtIFRoZSBwZWVyIGljZSBjYW5kaWRhdGVcclxuICAgICAqL1xyXG4gICAgb25QZWVySWNlQ2FuZGlkYXRlKHBlZXJDb25uZWN0aW9uSWNlRXZlbnQ6IFJUQ1BlZXJDb25uZWN0aW9uSWNlRXZlbnQpIHsgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHVwIHRyYWNrcyBvbiB0aGUgUlRDIFBlZXIgQ29ubmVjdGlvbiBcclxuICAgICAqL1xyXG4gICAgYXN5bmMgc2V0dXBUcmFja3NUb1NlbmRBc3luYyh1c2VNaWM6IGJvb2xlYW4pIHtcclxuXHJcbiAgICAgICAgbGV0IGhhc1RyYW5zY2VpdmVycyA9IHRoaXMucGVlckNvbm5lY3Rpb24uZ2V0VHJhbnNjZWl2ZXJzKCkubGVuZ3RoID4gMDtcclxuXHJcbiAgICAgICAgLy8gU2V0dXAgYSB0cmFuc2NlaXZlciBmb3IgZ2V0dGluZyBVRSB2aWRlb1xyXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uYWRkVHJhbnNjZWl2ZXIoXCJ2aWRlb1wiLCB7IGRpcmVjdGlvbjogXCJyZWN2b25seVwiIH0pO1xyXG5cclxuICAgICAgICAvLyBTZXR1cCBhIHRyYW5zY2VpdmVyIGZvciBzZW5kaW5nIG1pYyBhdWRpbyB0byBVRSBhbmQgcmVjZWl2aW5nIGF1ZGlvIGZyb20gVUVcclxuICAgICAgICBpZiAoIXVzZU1pYykge1xyXG4gICAgICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmFkZFRyYW5zY2VpdmVyKFwiYXVkaW9cIiwgeyBkaXJlY3Rpb246IFwicmVjdm9ubHlcIiB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgdGhlIGF1ZGlvIG9wdGlvbnMgYmFzZWQgb24gbWljIHVzYWdlXHJcbiAgICAgICAgICAgIGxldCBhdWRpb09wdGlvbnMgPSB1c2VNaWMgP1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9HYWluQ29udHJvbDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbENvdW50OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGVjaG9DYW5jZWxsYXRpb246IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhdGVuY3k6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9pc2VTdXBwcmVzc2lvbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlUmF0ZTogNDgwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlU2l6ZTogMTYsXHJcbiAgICAgICAgICAgICAgICAgICAgdm9sdW1lOiAxLjBcclxuICAgICAgICAgICAgICAgIH0gOiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCB0aGUgbWVkaWEgc2VuZCBvcHRpb25zIFxyXG4gICAgICAgICAgICBsZXQgbWVkaWFTZW5kT3B0aW9uczogTWVkaWFTdHJlYW1Db25zdHJhaW50cyA9IHtcclxuICAgICAgICAgICAgICAgIHZpZGVvOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGF1ZGlvOiBhdWRpb09wdGlvbnMsXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIE5vdGUgdXNpbmcgbWljIG9uIGFuZHJvaWQgY2hyb21lIHJlcXVpcmVzIFNTTCBvciBjaHJvbWU6Ly9mbGFncy8gXCJ1bnNhZmVseS10cmVhdC1pbnNlY3VyZS1vcmlnaW4tYXMtc2VjdXJlXCJcclxuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEobWVkaWFTZW5kT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGlmIChzdHJlYW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChoYXNUcmFuc2NlaXZlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0cmFuc2NlaXZlciBvZiB0aGlzLnBlZXJDb25uZWN0aW9uLmdldFRyYW5zY2VpdmVycygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlciAmJiB0cmFuc2NlaXZlci5yZWNlaXZlciAmJiB0cmFuc2NlaXZlci5yZWNlaXZlci50cmFjayAmJiB0cmFuc2NlaXZlci5yZWNlaXZlci50cmFjay5raW5kID09PSBcImF1ZGlvXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHJhY2sgb2Ygc3RyZWFtLmdldFRyYWNrcygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWNrLmtpbmQgJiYgdHJhY2sua2luZCA9PSBcImF1ZGlvXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuc2VuZGVyLnJlcGxhY2VUcmFjayh0cmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmRpcmVjdGlvbiA9IFwic2VuZHJlY3ZcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRyYWNrIG9mIHN0cmVhbS5nZXRUcmFja3MoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2sua2luZCAmJiB0cmFjay5raW5kID09IFwiYXVkaW9cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRUcmFuc2NlaXZlcih0cmFjaywgeyBkaXJlY3Rpb246IFwic2VuZHJlY3ZcIiB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uYWRkVHJhbnNjZWl2ZXIoXCJhdWRpb1wiLCB7IGRpcmVjdGlvbjogXCJyZWN2b25seVwiIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW5kIG92ZXJyaWRlIGV2ZW50IGZvciB3aGVuIHRoZSB2aWRlbyBzdGF0cyBhcmUgZmlyZWRcclxuICAgICAqIEBwYXJhbSBldmVudCAtIEFnZ3JlZ2F0ZWQgU3RhdHNcclxuICAgICAqL1xyXG4gICAgb25WaWRlb1N0YXRzKGV2ZW50OiBBZ2dyZWdhdGVkU3RhdHMpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgdG8gc2VuZCB0aGUgUlRDIG9mZmVyIHRvIHRoZSBTaWduYWxpbmcgc2VydmVyXHJcbiAgICAgKiBAcGFyYW0gb2ZmZXIgLSBSVEMgT2ZmZXJcclxuICAgICAqL1xyXG4gICAgb25TZW5kV2ViUlRDT2ZmZXIob2ZmZXI6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbkluaXQpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW4gb3ZlcnJpZGUgZm9yIHNob3dpbmcgdGhlIFBlZXIgY29ubmVjdGlvbiBjb25uZWN0aW5nIE92ZXJsYXlcclxuICAgICAqL1xyXG4gICAgc2hvd1RleHRPdmVybGF5Q29ubmVjdGluZygpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW4gb3ZlcnJpZGUgZm9yIHNob3dpbmcgdGhlIFBlZXIgY29ubmVjdGlvbiBGYWlsZWQgb3ZlcmxheVxyXG4gICAgICovXHJcbiAgICBzaG93VGV4dE92ZXJsYXlTZXR1cEZhaWx1cmUoKSB7IH1cclxufSIsIi8qKiBcclxuICogQ2xhc3MgdG8gaG9sZCB0aGUgc3RyZWFtIHN0YXRzIGRhdGEgY29taW5nIGluIGZyb20gd2ViUnRjXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3RyZWFtU3RhdHMge1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgc3RyZWFtSWRlbnRpZmllcjogc3RyaW5nXHJcbiAgICB0aW1lc3RhbXA6IG51bWJlclxyXG4gICAgdHJhY2tJZHM6IHN0cmluZ1tdXHJcbn0iLCJpbXBvcnQgeyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IFVlTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9VZU1lc3NhZ2VUeXBlc1wiO1xyXG5pbXBvcnQgeyBVZURlc2NyaXB0b3IgfSBmcm9tIFwiLi9VZURlc2NyaXB0b3JcIjtcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIFNlbmRpbmcgY29udHJvbCBtZXNzYWdlcyB0byB0aGUgVUUgSW5zdGFuY2VcclxuICovXHJcbmV4cG9ydCBjbGFzcyBVZUNvbnRyb2xNZXNzYWdlIGV4dGVuZHMgVWVEZXNjcmlwdG9yIHtcclxuXHJcblx0LyoqXHJcblx0ICogXHJcblx0ICogQHBhcmFtIGRhdGFDaGFubmVsQ29udHJvbGxlciAtIERhdGEgQ2hhbm5lbCBDb250cm9sbGVyXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IoZGF0YUNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXIpIHtcclxuXHRcdHN1cGVyKGRhdGFDaGFubmVsQ29udHJvbGxlcik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kIElGcmFtZSBSZXF1ZXN0IHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqL1xyXG5cdFNlbmRJRnJhbWVSZXF1ZXN0KCkge1xyXG5cdFx0bGV0IHBheWxvYWQgPSBuZXcgVWludDhBcnJheShbVWVNZXNzYWdlVHlwZS5pRnJhbWVSZXF1ZXN0XSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKHBheWxvYWQuYnVmZmVyKTtcclxuXHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kIFJlcXVlc3QgdG8gVGFrZSBRdWFsaXR5IENvbnRyb2wgdG8gdGhlIFVFIEluc3RhbmNlXHJcblx0ICovXHJcblx0U2VuZFJlcXVlc3RRdWFsaXR5Q29udHJvbCgpIHtcclxuXHRcdGxldCBwYXlsb2FkID0gbmV3IFVpbnQ4QXJyYXkoW1VlTWVzc2FnZVR5cGUucmVxdWVzdFF1YWxpdHlDb250cm9sXSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKHBheWxvYWQuYnVmZmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgTWF4IEZQUyBSZXF1ZXN0IHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqL1xyXG5cdFNlbmRNYXhGcHNSZXF1ZXN0KCkge1xyXG5cdFx0bGV0IHBheWxvYWQgPSBuZXcgVWludDhBcnJheShbVWVNZXNzYWdlVHlwZS5tYXhGcHNSZXF1ZXN0XSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKHBheWxvYWQuYnVmZmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgQXZlcmFnZSBCaXRyYXRlIFJlcXVlc3QgdG8gdGhlIFVFIEluc3RhbmNlXHJcblx0ICovXHJcblx0U2VuZEF2ZXJhZ2VCaXRyYXRlUmVxdWVzdCgpIHtcclxuXHRcdGxldCBwYXlsb2FkID0gbmV3IFVpbnQ4QXJyYXkoW1VlTWVzc2FnZVR5cGUuYXZlcmFnZUJpdHJhdGVSZXF1ZXN0XSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKHBheWxvYWQuYnVmZmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgYSBTdGFydCBTdHJlYW1pbmcgTWVzc2FnZSB0byB0aGUgVUUgSW5zdGFuY2VcclxuXHQgKi9cclxuXHRTZW5kU3RhcnRTdHJlYW1pbmcoKSB7XHJcblx0XHRsZXQgcGF5bG9hZCA9IG5ldyBVaW50OEFycmF5KFtVZU1lc3NhZ2VUeXBlLnN0YXJ0U3RyZWFtaW5nXSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKHBheWxvYWQuYnVmZmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgYSBTdG9wIFN0cmVhbWluZyBNZXNzYWdlIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqL1xyXG5cdFNlbmRTdG9wU3RyZWFtaW5nKCkge1xyXG5cdFx0bGV0IHBheWxvYWQgPSBuZXcgVWludDhBcnJheShbVWVNZXNzYWdlVHlwZS5zdG9wU3RyZWFtaW5nXSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKHBheWxvYWQuYnVmZmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgYSBMYXRlbmN5IFRlc3QgdG8gdGhlIFVFIEluc3RhbmNlXHJcblx0ICogQHBhcmFtIFN0YXJ0VGltZU1zIC0gU3RhcnQgVGltZSBvZiB0aGUgTGF0ZW5jeSB0ZXN0XHJcblx0ICovXHJcblx0c2VuZExhdGVuY3lUZXN0KFN0YXJ0VGltZU1zOiBudW1iZXIpIHtcclxuXHRcdGxldCBwYXlsb2FkID0ge1xyXG5cdFx0XHRTdGFydFRpbWU6IFN0YXJ0VGltZU1zLFxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLnNlbmREZXNjcmlwdG9yKFVlTWVzc2FnZVR5cGUubGF0ZW5jeVRlc3QsIEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgYSBSZXF1ZXN0IEluaXRpYWwgU2V0dGluZ3MgdG8gdGhlIFVFIEluc3RhbmNlXHJcblx0ICovXHJcblx0U2VuZFJlcXVlc3RJbml0aWFsU2V0dGluZ3MoKSB7XHJcblx0XHRsZXQgcGF5bG9hZCA9IG5ldyBVaW50OEFycmF5KFtVZU1lc3NhZ2VUeXBlLnJlcXVlc3RJbml0aWFsU2V0dGluZ3NdKTtcclxuXHRcdHRoaXMuc2VuZERhdGEocGF5bG9hZC5idWZmZXIpO1xyXG5cdH1cclxufSIsImltcG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHNlbmRpbmcgYSBtZXNzYWdlIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFVlRGF0YU1lc3NhZ2Uge1xyXG5cclxuICAgIGRhdGFDaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gZGF0YUNoYW5uZWxDb250cm9sbGVyIC0gRGF0YSBDaGFubmVsIENvbnRyb2xsZXJcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZGF0YUNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXIpe1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyID0gZGF0YUNoYW5uZWxDb250cm9sbGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBhbiBBcnJheSBCdWZmZXIgdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gYnVmZmVyIC0gTWVzc2FnZSBCdWZmZXIgQXJyYXlcclxuICAgICAqL1xyXG4gICAgc2VuZERhdGEoYnVmZmVyOiBBcnJheUJ1ZmZlcikge1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyLnNlbmREYXRhKGJ1ZmZlcik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IFVlRGF0YU1lc3NhZ2UgfSBmcm9tIFwiLi9VZURhdGFNZXNzYWdlXCI7XHJcblxyXG4vKipcclxuICogSGFuZGxlcyBzZW5kaW5nIGEgRGVzY3JpcHRvciB0byB0aGUgVUUgSW5zdGFuY2UgXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVWVEZXNjcmlwdG9yIGV4dGVuZHMgVWVEYXRhTWVzc2FnZSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEBwYXJhbSBkYXRhY2hhbm5lbENvbnRyb2xsZXIgLSBEYXRhIENoYW5uZWwgQ29udHJvbGxlclxyXG4gICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGRhdGFjaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyKSB7XHJcbiAgICAgICAgc3VwZXIoZGF0YWNoYW5uZWxDb250cm9sbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgYSBEZXNjcmlwdG9yIHRvIHRoZSBVRSBJbnN0YW5jZXNcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlVHlwZSAtIFVFIE1lc3NhZ2UgVHlwZVxyXG4gICAgICogQHBhcmFtIEpTT0Rlc2NyaXB0b3IgLSBEZXNjcmlwdG9yIE1lc3NhZ2UgYXMgSlNPTlxyXG4gICAgICovXHJcbiAgICBzZW5kRGVzY3JpcHRvcihtZXNzYWdlVHlwZTogbnVtYmVyLCBKU09EZXNjcmlwdG9yOiBzdHJpbmcpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiU2VuZGluZzogXCIgKyBKU09EZXNjcmlwdG9yLCA2KTtcclxuICAgICAgICAvLyBBZGQgdGhlIFVURi0xNiBKU09OIHN0cmluZyB0byB0aGUgYXJyYXkgYnl0ZSBidWZmZXIsIGdvaW5nIHR3byBieXRlcyBhdFxyXG4gICAgICAgIC8vIGEgdGltZS5cclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMSArIDIgKyAyICogSlNPRGVzY3JpcHRvci5sZW5ndGgpKTtcclxuICAgICAgICBsZXQgYnl0ZUlkeCA9IDA7XHJcbiAgICAgICAgZGF0YS5zZXRVaW50OChieXRlSWR4LCBtZXNzYWdlVHlwZSk7XHJcbiAgICAgICAgYnl0ZUlkeCsrO1xyXG4gICAgICAgIGRhdGEuc2V0VWludDE2KGJ5dGVJZHgsIEpTT0Rlc2NyaXB0b3IubGVuZ3RoLCB0cnVlKTtcclxuICAgICAgICBieXRlSWR4ICs9IDI7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgSlNPRGVzY3JpcHRvci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBkYXRhLnNldFVpbnQxNihieXRlSWR4LCBKU09EZXNjcmlwdG9yLmNoYXJDb2RlQXQoaSksIHRydWUpO1xyXG4gICAgICAgICAgICBieXRlSWR4ICs9IDI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbmREYXRhKGRhdGEuYnVmZmVyKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgVWVEZXNjcmlwdG9yIH0gZnJvbSBcIi4vVWVEZXNjcmlwdG9yXCI7XHJcbmltcG9ydCB7IFVlTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9VZU1lc3NhZ2VUeXBlc1wiO1xyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgdGhlIFNlbmRpbmcgb2YgYSBVSSBEZXNjcmlwdG9yIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFVlRGVzY3JpcHRvclVpIGV4dGVuZHMgVWVEZXNjcmlwdG9yIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBkYXRhQ2hhbm5lbENvbnRyb2xsZXIgLSBEYXRhIENoYW5uZWwgQ29udHJvbGxlclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhQ2hhbm5lbENvbnRyb2xsZXI6IERhdGFDaGFubmVsQ29udHJvbGxlcikge1xyXG4gICAgICAgIHN1cGVyKGRhdGFDaGFubmVsQ29udHJvbGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIGEgc2V0IHJlcyBVSSBEZXNjcmlwdG9yIHRvIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gd2lkdGggLSBXaWR0aCBvZiByZXNcclxuICAgICAqIEBwYXJhbSBoZWlnaHQgLSBIZWlnaHQgb2YgcmVzXHJcbiAgICAgKi9cclxuICAgIHNlbmRVcGRhdGVWaWRlb1N0cmVhbVNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnNlbmRVaUNvbnNvbGVJbnRlcmFjdGlvbihcInIuc2V0cmVzIFwiICsgd2lkdGggKyBcInhcIiArIGhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIGEgc3RhdCBmcHMgVUkgRGVzY3JpcHRvciB0byBVRSBJbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBzZW5kU2hvd0ZwcygpIHtcclxuICAgICAgICB0aGlzLnNlbmRVaUNvbnNvbGVJbnRlcmFjdGlvbihcInN0YXQgZnBzXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBhIEVuY29kZXIgUmF0ZSBDb250cm9sIHRvIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gcmF0ZUNvbnRyb2wgLSBSYXRlIENvbnRyb2wgXCJDQlJcIiB8IFwiVkJSXCIgfCBcIkNvbnN0UVBcIiBcclxuICAgICAqL1xyXG4gICAgc2VuZEVuY29kZXJSYXRlQ29udHJvbChyYXRlQ29udHJvbDogXCJDQlJcIiB8IFwiVkJSXCIgfCBcIkNvbnN0UVBcIikge1xyXG4gICAgICAgIHRoaXMuc2VuZFVpQ29uc29sZUludGVyYWN0aW9uKFwiUGl4ZWxTdHJlYW1pbmcuRW5jb2Rlci5SYXRlQ29udHJvbCBcIiArIHJhdGVDb250cm9sKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgRW5jb2RlciBUYXJnZXQgQml0IFJhdGUgdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0Qml0UmF0ZSAtIFNlbmQgYSBUYXJnZXQgQml0IFJhdGVcclxuICAgICAqL1xyXG4gICAgc2VuZEVuY29kZXJUYXJnZXRCaXRSYXRlKHRhcmdldEJpdFJhdGU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2VuZFVpQ29uc29sZUludGVyYWN0aW9uKFwiUGl4ZWxTdHJlYW1pbmcuRW5jb2Rlci5UYXJnZXRCaXRyYXRlIFwiICsgKHRhcmdldEJpdFJhdGUgPiAwID8gdGFyZ2V0Qml0UmF0ZSA6IC0xKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIEVuY29kZXIgTWF4IEJpdCBSYXRlIFZCUiB0byBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIG1heEJpdFJhdGUgLSBTZW5kIEEgTWF4IEJpdCBSYXRlXHJcbiAgICAgKi9cclxuICAgIHNlbmRFbmNvZGVyTWF4Qml0cmF0ZVZicihtYXhCaXRSYXRlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnNlbmRVaUNvbnNvbGVJbnRlcmFjdGlvbihcIlBpeGVsU3RyZWFtaW5nLkVuY29kZXIuTWF4Qml0cmF0ZVZCUiBcIiArIChtYXhCaXRSYXRlID4gMCA/IG1heEJpdFJhdGUgOiAxKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIHRoZSBNaW5pbXVtIFF1YW50aXphdGlvbiBQYXJhbWV0ZXIgdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gbWluUVAgLSBNaW5pbXVtIFF1YW50aXphdGlvbiBQYXJhbWV0ZXIgXHJcbiAgICAgKi9cclxuICAgIHNlbmRFbmNvZGVyTWluUVAobWluUVA6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2VuZFVpQ29uc29sZUludGVyYWN0aW9uKFwiUGl4ZWxTdHJlYW1pbmcuRW5jb2Rlci5NaW5RUCBcIiArIG1pblFQKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgdGhlIE1heGltdW0gUXVhbnRpemF0aW9uIFBhcmFtZXRlciB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBtYXhRUCAtIE1heGltdW0gUXVhbnRpemF0aW9uIFBhcmFtZXRlciBcclxuICAgICAqL1xyXG4gICAgc2VuZEVuY29kZXJNYXhRUChtYXhRUDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oXCJQaXhlbFN0cmVhbWluZy5FbmNvZGVyLk1heFFQIFwiICsgbWF4UVApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBFbmFibGUgRmlsbGVyIERhdGEgdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gZW5hYmxlIC0gVHJ1ZVxyXG4gICAgICovXHJcbiAgICBzZW5kRW5jb2RlckVuYWJsZUZpbGxlckRhdGEoZW5hYmxlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oXCJQaXhlbFN0cmVhbWluZy5FbmNvZGVyLkVuYWJsZUZpbGxlckRhdGEgXCIgKyBOdW1iZXIoZW5hYmxlKS52YWx1ZU9mKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBFbmNvZGVyIE11bHRpUGFzcyB0byBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIG11bHRpUGFzcyAtIE11bHRpUGFzcyBcIkRJU0FCTEVEXCIgfCBcIlFVQVJURVJcIiB8IFwiRlVMTFwiXHJcbiAgICAgKi9cclxuICAgIHNlbmRFbmNvZGVyTXVsdGlQYXNzKG11bHRpUGFzczogXCJESVNBQkxFRFwiIHwgXCJRVUFSVEVSXCIgfCBcIkZVTExcIikge1xyXG4gICAgICAgIHRoaXMuc2VuZFVpQ29uc29sZUludGVyYWN0aW9uKFwiUGl4ZWxTdHJlYW1pbmcuRW5jb2Rlci5NdWx0aXBhc3MgXCIgKyBtdWx0aVBhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBhIFdlYiBSVEMgRGVncmFkYXRpb24gUHJlZmVyZW5jZSB0byBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIERlZ3JhZGF0aW9uUHJlZmVyZW5jZSAtIERlZ3JhZGF0aW9uIFByZWZlcmVuY2UgXCJCQUxBTkNFRFwiIHwgXCJNQUlOVEFJTl9GUkFNRVJBVEVcIiB8IFwiTUFJTlRBSU5fUkVTT0xVVElPTlwiXHJcbiAgICAgKi9cclxuICAgIHNlbmRXZWJSdGNEZWdyYWRhdGlvblByZWZlcmVuY2UoRGVncmFkYXRpb25QcmVmZXJlbmNlOiBcIkJBTEFOQ0VEXCIgfCBcIk1BSU5UQUlOX0ZSQU1FUkFURVwiIHwgXCJNQUlOVEFJTl9SRVNPTFVUSU9OXCIpIHtcclxuICAgICAgICB0aGlzLnNlbmRVaUNvbnNvbGVJbnRlcmFjdGlvbihcIlBpeGVsU3RyZWFtaW5nLldlYlJUQy5EZWdyYWRhdGlvblByZWZlcmVuY2UgXCIgKyBEZWdyYWRhdGlvblByZWZlcmVuY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgdGhlIE1heCBGUFMgdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gTWF4RnBzIC0gV2ViIFJUQyBNYXggRnJhbWVzIFBlciBTZWNvbmRcclxuICAgICAqL1xyXG4gICAgc2VuZFdlYlJ0Y01heEZwcyhNYXhGcHM6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2VuZFVpQ29uc29sZUludGVyYWN0aW9uKFwiUGl4ZWxTdHJlYW1pbmcuV2ViUlRDLk1heEZwcyBcIiArIE1heEZwcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFNlbmRzIHRoZSBGUFMgdG8gdGhlIFVFIEluc3RhbmNlIHVzZWQgdW4gVUUgNS4wXHJcbiAgICAqIEBwYXJhbSBGcHMgLSBXZWIgUlRDIEZyYW1lcyBQZXIgU2Vjb25kXHJcbiAgICAqL1xyXG4gICAgc2VuZFdlYlJ0Y0ZwcyhGcHM6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2VuZFVpQ29uc29sZUludGVyYWN0aW9uKFwiUGl4ZWxTdHJlYW1pbmcuV2ViUlRDLkZwcyBcIiArIEZwcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kcyB0aGUgTWluaW11bSBiaXQgcmF0ZSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBNaW5CaXRyYXRlIC0gV2ViIFJUQyBNaW5pbXVtIEJpdHJhdGVcclxuICAgICAqL1xyXG4gICAgc2VuZFdlYlJ0Y01pbkJpdHJhdGUoTWluQml0cmF0ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oXCJQaXhlbFN0cmVhbWluZy5XZWJSVEMuTWluQml0cmF0ZSBcIiArIE1pbkJpdHJhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgdGhlIE1heGltdW0gYml0IHJhdGUgdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gTWF4Qml0cmF0ZSAtIFdlYiBSVEMgTWF4aW11bSBCaXRyYXRlXHJcbiAgICAgKi9cclxuICAgIHNlbmRXZWJSdGNNYXhCaXRyYXRlKE1heEJpdHJhdGU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2VuZFVpQ29uc29sZUludGVyYWN0aW9uKFwiUGl4ZWxTdHJlYW1pbmcuV2ViUlRDLk1heEJpdHJhdGUgXCIgKyBNYXhCaXRyYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmRzIHRoZSBMb3cgUXVhbnRpemF0aW9uIFBhcmFtZXRlciBUaHJlc2hvbGQgbGV2ZWwgdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gTG93UXBUaHJlc2hvbGQgLSBMb3cgUXVhbnRpemF0aW9uIFBhcmFtZXRlciBUaHJlc2hvbGQgTGV2ZWxcclxuICAgICAqL1xyXG4gICAgc2VuZFdlYlJ0Y0xvd1FwVGhyZXNob2xkKExvd1FwVGhyZXNob2xkOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnNlbmRVaUNvbnNvbGVJbnRlcmFjdGlvbihcIlBpeGVsU3RyZWFtaW5nLldlYlJUQy5Mb3dRcFRocmVzaG9sZCBcIiArIExvd1FwVGhyZXNob2xkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmRzIHRoZSBIaWdoIFF1YW50aXphdGlvbiBQYXJhbWV0ZXIgVGhyZXNob2xkIGxldmVsIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIEhpZ2hRcFRocmVzaG9sZCAtIEhpZ2ggUXVhbnRpemF0aW9uIFBhcmFtZXRlciBUaHJlc2hvbGQgTGV2ZWxcclxuICAgICAqL1xyXG4gICAgc2VuZFdlYlJ0Y0hpZ2hRcFRocmVzaG9sZChIaWdoUXBUaHJlc2hvbGQ6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2VuZFVpQ29uc29sZUludGVyYWN0aW9uKFwiUGl4ZWxTdHJlYW1pbmcuV2ViUlRDLkhpZ2hRcFRocmVzaG9sZCBcIiArIEhpZ2hRcFRocmVzaG9sZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kcyBhIGRlc2NyaXB0b3Igc3RyaW5nIHRvIHRoZSBVRSBJbnRlcmFjdGlvbiBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIGRlc2NyaXB0b3IgLSB0aGUgU3RyaW5nIGRlc2NyaXB0b3IgdG8gc2VuZFxyXG4gICAgICovXHJcbiAgICBzZW5kVWlJbnRlcmFjdGlvbihkZXNjcmlwdG9yOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnNlbmREZXNjcmlwdG9yKFVlTWVzc2FnZVR5cGUudWlJbnRlcmFjdGlvbiwgZGVzY3JpcHRvcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kcyBhIGNvbnNvbGUgZGVzY3JpcHRvclxyXG4gICAgICogQHBhcmFtIGRlc2NyaXB0b3IgLSBUaGUgc3RyaW5nIGRlc2NyaXB0b3IgdG8gc2VuZFxyXG4gICAgICovXHJcbiAgICBzZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oZGVzY3JpcHRvcjogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHBheWxvYWQgPSB7XHJcbiAgICAgICAgICAgIENvbnNvbGU6IGRlc2NyaXB0b3JcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZW5kVWlJbnRlcmFjdGlvbihKU09OLnN0cmluZ2lmeShwYXlsb2FkKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgVWVEYXRhTWVzc2FnZSB9IGZyb20gXCIuL1VlRGF0YU1lc3NhZ2VcIjtcclxuaW1wb3J0IHsgVWVNZXNzYWdlVHlwZSB9IGZyb20gXCIuL1VlTWVzc2FnZVR5cGVzXCI7XHJcblxyXG4vKipcclxuICogVGhlIGNsYXNzIGZvciBoYW5kbGluZyBVRSBJbnB1dCBHYW1lUGFkIE1lc3NhZ2VzLiBJdCBpbXBsZW1lbnRzIHRoZSBVZURhdGFNZXNzYWdlIGNsYXNzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVWVJbnB1dEdhbWVQYWRNZXNzYWdlIGV4dGVuZHMgVWVEYXRhTWVzc2FnZSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBkYXRhY2hhbm5lbENvbnRyb2xsZXIgLSBEYXRhIENoYW5uZWwgQ29udHJvbGxlclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhY2hhbm5lbENvbnRyb2xsZXI6IERhdGFDaGFubmVsQ29udHJvbGxlcikge1xyXG4gICAgICAgIHN1cGVyKGRhdGFjaGFubmVsQ29udHJvbGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIHRoZSBjb250cm9sbGVyIGJ1dHRvbiBwcmVzcyBkYXRhIHRocm91Z2ggdGhlIGRhdGEgY2hhbm5lbCBcclxuICAgICAqIEBwYXJhbSBjb250cm9sbGVySW5kZXggLSB0aGUgY29udHJvbGxlciBpbmRleCBudW1iZXIgXHJcbiAgICAgKiBAcGFyYW0gYnV0dG9uSW5kZXggLSB0aGUgYnV0dG9uIGluZGV4IG51bWJlclxyXG4gICAgICogQHBhcmFtIGlzUmVwZWF0IC0gaXMgdGhpcyBhIHJlcGVhdCBwcmVzcyBcclxuICAgICAqL1xyXG4gICAgc2VuZENvbnRyb2xsZXJCdXR0b25QcmVzc2VkKGNvbnRyb2xsZXJJbmRleDogbnVtYmVyLCBidXR0b25JbmRleDogbnVtYmVyLCBpc1JlcGVhdDogYm9vbGVhbikge1xyXG4gICAgICAgIGxldCBEYXRhID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig0KSk7XHJcbiAgICAgICAgRGF0YS5zZXRVaW50OCgwLCBVZU1lc3NhZ2VUeXBlLmdhbWVwYWRCdXR0b25QcmVzc2VkKTtcclxuICAgICAgICBEYXRhLnNldFVpbnQ4KDEsIGNvbnRyb2xsZXJJbmRleCk7XHJcbiAgICAgICAgRGF0YS5zZXRVaW50OCgyLCBidXR0b25JbmRleCk7XHJcbiAgICAgICAgRGF0YS5zZXRVaW50OCgzLCBOdW1iZXIoaXNSZXBlYXQpLnZhbHVlT2YoKSk7XHJcbiAgICAgICAgdGhpcy5zZW5kRGF0YShEYXRhLmJ1ZmZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIHRoZSBjb250cm9sbGVyIGJ1dHRvbiByZWxlYXNlIGRhdGEgdGhyb3VnaCB0aGUgZGF0YSBjaGFubmVsIFxyXG4gICAgICogQHBhcmFtIGNvbnRyb2xsZXJJbmRleCAtIHRoZSBjb250cm9sbGVyIGluZGV4IG51bWJlciBcclxuICAgICAqIEBwYXJhbSBidXR0b25JbmRleCAgLSB0aGUgYnV0dG9uIGluZGV4IG51bWJlclxyXG4gICAgICovXHJcbiAgICBzZW5kQ29udHJvbGxlckJ1dHRvblJlbGVhc2VkKGNvbnRyb2xsZXJJbmRleDogbnVtYmVyLCBidXR0b25JbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IERhdGEgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDMpKTtcclxuICAgICAgICBEYXRhLnNldFVpbnQ4KDAsIFVlTWVzc2FnZVR5cGUuZ2FtZXBhZEJ1dHRvblJlbGVhc2VkKTtcclxuICAgICAgICBEYXRhLnNldFVpbnQ4KDEsIGNvbnRyb2xsZXJJbmRleCk7XHJcbiAgICAgICAgRGF0YS5zZXRVaW50OCgyLCBidXR0b25JbmRleCk7XHJcbiAgICAgICAgdGhpcy5zZW5kRGF0YShEYXRhLmJ1ZmZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIGNvbnRyb2xsZXIgYXhpcyBkYXRhIHRocm91Z2ggdGhlIGRhdGEgY2hhbm5lbCBcclxuICAgICAqIEBwYXJhbSBjb250cm9sbGVySW5kZXggLSB0aGUgY29udHJvbGxlciBpbmRleCBudW1iZXIgXHJcbiAgICAgKiBAcGFyYW0gYXhpc0luZGV4IC0gdGhlIGF4aXMgaW5kZXggbnVtYmVyIFxyXG4gICAgICogQHBhcmFtIGFuYWxvZ1ZhbHVlIC0gdGhlIGFuYWxvZ3VlIHZhbHVlIG51bWJlciBcclxuICAgICAqL1xyXG4gICAgc2VuZENvbnRyb2xsZXJBeGlzTW92ZShjb250cm9sbGVySW5kZXg6IG51bWJlciwgYXhpc0luZGV4OiBudW1iZXIsIGFuYWxvZ1ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgRGF0YSA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMTEpKTtcclxuICAgICAgICBEYXRhLnNldFVpbnQ4KDAsIFVlTWVzc2FnZVR5cGUuZ2FtZXBhZEFuYWxvZyk7XHJcbiAgICAgICAgRGF0YS5zZXRVaW50OCgxLCBjb250cm9sbGVySW5kZXgpO1xyXG4gICAgICAgIERhdGEuc2V0VWludDgoMiwgYXhpc0luZGV4KTtcclxuICAgICAgICBEYXRhLnNldEZsb2F0NjQoMywgYW5hbG9nVmFsdWUsIHRydWUpO1xyXG5cclxuICAgICAgICB0aGlzLnNlbmREYXRhKERhdGEuYnVmZmVyKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IFVlRGF0YU1lc3NhZ2UgfSBmcm9tIFwiLi9VZURhdGFNZXNzYWdlXCI7XHJcbmltcG9ydCB7IFVlTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9VZU1lc3NhZ2VUeXBlc1wiXHJcblxyXG4vKipcclxuICogSGFuZGxlcyBzZW5kaW5nIEtleWJvYXJkIE1lc3NhZ2VzIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFVlSW5wdXRLZXlib2FyZE1lc3NhZ2UgZXh0ZW5kcyBVZURhdGFNZXNzYWdle1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gZGF0YWNoYW5uZWxDb250cm9sbGVyIC0gRGF0YSBDaGFubmVsIENvbnRyb2xsZXJcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZGF0YWNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXIpe1xyXG4gICAgICAgIHN1cGVyKGRhdGFjaGFubmVsQ29udHJvbGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kcyB0aGUga2V5IGRvd24gdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0ga2V5Q29kZSAtIEtleSBjb2RlXHJcbiAgICAgKiBAcGFyYW0gaXNSZXBlYXQgLSBJcyB0aGUga2V5IHJlcGVhdGluZ1xyXG4gICAgICovXHJcbiAgICBzZW5kS2V5RG93bihrZXlDb2RlOm51bWJlciwgaXNSZXBlYXQ6Ym9vbGVhbil7XHJcbiAgICAgICAgbGV0IFBheWxvYWQgPSBuZXcgVWludDhBcnJheShbVWVNZXNzYWdlVHlwZS5rZXlEb3duLCBrZXlDb2RlLCBOdW1iZXIoaXNSZXBlYXQpLnZhbHVlT2YoKV0pO1xyXG4gICAgICAgIHRoaXMuc2VuZERhdGEoUGF5bG9hZC5idWZmZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgdGhlIEtleSBVcCB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBrZXlDb2RlIC0gS2V5IGNvZGVcclxuICAgICAqL1xyXG4gICAgc2VuZEtleVVwKGtleUNvZGU6IG51bWJlcil7XHJcbiAgICAgICAgbGV0IHBheWxvYWQgPSBuZXcgVWludDhBcnJheShbVWVNZXNzYWdlVHlwZS5rZXlVcCwga2V5Q29kZV0pO1xyXG4gICAgICAgIHRoaXMuc2VuZERhdGEocGF5bG9hZC5idWZmZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgdGhlIGtleSBwcmVzcyB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBDaGFyQ29kZSAtIGNoYXJhY3RlciBjb2RlIG9mIGEga2V5IHByZXNzZWRcclxuICAgICAqL1xyXG4gICAgc2VuZEtleVByZXNzKENoYXJDb2RlOm51bWJlcil7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDMpKTtcclxuICAgICAgICBkYXRhLnNldFVpbnQ4KDAsIFVlTWVzc2FnZVR5cGUua2V5UHJlc3MpO1xyXG4gICAgICAgIGRhdGEuc2V0VWludDE2KDEsIENoYXJDb2RlLCB0cnVlKTtcclxuICAgICAgICB0aGlzLnNlbmREYXRhKGRhdGEuYnVmZmVyKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgVWVEYXRhTWVzc2FnZSB9IGZyb20gXCIuL1VlRGF0YU1lc3NhZ2VcIjtcclxuaW1wb3J0IHsgVWVNZXNzYWdlVHlwZSB9IGZyb20gXCIuL1VlTWVzc2FnZVR5cGVzXCJcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHNlbmRpbmcgTW91c2UgTWVzc2FnZXMgdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVWVJbnB1dE1vdXNlTWVzc2FnZSBleHRlbmRzIFVlRGF0YU1lc3NhZ2Uge1xyXG5cclxuXHQvKipcclxuXHQqIEBwYXJhbSBkYXRhY2hhbm5lbENvbnRyb2xsZXIgLSBEYXRhIGNoYW5uZWwgQ29udHJvbGxlclxyXG5cdCovXHJcblx0Y29uc3RydWN0b3IoZGF0YWNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXIpIHtcclxuXHRcdHN1cGVyKGRhdGFjaGFubmVsQ29udHJvbGxlcik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kIE1vdXNlIEVudGVyIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqL1xyXG5cdHNlbmRNb3VzZUVudGVyKCkge1xyXG5cdFx0bGV0IERhdGEgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpKTtcclxuXHRcdERhdGEuc2V0VWludDgoMCwgVWVNZXNzYWdlVHlwZS5tb3VzZUVudGVyKTtcclxuXHRcdHRoaXMuc2VuZERhdGEoRGF0YS5idWZmZXIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZCBNb3VzZSBMZWF2ZSB0byB0aGUgVUUgSW5zdGFuY2VcclxuXHQgKi9cclxuXHRzZW5kTW91c2VMZWF2ZSgpIHtcclxuXHRcdGxldCBEYXRhID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcigxKSk7XHJcblx0XHREYXRhLnNldFVpbnQ4KDAsIFVlTWVzc2FnZVR5cGUubW91c2VMZWF2ZSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKERhdGEuYnVmZmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgTW91c2UgRG93biB0byB0aGUgVUUgSW5zdGFuY2VcclxuXHQgKiBAcGFyYW0gYnV0dG9uIC0gTW91c2UgQnV0dG9uIFxyXG5cdCAqIEBwYXJhbSBYIC0gWCBDb29yZGluYXRlIFZhbHVlIG9mIG1vdXNlIFxyXG5cdCAqIEBwYXJhbSBZIC0gWSBDb29yZGluYXRlIFZhbHVlIG9mIG1vdXNlIFxyXG5cdCAqL1xyXG5cdHNlbmRNb3VzZURvd24oYnV0dG9uOiBudW1iZXIsIFg6IG51bWJlciwgWTogbnVtYmVyKSB7XHJcblx0XHRsZXQgRGF0YSA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoNikpO1xyXG5cdFx0RGF0YS5zZXRVaW50OCgwLCBVZU1lc3NhZ2VUeXBlLm1vdXNlRG93bik7XHJcblx0XHREYXRhLnNldFVpbnQ4KDEsIGJ1dHRvbik7XHJcblx0XHREYXRhLnNldFVpbnQxNigyLCBYLCB0cnVlKTtcclxuXHRcdERhdGEuc2V0VWludDE2KDQsIFksIHRydWUpO1xyXG5cdFx0dGhpcy5zZW5kRGF0YShEYXRhLmJ1ZmZlcik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kIE1vdXNlIFVwIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqIEBwYXJhbSBidXR0b24gLSBNb3VzZSBCdXR0b24gXHJcblx0ICogQHBhcmFtIFggLSBYIENvb3JkaW5hdGUgVmFsdWUgb2YgbW91c2UgXHJcblx0ICogQHBhcmFtIFkgLSBZIENvb3JkaW5hdGUgVmFsdWUgb2YgbW91c2UgXHJcblx0ICovXHJcblx0c2VuZE1vdXNlVXAoYnV0dG9uOiBudW1iZXIsIFg6IG51bWJlciwgWTogbnVtYmVyKSB7XHJcblx0XHRsZXQgRGF0YSA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoNikpO1xyXG5cdFx0RGF0YS5zZXRVaW50OCgwLCBVZU1lc3NhZ2VUeXBlLm1vdXNlVXApO1xyXG5cdFx0RGF0YS5zZXRVaW50OCgxLCBidXR0b24pO1xyXG5cdFx0RGF0YS5zZXRVaW50MTYoMiwgWCwgdHJ1ZSk7XHJcblx0XHREYXRhLnNldFVpbnQxNig0LCBZLCB0cnVlKTtcclxuXHRcdHRoaXMuc2VuZERhdGEoRGF0YS5idWZmZXIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZCBNb3VzZSBNb3ZlIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqIEBwYXJhbSBtb3VzZUNvcmRYIC0gWCBNb3VzZSBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIG1vdXNlQ29yZFkgLSBZIE1vdXNlIENvb3JkaW5hdGVcclxuXHQgKiBAcGFyYW0gZGVsdGFYIC0gWCBNb3VzZSBEZWx0YSBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIGRlbHRhWSAtIFkgTW91c2UgRGVsdGEgQ29vcmRpbmF0ZVxyXG5cdCAqL1xyXG5cdHNlbmRNb3VzZU1vdmUobW91c2VDb3JkWDogbnVtYmVyLCBtb3VzZUNvcmRZOiBudW1iZXIsIGRlbHRhWDogbnVtYmVyLCBkZWx0YVk6IG51bWJlcikge1xyXG5cdFx0bGV0IERhdGEgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDkpKTtcclxuXHRcdERhdGEuc2V0VWludDgoMCwgVWVNZXNzYWdlVHlwZS5tb3VzZU1vdmUpO1xyXG5cdFx0RGF0YS5zZXRVaW50MTYoMSwgbW91c2VDb3JkWCwgdHJ1ZSk7XHJcblx0XHREYXRhLnNldFVpbnQxNigzLCBtb3VzZUNvcmRZLCB0cnVlKTtcclxuXHRcdERhdGEuc2V0SW50MTYoNSwgZGVsdGFYLCB0cnVlKTtcclxuXHRcdERhdGEuc2V0SW50MTYoNywgZGVsdGFZLCB0cnVlKTtcclxuXHRcdHRoaXMuc2VuZERhdGEoRGF0YS5idWZmZXIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZCBNb3VzZSB3aGVlbCBldmVudCB0byB0aGUgVUUgSW5zdGFuY2VcclxuXHQgKiBAcGFyYW0gZGVsdGFZIC0gTW91c2UgV2hlZWwgZGVsdGEgWVxyXG5cdCAqIEBwYXJhbSBYIC0gTW91c2UgWCBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIFkgLSBNb3VzZSBZIENvb3JkaW5hdGVcclxuXHQgKi9cclxuXHRzZW5kTW91c2VXaGVlbChkZWx0YVk6IG51bWJlciwgWDogbnVtYmVyLCBZOiBudW1iZXIpIHtcclxuXHRcdGxldCBEYXRhID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig3KSk7XHJcblx0XHREYXRhLnNldFVpbnQ4KDAsIFVlTWVzc2FnZVR5cGUubW91c2VXaGVlbCk7XHJcblx0XHREYXRhLnNldEludDE2KDEsIGRlbHRhWSwgdHJ1ZSk7XHJcblx0XHREYXRhLnNldFVpbnQxNigzLCBYLCB0cnVlKTtcclxuXHRcdERhdGEuc2V0VWludDE2KDUsIFksIHRydWUpO1xyXG5cdFx0dGhpcy5zZW5kRGF0YShEYXRhLmJ1ZmZlcik7XHJcblx0fVxyXG59IiwiaW1wb3J0IHsgRGF0YUNoYW5uZWxDb250cm9sbGVyIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0RhdGFDaGFubmVsQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBOb3JtYWxpc2VBbmRRdWFudGlzZVVuc2lnbmVkIH0gZnJvbSBcIi4uL0lucHV0cy9Db29yZGluYXRlRGF0YVwiO1xyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vTG9nZ2VyL0xvZ2dlclwiO1xyXG5pbXBvcnQgeyBJVmlkZW9QbGF5ZXIgfSBmcm9tIFwiLi4vVmlkZW9QbGF5ZXIvSVZpZGVvUGxheWVyXCI7XHJcbmltcG9ydCB7IFVlRGF0YU1lc3NhZ2UgfSBmcm9tIFwiLi9VZURhdGFNZXNzYWdlXCI7XHJcbmltcG9ydCB7IFVlTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9VZU1lc3NhZ2VUeXBlc1wiXHJcblxyXG4vKipcclxuICogSGFuZGxlcyBTZW5kaW5nIFRvdWNoIG1lc3NhZ2VzIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFVlSW5wdXRUb3VjaE1lc3NhZ2UgZXh0ZW5kcyBVZURhdGFNZXNzYWdlIHtcclxuXHJcbiAgICBmaW5nZXJzOiBudW1iZXJbXTtcclxuICAgIGZpbmdlcnNJZHM6IHsgW2tleTogbnVtYmVyXTogbnVtYmVyIH07XHJcblxyXG4gICAgcmVhZG9ubHkgdW5zaWduZWRPdXRPZlJhbmdlOiBudW1iZXIgPSA2NTUzNTtcclxuICAgIHJlYWRvbmx5IHNpZ25lZE91dE9mUmFuZ2U6IG51bWJlciA9IDMyNzY3O1xyXG5cclxuICAgIHByaW50SW5wdXRzOiBib29sZWFuO1xyXG5cclxuICAgIHZpZGVvRWxlbWVudFByb3ZpZGVyOiBJVmlkZW9QbGF5ZXI7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGRhdGFjaGFubmVsQ29udHJvbGxlciAtIERhdGEgY2hhbm5lbCBDb250cm9sbGVyXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGRhdGFjaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyLCB2aWRlb0VsZW1lbnRQcm92aWRlcjogSVZpZGVvUGxheWVyKSB7XHJcbiAgICAgICAgc3VwZXIoZGF0YWNoYW5uZWxDb250cm9sbGVyKTtcclxuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyID0gdmlkZW9FbGVtZW50UHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy5maW5nZXJzSWRzID0ge31cclxuICAgICAgICB0aGlzLmZpbmdlcnMgPSBbOSwgOCwgNywgNiwgNSwgNCwgMywgMiwgMSwgMF07XHJcbiAgICAgICAgdGhpcy5wcmludElucHV0cyA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyBUb3VjaCBldmVudCBTdGFydFxyXG4gICAgICogQHBhcmFtIHRvdWNoZXMgLSBUb3VjaCBMaXN0XHJcbiAgICAgKi9cclxuICAgIHNlbmRUb3VjaFN0YXJ0KHRvdWNoZXM6IFRvdWNoTGlzdCkge1xyXG4gICAgICAgIHRoaXMuc2VuZFRvdWNoKFVlTWVzc2FnZVR5cGUudG91Y2hTdGFydCwgdG91Y2hlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIFRvdWNoIGV2ZW50IEVuZFxyXG4gICAgICogQHBhcmFtIHRvdWNoZXMgLSBUb3VjaCBMaXN0XHJcbiAgICAgKi9cclxuICAgIHNlbmRUb3VjaEVuZCh0b3VjaGVzOiBUb3VjaExpc3QpIHtcclxuICAgICAgICB0aGlzLnNlbmRUb3VjaChVZU1lc3NhZ2VUeXBlLnRvdWNoRW5kLCB0b3VjaGVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgVG91Y2ggZXZlbnQgTW92ZVxyXG4gICAgICogQHBhcmFtIHRvdWNoZXMgLSBUb3VjaCBMaXN0XHJcbiAgICAgKi9cclxuICAgIHNlbmRUb3VjaE1vdmUodG91Y2hlczogVG91Y2hMaXN0KSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVG91Y2goVWVNZXNzYWdlVHlwZS50b3VjaE1vdmUsIHRvdWNoZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyBTZW5kaW5nIHRoZSBUb3VjaCBFdmVudCB0byB0aGUgVUUgSW5zdGFuY2UgdmlhIHRoZSBEYXRhIGNoYW5uZWxcclxuICAgICAqIEBwYXJhbSB0b3VjaGVzIC0gVG91Y2ggTGlzdFxyXG4gICAgICovXHJcbiAgICBzZW5kVG91Y2godG91Y2hUeXBlOiBudW1iZXIsIHRvdWNoZXM6IFRvdWNoTGlzdCkge1xyXG4gICAgICAgIGxldCBkYXRhID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcigyICsgNyAqIHRvdWNoZXMubGVuZ3RoKSk7XHJcbiAgICAgICAgZGF0YS5zZXRVaW50OCgwLCB0b3VjaFR5cGUpO1xyXG4gICAgICAgIGRhdGEuc2V0VWludDgoMSwgdG91Y2hlcy5sZW5ndGgpO1xyXG4gICAgICAgIGxldCBieXRlID0gMjtcclxuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHRvdWNoZXMubGVuZ3RoOyB0KyspIHtcclxuICAgICAgICAgICAgbGV0IHRvdWNoID0gdG91Y2hlc1t0XTtcclxuICAgICAgICAgICAgbGV0IHggPSB0b3VjaC5jbGllbnRYOy8vLSBvZmZzZXRMZWZ0O1xyXG4gICAgICAgICAgICBsZXQgeSA9IHRvdWNoLmNsaWVudFk7Ly8tIG9mZnNldFRvcDtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb29yZCA9IHRoaXMubm9ybWFsaXNlQW5kUXVhbnRpc2VVbnNpZ25lZCh4LCB5KTtcclxuICAgICAgICAgICAgLy8gICAgICBieXRlID0gIDJcclxuICAgICAgICAgICAgZGF0YS5zZXRVaW50MTYoYnl0ZSwgY29vcmQueCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGJ5dGUgKz0gMjtcclxuICAgICAgICAgICAgLy8gICAgICBieXRlID0gIDRcclxuICAgICAgICAgICAgZGF0YS5zZXRVaW50MTYoYnl0ZSwgY29vcmQueSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGJ5dGUgKz0gMjtcclxuICAgICAgICAgICAgLy8gICAgICBieXRlID0gIDZcclxuICAgICAgICAgICAgZGF0YS5zZXRVaW50OChieXRlLCB0aGlzLmZpbmdlcnNJZHNbdG91Y2guaWRlbnRpZmllcl0pO1xyXG4gICAgICAgICAgICBieXRlICs9IDE7XHJcbiAgICAgICAgICAgIC8vICAgICAgYnl0ZSA9ICA3XHJcbiAgICAgICAgICAgIGRhdGEuc2V0VWludDgoYnl0ZSwgMjU1ICogdG91Y2guZm9yY2UpOyAgIC8vIGZvcmNlIGlzIGJldHdlZW4gMC4wIGFuZCAxLjAgc28gcXVhbnRpemUgaW50byBieXRlLlxyXG4gICAgICAgICAgICBieXRlICs9IDE7XHJcbiAgICAgICAgICAgIC8vICAgICAgYnl0ZSA9ICA4XHJcbiAgICAgICAgICAgIGRhdGEuc2V0VWludDgoYnl0ZSwgY29vcmQuaW5SYW5nZSA/IDEgOiAwKTsgLy8gbWFyayB0aGUgdG91Y2ggYXMgaW4gdGhlIHBsYXllciBvciBub3RcclxuICAgICAgICAgICAgYnl0ZSArPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbmREYXRhKGRhdGEuYnVmZmVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRPIERPXHJcbiAgICAgKiBAcGFyYW0geCAtIFggQ29vcmRpbmF0ZVxyXG4gICAgICogQHBhcmFtIHkgLSBZIENvb3JkaW5hdGVcclxuICAgICAqIEByZXR1cm5zIC0gTm9ybWFsaXNlZCBhbmQgUXVhbnRpc2VkIFVuc2lnbmVkIHZhbHVlc1xyXG4gICAgICovXHJcbiAgICBub3JtYWxpc2VBbmRRdWFudGlzZVVuc2lnbmVkKHg6IG51bWJlciwgeTogbnVtYmVyKTogTm9ybWFsaXNlQW5kUXVhbnRpc2VVbnNpZ25lZCB7XHJcbiAgICAgICAgbGV0IHJvb3REaXYgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvUGFyZW50RWxlbWVudCgpO1xyXG4gICAgICAgIGxldCB2aWRlb0VsZW1lbnQgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpO1xyXG5cclxuICAgICAgICBpZiAocm9vdERpdiAmJiB2aWRlb0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgbGV0IHBsYXllckFzcGVjdFJhdGlvID0gcm9vdERpdi5jbGllbnRIZWlnaHQgLyByb290RGl2LmNsaWVudFdpZHRoO1xyXG4gICAgICAgICAgICBsZXQgdmlkZW9Bc3BlY3RSYXRpbyA9IHZpZGVvRWxlbWVudC52aWRlb0hlaWdodCAvIHZpZGVvRWxlbWVudC52aWRlb1dpZHRoO1xyXG5cclxuICAgICAgICAgICAgLy8gVW5zaWduZWQgWFkgcG9zaXRpb25zIGFyZSB0aGUgcmF0aW8gKDAuMC4uMS4wKSBhbG9uZyBhIHZpZXdwb3J0IGF4aXMsXHJcbiAgICAgICAgICAgIC8vIHF1YW50aXplZCBpbnRvIGFuIHVpbnQxNiAoMC4uNjU1MzYpLlxyXG4gICAgICAgICAgICAvLyBTaWduZWQgWFkgZGVsdGFzIGFyZSB0aGUgcmF0aW8gKC0xLjAuLjEuMCkgYWxvbmcgYSB2aWV3cG9ydCBheGlzLFxyXG4gICAgICAgICAgICAvLyBxdWFudGl6ZWQgaW50byBhbiBpbnQxNiAoLTMyNzY3Li4zMjc2NykuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgYWxsb3dzIHRoZSBicm93c2VyIHZpZXdwb3J0IGFuZCBjbGllbnQgdmlld3BvcnQgdG8gaGF2ZSBhIGRpZmZlcmVudFxyXG4gICAgICAgICAgICAvLyBzaXplLlxyXG4gICAgICAgICAgICAvLyBIYWNrOiBDdXJyZW50bHkgd2Ugc2V0IGFuIG91dC1vZi1yYW5nZSBwb3NpdGlvbiB0byBhbiBleHRyZW1lICg2NTUzNSlcclxuICAgICAgICAgICAgLy8gYXMgd2UgY2FuJ3QgeWV0IGFjY3VyYXRlbHkgZGV0ZWN0IG1vdXNlIGVudGVyIGFuZCBsZWF2ZSBldmVudHNcclxuICAgICAgICAgICAgLy8gcHJlY2lzZWx5IGluc2lkZSBhIHZpZGVvIHdpdGggYW4gYXNwZWN0IHJhdGlvIHdoaWNoIGNhdXNlcyBtYXR0ZXMuXHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXJBc3BlY3RSYXRpbyA+IHZpZGVvQXNwZWN0UmF0aW8pIHtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcmF0aW8gPSBwbGF5ZXJBc3BlY3RSYXRpbyAvIHZpZGVvQXNwZWN0UmF0aW87XHJcbiAgICAgICAgICAgICAgICAvLyBVbnNpZ25lZC5cclxuICAgICAgICAgICAgICAgIGxldCBub3JtYWxpemVkWCA9IHggLyByb290RGl2LmNsaWVudFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5vcm1hbGl6ZWRZID0gcmF0aW8gKiAoeSAvIHJvb3REaXYuY2xpZW50SGVpZ2h0IC0gMC41KSArIDAuNTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplZFggPCAwLjAgfHwgbm9ybWFsaXplZFggPiAxLjAgfHwgbm9ybWFsaXplZFkgPCAwLjAgfHwgbm9ybWFsaXplZFkgPiAxLjApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpblJhbmdlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogdGhpcy51bnNpZ25lZE91dE9mUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHRoaXMudW5zaWduZWRPdXRPZlJhbmdlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpblJhbmdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBub3JtYWxpemVkWCAqICh0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZSArIDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiBub3JtYWxpemVkWSAqICh0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZSArIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmludElucHV0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgJ1NldHVwIE5vcm1hbGl6ZSBhbmQgUXVhbnRpemUgZm9yIHBsYXllckFzcGVjdFJhdGlvIDw9IHZpZGVvQXNwZWN0UmF0aW8nLCA2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcmF0aW8gPSB2aWRlb0FzcGVjdFJhdGlvIC8gcGxheWVyQXNwZWN0UmF0aW87XHJcbiAgICAgICAgICAgICAgICAvLyBVbnNpZ25lZC4gXHJcbiAgICAgICAgICAgICAgICBsZXQgbm9ybWFsaXplZFggPSByYXRpbyAqICh4IC8gcm9vdERpdi5jbGllbnRXaWR0aCAtIDAuNSkgKyAwLjU7XHJcbiAgICAgICAgICAgICAgICBsZXQgbm9ybWFsaXplZFkgPSB5IC8gcm9vdERpdi5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplZFggPCAwLjAgfHwgbm9ybWFsaXplZFggPiAxLjAgfHwgbm9ybWFsaXplZFkgPCAwLjAgfHwgbm9ybWFsaXplZFkgPiAxLjApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpblJhbmdlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogdGhpcy51bnNpZ25lZE91dE9mUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHRoaXMudW5zaWduZWRPdXRPZlJhbmdlXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5SYW5nZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogbm9ybWFsaXplZFggKiAodGhpcy51bnNpZ25lZE91dE9mUmFuZ2UgKyAxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogbm9ybWFsaXplZFkgKiAodGhpcy51bnNpZ25lZE91dE9mUmFuZ2UgKyAxKVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogVGhlIFR5cGUgb2YgbWVzc2FnZSBzZW50IHRvIHRoZSBVRSBpbnN0YW5jZSBvdmVyIHRoZSBkYXRhIGNoYW5uZWxcclxuICogTXVzdCBiZSBrZXB0IGluIHN5bmMgd2l0aCBQaXhlbFN0cmVhbWluZ1Byb3RvY29sOjpFVG9VRTRNc2cgQysrIGVudW0uXHJcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vRXBpY0dhbWVzL1VucmVhbEVuZ2luZS9ibG9iL3JlbGVhc2UvRW5naW5lL1BsdWdpbnMvTWVkaWEvUGl4ZWxTdHJlYW1pbmcvU291cmNlL1BpeGVsU3RyZWFtaW5nL1ByaXZhdGUvUHJvdG9jb2xEZWZzLmh9IFJlcXVpcmVzIExvZ2luXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVWVNZXNzYWdlVHlwZSB7XHJcblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5cdC8qXHJcblx0ICogQ29udHJvbCBNZXNzYWdlcy4gUmFuZ2UgPSAwLi40OS5cclxuXHQgKi9cclxuXHRzdGF0aWMgaUZyYW1lUmVxdWVzdCA9IDA7XHJcblx0c3RhdGljIHJlcXVlc3RRdWFsaXR5Q29udHJvbCA9IDE7XHJcblx0c3RhdGljIG1heEZwc1JlcXVlc3QgPSAyO1xyXG5cdHN0YXRpYyBhdmVyYWdlQml0cmF0ZVJlcXVlc3QgPSAzO1xyXG5cdHN0YXRpYyBzdGFydFN0cmVhbWluZyA9IDQ7XHJcblx0c3RhdGljIHN0b3BTdHJlYW1pbmcgPSA1O1xyXG5cdHN0YXRpYyBsYXRlbmN5VGVzdCA9IDY7XHJcblx0c3RhdGljIHJlcXVlc3RJbml0aWFsU2V0dGluZ3MgPSA3O1xyXG5cclxuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcblx0LypcclxuXHQgKiBJbnB1dCBNZXNzYWdlcy4gUmFuZ2UgPSA1MC4uODkuXHJcblx0ICovXHJcblxyXG5cdC8vIEdlbmVyaWMgSW5wdXQgTWVzc2FnZXMuIFJhbmdlID0gNTAuLjU5LlxyXG5cdHN0YXRpYyB1aUludGVyYWN0aW9uID0gNTA7XHJcblx0c3RhdGljIGNvbW1hbmQgPSA1MTtcclxuXHJcblx0Ly8gS2V5Ym9hcmQgSW5wdXQgTWVzc2FnZS4gUmFuZ2UgPSA2MC4uNjkuXHJcblx0c3RhdGljIGtleURvd24gPSA2MDtcclxuXHRzdGF0aWMga2V5VXAgPSA2MTtcclxuXHRzdGF0aWMga2V5UHJlc3MgPSA2MjtcclxuXHJcblx0Ly8gTW91c2UgSW5wdXQgTWVzc2FnZXMuIFJhbmdlID0gNzAuLjc5LlxyXG5cdHN0YXRpYyBtb3VzZUVudGVyID0gNzA7XHJcblx0c3RhdGljIG1vdXNlTGVhdmUgPSA3MTtcclxuXHRzdGF0aWMgbW91c2VEb3duID0gNzI7XHJcblx0c3RhdGljIG1vdXNlVXAgPSA3MztcclxuXHRzdGF0aWMgbW91c2VNb3ZlID0gNzQ7XHJcblx0c3RhdGljIG1vdXNlV2hlZWwgPSA3NTtcclxuXHJcblx0Ly8gVG91Y2ggSW5wdXQgTWVzc2FnZXMuIFJhbmdlID0gODAuLjg5LlxyXG5cdHN0YXRpYyB0b3VjaFN0YXJ0ID0gODA7XHJcblx0c3RhdGljIHRvdWNoRW5kID0gODE7XHJcblx0c3RhdGljIHRvdWNoTW92ZSA9IDgyO1xyXG5cclxuXHQvLyBHYW1lcGFkIElucHV0IE1lc3NhZ2VzLiBSYW5nZSA9IDkwLi45OVxyXG5cdHN0YXRpYyBnYW1lcGFkQnV0dG9uUHJlc3NlZCA9IDkwO1xyXG5cdHN0YXRpYyBnYW1lcGFkQnV0dG9uUmVsZWFzZWQgPSA5MTtcclxuXHRzdGF0aWMgZ2FtZXBhZEFuYWxvZyA9IDkyO1xyXG5cclxuXHJcblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG59IiwiaW1wb3J0IHsgSVZpZGVvUGxheWVyIH0gZnJvbSBcIi4uL1ZpZGVvUGxheWVyL0lWaWRlb1BsYXllclwiO1xyXG5cclxuLyoqXHJcbiAqIFRoZSBVaSBDb250cm9sbGVyIGNsYXNzIGhhbmRsZXMgYWxsIG1ldGhvZHMgdGhhdCBpbnRlcmFjdCB3aXRoIHRoZSBVSVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFVpQ29udHJvbGxlciB7XHJcbiAgICB2aWRlb1BsYXllclByb3ZpZGVyOiBJVmlkZW9QbGF5ZXI7XHJcbiAgICBwbGF5ZXJTdHlsZUF0dHJpYnV0ZXM6IHBsYXllclN0eWxlQXR0cmlidXRlcztcclxuICAgIG9yaWVudGF0aW9uQ2hhbmdlVGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD47XHJcbiAgICBsYXN0VGltZVJlc2l6ZWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgIHJlc2l6ZVRpbWVvdXQ6IG51bWJlcjtcclxuICAgIGVubGFyZ2VEaXNwbGF5VG9GaWxsV2luZG93OiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHZpZGVvUGxheWVyUHJvdmlkZXI6IElWaWRlb1BsYXllcikge1xyXG4gICAgICAgIHRoaXMudmlkZW9QbGF5ZXJQcm92aWRlciA9IHZpZGVvUGxheWVyUHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMgPSBuZXcgcGxheWVyU3R5bGVBdHRyaWJ1dGVzKCk7XHJcblxyXG4gICAgICAgIC8vIHNldCByZXNpemUgZXZlbnRzIHRvIHRoZSB3aW5kb3dzIGlmIGl0IGlzIHJlc2l6ZWQgb3IgaXRzIG9yaWVudGF0aW9uIGlzIGNoYW5nZWRcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gdGhpcy5yZXNpemVQbGF5ZXJTdHlsZSgpLCB0cnVlKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCAoKSA9PiB0aGlzLm9uT3JpZW50YXRpb25DaGFuZ2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNpemVzIHRoZSBwbGF5ZXIgZWxlbWVudCB0byBmaWxsIHRoZSB3aW5kb3cgXHJcbiAgICAgKiBAcGFyYW0gcGxheWVyRWxlbWVudCAtIHRoZSBwbGF5ZXIgRE9NIGVsZW1lbnQgXHJcbiAgICAgKi9cclxuICAgIHJlc2l6ZVBsYXllclN0eWxlVG9GaWxsV2luZG93KHBsYXllckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IHZpZGVvRWxlbWVudCA9IHRoaXMudmlkZW9QbGF5ZXJQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKTtcclxuICAgICAgICAvLyBGaWxsIHRoZSBwbGF5ZXIgZGlzcGxheSBpbiB3aW5kb3csIGtlZXBpbmcgcGljdHVyZSdzIGFzcGVjdCByYXRpby5cclxuICAgICAgICBsZXQgd2luZG93QXNwZWN0UmF0aW8gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLyB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICBsZXQgcGxheWVyQXNwZWN0UmF0aW8gPSBwbGF5ZXJFbGVtZW50LmNsaWVudEhlaWdodCAvIHBsYXllckVsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgLy8gV2Ugd2FudCB0byBrZWVwIHRoZSB2aWRlbyByYXRpbyBjb3JyZWN0IGZvciB0aGUgdmlkZW8gc3RyZWFtXHJcbiAgICAgICAgbGV0IHZpZGVvV2lkdGg7XHJcbiAgICAgICAgbGV0IHZpZGVvSGVpZ2h0O1xyXG4gICAgICAgIGlmICghdmlkZW9FbGVtZW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdmlkZW9XaWR0aCA9IHBhcnNlSW50KHZpZGVvRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ2aWRlb1dpZHRoXCIpKTtcclxuICAgICAgICAgICAgdmlkZW9IZWlnaHQgPSBwYXJzZUludCh2aWRlb0VsZW1lbnQuZ2V0QXR0cmlidXRlKFwidmlkZW9IZWlnaHRcIikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdmlkZW9Bc3BlY3RSYXRpbyA9IHZpZGVvSGVpZ2h0IC8gdmlkZW9XaWR0aDtcclxuXHJcbiAgICAgICAgaWYgKGlzTmFOKHZpZGVvQXNwZWN0UmF0aW8pKSB7XHJcbiAgICAgICAgICAgIC8vVmlkZW8gaXMgbm90IGluaXRpYWxpc2VkIHlldCBzbyBzZXQgcGxheWVyRWxlbWVudCB0byBzaXplIG9mIHdpbmRvd1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVRvcCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlTGVmdCA9IDA7XHJcbiAgICAgICAgICAgIHBsYXllckVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIFwidG9wOiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlVG9wICsgXCJweDsgbGVmdDogXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUxlZnQgKyBcInB4OyB3aWR0aDogXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVdpZHRoICsgXCJweDsgaGVpZ2h0OiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlSGVpZ2h0ICsgXCJweDsgY3Vyc29yOiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlQ3Vyc29yICsgXCI7IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVBZGRpdGlvbmFsKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvd0FzcGVjdFJhdGlvIDwgcGxheWVyQXNwZWN0UmF0aW8pIHtcclxuICAgICAgICAgICAgLy8gV2luZG93IGhlaWdodCBpcyB0aGUgY29uc3RyYWluaW5nIGZhY3RvciBzbyB0byBrZWVwIGFzcGVjdCByYXRpbyBjaGFuZ2Ugd2lkdGggYXBwcm9wcmlhdGVseVxyXG4gICAgICAgICAgICB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVdpZHRoID0gTWF0aC5mbG9vcih3aW5kb3cuaW5uZXJIZWlnaHQgLyB2aWRlb0FzcGVjdFJhdGlvKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlVG9wID0gMDtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVMZWZ0ID0gTWF0aC5mbG9vcigod2luZG93LmlubmVyV2lkdGggLSB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVdpZHRoKSAqIDAuNSk7XHJcbiAgICAgICAgICAgIHBsYXllckVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIFwidG9wOiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlVG9wICsgXCJweDsgbGVmdDogXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUxlZnQgKyBcInB4OyB3aWR0aDogXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVdpZHRoICsgXCJweDsgaGVpZ2h0OiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlSGVpZ2h0ICsgXCJweDsgY3Vyc29yOiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlQ3Vyc29yICsgXCI7IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVBZGRpdGlvbmFsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBXaW5kb3cgd2lkdGggaXMgdGhlIGNvbnN0cmFpbmluZyBmYWN0b3Igc28gdG8ga2VlcCBhc3BlY3QgcmF0aW8gY2hhbmdlIGhlaWdodCBhcHByb3ByaWF0ZWx5XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVIZWlnaHQgPSBNYXRoLmZsb29yKHdpbmRvdy5pbm5lcldpZHRoICogdmlkZW9Bc3BlY3RSYXRpbyk7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlVG9wID0gTWF0aC5mbG9vcigod2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVIZWlnaHQpICogMC41KTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVMZWZ0ID0gMDtcclxuICAgICAgICAgICAgcGxheWVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgXCJ0b3A6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVUb3AgKyBcInB4OyBsZWZ0OiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlTGVmdCArIFwicHg7IHdpZHRoOiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlV2lkdGggKyBcInB4OyBoZWlnaHQ6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVIZWlnaHQgKyBcInB4OyBjdXJzb3I6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVDdXJzb3IgKyBcIjsgXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUFkZGl0aW9uYWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2l6ZXMgdGhlIHBsYXllciBlbGVtZW50IHRvIGZpdCB0aGUgYWN0dWFsIHNpemUgb2YgdGhlIHN0cmVhbVxyXG4gICAgICogQHBhcmFtIHBsYXllckVsZW1lbnQgLSB0aGUgcGxheWVyIERPTSBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIHJlc2l6ZVBsYXllclN0eWxlVG9BY3R1YWxTaXplKHBsYXllckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IHZpZGVvRWxlbWVudCA9IHRoaXMudmlkZW9QbGF5ZXJQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKTtcclxuICAgICAgICBsZXQgdmlkZW9FbGVtZW50TGVuZ3RoO1xyXG4gICAgICAgIGlmICghdmlkZW9FbGVtZW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdmlkZW9FbGVtZW50TGVuZ3RoID0gcGFyc2VJbnQodmlkZW9FbGVtZW50LmdldEF0dHJpYnV0ZShcImxlbmd0aFwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2aWRlb0VsZW1lbnRMZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIERpc3BsYXkgaW1hZ2UgaW4gaXRzIGFjdHVhbCBzaXplXHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlV2lkdGggPSB2aWRlb0VsZW1lbnQudmlkZW9XaWR0aDtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVIZWlnaHQgPSB2aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQ7XHJcbiAgICAgICAgICAgIGxldCBUb3AgPSBNYXRoLmZsb29yKCh3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUhlaWdodCkgKiAwLjUpO1xyXG4gICAgICAgICAgICBsZXQgTGVmdCA9IE1hdGguZmxvb3IoKHdpbmRvdy5pbm5lcldpZHRoIC0gdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVXaWR0aCkgKiAwLjUpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVRvcCA9IChUb3AgPiAwKSA/IFRvcCA6IDA7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlTGVmdCA9IChMZWZ0ID4gMCkgPyBMZWZ0IDogMDtcclxuICAgICAgICAgICAgcGxheWVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgXCJ0b3A6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVUb3AgKyBcInB4OyBsZWZ0OiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlTGVmdCArIFwicHg7IHdpZHRoOiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlV2lkdGggKyBcInB4OyBoZWlnaHQ6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVIZWlnaHQgKyBcInB4OyBjdXJzb3I6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVDdXJzb3IgKyBcIjsgXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUFkZGl0aW9uYWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2l6ZXMgdGhlIHBsYXllciBlbGVtZW50IHRvIGZpdCBhbiBhcmJpdHJhcnkgc2l6ZSBcclxuICAgICAqIEBwYXJhbSBwbGF5ZXJFbGVtZW50IC0gdGhlIHBsYXllciBET00gZWxlbWVudFxyXG4gICAgICovXHJcbiAgICByZXNpemVQbGF5ZXJTdHlsZVRvQXJiaXRyYXJ5U2l6ZShwbGF5ZXJFbGVtZW50OiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIHBsYXllckVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIFwidG9wOiAwcHg7IGxlZnQ6IDBweDsgd2lkdGg6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVXaWR0aCArIFwicHg7IGhlaWdodDogXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUhlaWdodCArIFwicHg7IGN1cnNvcjogXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUN1cnNvciArIFwiOyBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlQWRkaXRpb25hbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvdmVycmlkZSBmb3Igc2V0dGluZyB1cCB0aGUgbW91c2UgYW5kIGZyZWV6ZUZyYW1lIFxyXG4gICAgICogQHBhcmFtIGVsZW1lbnQgLSB0aGUgcGxheWVyIERPTSBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIHNldFVwTW91c2VBbmRGcmVlemVGcmFtZShlbGVtZW50OiBIVE1MRGl2RWxlbWVudCkgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvdmVycmlkZSBmb3IgdXBkYXRpbmcgdGhlIHZpZGVvIHN0cmVhbSBzaXplXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZVZpZGVvU3RyZWFtU2l6ZSgpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzaXplcyB0aGUgcGxheWVyIHN0eWxlIGJhc2VkIG9uIHRoZSB3aW5kb3cgaGVpZ2h0IGFuZCB3aWR0aCBcclxuICAgICAqIEByZXR1cm5zIC0gbmlsIGlmIHJlcXVpcmVtZW50cyBhcmUgc2F0aXNmaWVkIFxyXG4gICAgICovXHJcbiAgICByZXNpemVQbGF5ZXJTdHlsZSgpIHtcclxuICAgICAgICBsZXQgcGxheWVyRWxlbWVudCA9IHRoaXMudmlkZW9QbGF5ZXJQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICAgICAgaWYgKCFwbGF5ZXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlVmlkZW9TdHJlYW1TaXplKCk7XHJcblxyXG4gICAgICAgIGlmIChwbGF5ZXJFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZml4ZWQtc2l6ZScpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VXBNb3VzZUFuZEZyZWV6ZUZyYW1lKHBsYXllckVsZW1lbnQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNvbnRyb2xzIGZvciByZXNpemluZyB0aGUgcGxheWVyIFxyXG4gICAgICAgIGxldCB2aWRlb1dpZHRoID0gcGFyc2VJbnQocGxheWVyRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ2aWRlb1dpZHRoXCIpKVxyXG4gICAgICAgIGxldCB2aWRlb0hlaWdodCA9IHBhcnNlSW50KHBsYXllckVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidmlkZW9IZWlnaHRcIikpXHJcbiAgICAgICAgbGV0IHdpbmRvd1NtYWxsZXJUaGFuUGxheWVyID0gd2luZG93LmlubmVyV2lkdGggPCB2aWRlb1dpZHRoIHx8IHdpbmRvdy5pbm5lckhlaWdodCA8IHZpZGVvSGVpZ2h0O1xyXG4gICAgICAgIGlmICh0aGlzLmVubGFyZ2VEaXNwbGF5VG9GaWxsV2luZG93ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVubGFyZ2VEaXNwbGF5VG9GaWxsV2luZG93ID09PSB0cnVlIHx8IHdpbmRvd1NtYWxsZXJUaGFuUGxheWVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZVBsYXllclN0eWxlVG9GaWxsV2luZG93KHBsYXllckVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVQbGF5ZXJTdHlsZVRvQWN0dWFsU2l6ZShwbGF5ZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplUGxheWVyU3R5bGVUb0FyYml0cmFyeVNpemUocGxheWVyRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldFVwTW91c2VBbmRGcmVlemVGcmFtZShwbGF5ZXJFbGVtZW50KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT24gdGhlIG9yaWVudGF0aW9uIGNoYW5nZSBvZiBhIHdpbmRvdyBjbGVhciB0aGUgdGltZW91dCBcclxuICAgICAqL1xyXG4gICAgb25PcmllbnRhdGlvbkNoYW5nZSgpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5vcmllbnRhdGlvbkNoYW5nZVRpbWVvdXQpO1xyXG4gICAgICAgIHRoaXMub3JpZW50YXRpb25DaGFuZ2VUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7IHRoaXMucmVzaXplUGxheWVyU3R5bGUoKSB9LCA1MDApO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgdGhlIHBsYXllciBzdHlsZSBhdHRyaWJ1dGVzIHNvIHRoZXkgY2FuIGJlIGluc3RhbnRpYXRlZFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIHBsYXllclN0eWxlQXR0cmlidXRlcyB7XHJcbiAgICBzdHlsZVdpZHRoOiBudW1iZXI7XHJcbiAgICBzdHlsZUhlaWdodDogbnVtYmVyO1xyXG4gICAgc3R5bGVUb3A6IG51bWJlcjtcclxuICAgIHN0eWxlTGVmdDogbnVtYmVyO1xyXG4gICAgc3R5bGVDdXJzb3IgPSAnZGVmYXVsdCc7XHJcbiAgICBzdHlsZUFkZGl0aW9uYWw6IG51bWJlcjtcclxufSIsImltcG9ydCB7IE1vdXNlQ29udHJvbGxlciB9IGZyb20gXCIuLi9JbnB1dHMvTW91c2VDb250cm9sbGVyXCJcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuaW1wb3J0IHsgSVZpZGVvUGxheWVyIH0gZnJvbSBcIi4vSVZpZGVvUGxheWVyXCI7XHJcblxyXG4vKipcclxuICogVmlkZW8gUGxheWVyIENvbnRyb2xsZXIgaGFuZGxlcyB0aGUgY3JlYXRpb24gb2YgdGhlIHZpZGVvIEhUTUwgZWxlbWVudCBhbmQgYWxsIGhhbmRsZXJzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3RyZWFtQ29udHJvbGxlciB7XHJcbiAgICB2aWRlb0VsZW1lbnRQcm92aWRlcjogSVZpZGVvUGxheWVyO1xyXG4gICAgYXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50O1xyXG4gICAgbW91c2VDb250cm9sbGVyOiBNb3VzZUNvbnRyb2xsZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IodmlkZW9FbGVtZW50UHJvdmlkZXI6IElWaWRlb1BsYXllcikge1xyXG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIgPSB2aWRlb0VsZW1lbnRQcm92aWRlcjtcclxuICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJBdWRpb1wiKSBhcyBIVE1MQXVkaW9FbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGVuIHRoZSBQZWVyIGNvbm5lY3Rpb24gaGFzIGEgdHJhY2sgZXZlbnRcclxuICAgICAqIEBwYXJhbSBydGNUcmFja0V2ZW50IC0gUlRDIFRyYWNrIEV2ZW50IFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVPblRyYWNrKHJ0Y1RyYWNrRXZlbnQ6IFJUQ1RyYWNrRXZlbnQpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiaGFuZGxlT25UcmFjayBcIiArIEpTT04uc3RyaW5naWZ5KHJ0Y1RyYWNrRXZlbnQuc3RyZWFtcyksIDYpO1xyXG4gICAgICAgIGxldCB2aWRlb0VsZW1lbnQgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpO1xyXG5cclxuICAgICAgICBpZiAocnRjVHJhY2tFdmVudC50cmFjaykge1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdHb3QgdHJhY2sgLSAnICsgcnRjVHJhY2tFdmVudC50cmFjay5raW5kICsgJyBpZD0nICsgcnRjVHJhY2tFdmVudC50cmFjay5pZCArICcgcmVhZHlTdGF0ZT0nICsgcnRjVHJhY2tFdmVudC50cmFjay5yZWFkeVN0YXRlLCA2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChydGNUcmFja0V2ZW50LnRyYWNrLmtpbmQgPT0gXCJhdWRpb1wiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuQ3JlYXRlQXVkaW9UcmFjayhydGNUcmFja0V2ZW50LnN0cmVhbXNbMF0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmIChydGNUcmFja0V2ZW50LnRyYWNrLmtpbmQgPT0gXCJ2aWRlb1wiICYmIHZpZGVvRWxlbWVudC5zcmNPYmplY3QgIT09IHJ0Y1RyYWNrRXZlbnQuc3RyZWFtc1swXSkge1xyXG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gcnRjVHJhY2tFdmVudC5zdHJlYW1zWzBdO1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdTZXQgdmlkZW8gc291cmNlIGZyb20gdmlkZW8gdHJhY2sgb250cmFjay4nLCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgdGhlIGF1ZGlvIGRldmljZSB3aGVuIHJlY2VpdmluZyBhbiBSVENUcmFja0V2ZW50IHdpdGggdGhlIGtpbmQgb2YgXCJhdWRpb1wiXHJcbiAgICAqIEBwYXJhbSBhdWRpb01lZGlhU3RyZWFtIC0gQXVkaW8gTWVkaWEgc3RyZWFtIHRyYWNrXHJcbiAgICAqL1xyXG4gICAgQ3JlYXRlQXVkaW9UcmFjayhhdWRpb01lZGlhU3RyZWFtOiBNZWRpYVN0cmVhbSkge1xyXG4gICAgICAgIGxldCB2aWRlb0VsZW1lbnQgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpO1xyXG5cclxuICAgICAgICAvLyBkbyBub3RoaW5nIHRoZSB2aWRlbyBoYXMgdGhlIHNhbWUgbWVkaWEgc3RyZWFtIGFzIHRoZSBhdWRpbyB0cmFjayB3ZSBoYXZlIGhlcmUgKHRoZXkgYXJlIGxpbmtlZClcclxuICAgICAgICBpZiAodmlkZW9FbGVtZW50LnNyY09iamVjdCA9PSBhdWRpb01lZGlhU3RyZWFtKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdmlkZW8gZWxlbWVudCBoYXMgc29tZSBvdGhlciBtZWRpYSBzdHJlYW0gdGhhdCBpcyBub3QgYXNzb2NpYXRlZCB3aXRoIHRoaXMgYXVkaW8gdHJhY2tcclxuICAgICAgICBlbHNlIGlmICh2aWRlb0VsZW1lbnQuc3JjT2JqZWN0ICYmIHZpZGVvRWxlbWVudC5zcmNPYmplY3QgIT09IGF1ZGlvTWVkaWFTdHJlYW0pIHtcclxuICAgICAgICAgICAgLy8gY3JlYXRlIGEgbmV3IGF1ZGlvIGVsZW1lbnRcclxuICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQuc3JjT2JqZWN0ID0gYXVkaW9NZWRpYVN0cmVhbTtcclxuICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCAnQ3JlYXRlZCBuZXcgYXVkaW8gZWxlbWVudCB0byBwbGF5IHNlcGFyYXRlIGF1ZGlvIHN0cmVhbS4nLCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSVZpZGVvUGxheWVyIH0gZnJvbSBcIi4vSVZpZGVvUGxheWVyXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVmlkZW9QbGF5ZXIgaW1wbGVtZW50cyBJVmlkZW9QbGF5ZXIge1xyXG4gICAgdmlkZW9FbGVtZW50OiBIVE1MVmlkZW9FbGVtZW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHJvb3REaXY6IEhUTUxEaXZFbGVtZW50LCBzdGFydFZpZGVvTXV0ZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKTtcclxuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5pZCA9IFwic3RyZWFtaW5nVmlkZW9cIjtcclxuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCA9IHN0YXJ0VmlkZW9NdXRlZDtcclxuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5kaXNhYmxlUGljdHVyZUluUGljdHVyZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheXNJbmxpbmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgcm9vdERpdi5hcHBlbmRDaGlsZCh0aGlzLnZpZGVvRWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgY29udGV4dCBvZiB0aGUgaHRtbCB2aWRlbyBlbGVtZW50XHJcbiAgICAgKiBAcmV0dXJucyB0aGUgY3VycmVudCBjb250ZXh0IG9mIHRoZSB2aWRlbyBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIGdldFZpZGVvRWxlbWVudCgpOiBIVE1MVmlkZW9FbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy52aWRlb0VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgY29udGV4dCBvZiB0aGUgaHRtbCB2aWRlbyBlbGVtZW50cyBwYXJlbnRcclxuICAgICAqIEByZXR1cm5zIHRoZSBjdXJyZW50IGNvbnRleHQgb2YgdGhlIHZpZGVvIGVsZW1lbnRzIHBhcmVudFxyXG4gICAgICovXHJcbiAgICBnZXRWaWRlb1BhcmVudEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZpZGVvRWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBjbGljayBhY3Rpb25zIGZvciB3aGVuIHRoZSBFbGVtZW50IGlzIG1vdXNlIGNsaWNrZWRcclxuICAgICAqIEBwYXJhbSBldmVudCAtIE1vdXNlIEV2ZW50XHJcbiAgICAgKi9cclxuICAgIHNldENsaWNrQWN0aW9ucyhldmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpIHtcclxuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbWlub3IgaGFjayB0byBhbGxldmlhdGUgaW9zIG5vdCBzdXBwb3J0aW5nIHBvaW50ZXJsb2NrXHJcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50LnJlcXVlc3RQb2ludGVyTG9jaykge1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5yZXF1ZXN0UG9pbnRlckxvY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFNldCB0aGUgbW91c2UgZW50ZXIgYW5kIG1vdXNlIGxlYXZlIGV2ZW50cyBcclxuICAgICovXHJcbiAgICBzZXRNb3VzZUVudGVyQW5kTGVhdmVFdmVudHMobW91c2VFbnRlckNhbGxCYWNrOiAoKSA9PiB2b2lkLCBtb3VzZUxlYXZlQ2FsbEJhY2s6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICAvLyBIYW5kbGUgd2hlbiB0aGUgTW91c2UgaGFzIGVudGVyZWQgdGhlIGVsZW1lbnRcclxuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5vbm1vdXNlZW50ZXIgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIk1vdXNlIEVudGVyZWRcIiwgNik7XHJcbiAgICAgICAgICAgIG1vdXNlRW50ZXJDYWxsQmFjaygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZXMgd2hlbiB0aGUgbW91c2UgaGFzIGxlZnQgdGhlIGVsZW1lbnQgXHJcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQub25tb3VzZWxlYXZlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJNb3VzZSBMZWZ0XCIsIDYpO1xyXG4gICAgICAgICAgICBtb3VzZUxlYXZlQ2FsbEJhY2soKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBTZXQgdGhlIFZpZGVvIEVsZW1lbnRzIHNyYyBvYmplY3QgdHJhY2tzIHRvIGVuYWJsZVxyXG4gICAgKiBAcGFyYW0gZW5hYmxlZCAtIEVuYWJsZSBUcmFja3Mgb24gdGhlIFNyYyBPYmplY3RcclxuICAgICovXHJcbiAgICBzZXRWaWRlb0VuYWJsZWQoZW5hYmxlZDogYm9vbGVhbikge1xyXG4gICAgICAgIC8vIHRoaXMgaXMgYSB0ZW1wb3JhcnkgaGFjayB1bnRpbCB0eXBlIHNjcmlwdHMgdmlkZW8gZWxlbWVudCBpcyB1cGRhdGVkIHRvIHJlZmxlY3QgdGhlIG5lZWQgZm9yIHRyYWNrcyBvbiBhIGh0bWwgdmlkZW8gZWxlbWVudCBcclxuICAgICAgICBsZXQgdmlkZW9FbGVtZW50ID0gdGhpcy52aWRlb0VsZW1lbnQgYXMgYW55O1xyXG4gICAgICAgIHZpZGVvRWxlbWVudC5zcmNPYmplY3QuZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2s6IE1lZGlhU3RyZWFtVHJhY2spID0+IHRyYWNrLmVuYWJsZWQgPSBlbmFibGVkKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IE1vdXNlQ29udHJvbGxlciB9IGZyb20gXCIuLi9JbnB1dHMvTW91c2VDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IElWaWRlb1BsYXllck1vdXNlSW50ZXJmYWNlIH0gZnJvbSBcIi4vVmlkZW9QbGF5ZXJNb3VzZUludGVyZmFjZVwiO1xyXG5cclxuLyoqXHJcbiAqIFZpZGVvIFBsYXllciBtb3VzZSBIb3ZlciBoYW5kbGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVmlkZW9QbGF5ZXJNb3VzZUhvdmVyRXZlbnRzIGltcGxlbWVudHMgSVZpZGVvUGxheWVyTW91c2VJbnRlcmZhY2Uge1xyXG5cclxuICAgIG1vdXNlQ29udHJvbGxlcjogTW91c2VDb250cm9sbGVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIG1vdXNlQ29udHJvbGxlciAtIE1vdXNlIENvbnRyb2xsZXJcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobW91c2VDb250cm9sbGVyOiBNb3VzZUNvbnRyb2xsZXIpIHtcclxuICAgICAgICB0aGlzLm1vdXNlQ29udHJvbGxlciA9IG1vdXNlQ29udHJvbGxlcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNhdGlzZmllcyB0aGUgaW50ZXJmYWNlcyBoYW5kbGVMb2NrU3RhdGVDaGFuZ2UgcmVxdWlyZW1lbnQgXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUxvY2tTdGF0ZUNoYW5nZSgpOiB2b2lkIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHRoZSBtb3VzZSBtb3ZlIGV2ZW50LCBzZW5kcyB0aGUgbW91c2UgZGF0YSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBtb3VzZUV2ZW50IC0gTW91c2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlTW91c2VNb3ZlKG1vdXNlRXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiTW91c2VNb3ZlXCIsIDYpO1xyXG4gICAgICAgIHRoaXMubW91c2VDb250cm9sbGVyLnNlbmRNb3VzZU1vdmUobW91c2VFdmVudC5vZmZzZXRYLCBtb3VzZUV2ZW50Lm9mZnNldFksIG1vdXNlRXZlbnQubW92ZW1lbnRYLCBtb3VzZUV2ZW50Lm1vdmVtZW50WSk7XHJcbiAgICAgICAgbW91c2VFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHRoZSBtb3VzZSBEb3duIGV2ZW50LCBzZW5kcyB0aGUgbW91c2UgZGF0YSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBtb3VzZUV2ZW50IC0gTW91c2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlTW91c2VEb3duKG1vdXNlRXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwib25Nb3VzZSBEb3duXCIsIDYpO1xyXG4gICAgICAgIHRoaXMubW91c2VDb250cm9sbGVyLnNlbmRNb3VzZURvd24obW91c2VFdmVudC5idXR0b24sIG1vdXNlRXZlbnQub2Zmc2V0WCwgbW91c2VFdmVudC5vZmZzZXRZKTtcclxuICAgICAgICBtb3VzZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgdGhlIG1vdXNlIFVwIGV2ZW50LCBzZW5kcyB0aGUgbW91c2UgZGF0YSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBtb3VzZUV2ZW50IC0gTW91c2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlTW91c2VVcChtb3VzZUV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5tb3VzZUNvbnRyb2xsZXIuc2VuZE1vdXNlVXAobW91c2VFdmVudC5idXR0b24sIG1vdXNlRXZlbnQub2Zmc2V0WCwgbW91c2VFdmVudC5vZmZzZXRZKTtcclxuICAgICAgICBtb3VzZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgdGhlIG1vdXNlIHdoZWVsIGV2ZW50LCBzZW5kcyB0aGUgbW91c2Ugd2hlZWwgZGF0YSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSB3aGVlbEV2ZW50IC0gTW91c2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlTW91c2VXaGVlbCh3aGVlbEV2ZW50OiBXaGVlbEV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5tb3VzZUNvbnRyb2xsZXIuc2VuZE1vdXNlV2hlZWwod2hlZWxFdmVudC5kZXRhaWwgKiAtMTIwLCB3aGVlbEV2ZW50Lm9mZnNldFgsIHdoZWVsRXZlbnQub2Zmc2V0WSk7XHJcbiAgICAgICAgd2hlZWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHRoZSBtb3VzZSBjb250ZXh0IG1lbnUgZXZlbnQsIHNlbmRzIHRoZSBtb3VzZSBkYXRhIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIG1vdXNlRXZlbnQgLSBNb3VzZSBFdmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVDb250ZXh0TWVudShtb3VzZUV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5tb3VzZUNvbnRyb2xsZXIuc2VuZE1vdXNlVXAobW91c2VFdmVudC5idXR0b24sIG1vdXNlRXZlbnQub2Zmc2V0WCwgbW91c2VFdmVudC5vZmZzZXRZKTtcclxuICAgICAgICBtb3VzZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBNb3VzZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi4vSW5wdXRzL01vdXNlQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vTG9nZ2VyL0xvZ2dlclwiO1xyXG5pbXBvcnQgeyBJVmlkZW9QbGF5ZXIgfSBmcm9tIFwiLi9JVmlkZW9QbGF5ZXJcIjtcclxuaW1wb3J0IHsgSVZpZGVvUGxheWVyTW91c2VJbnRlcmZhY2UgfSBmcm9tIFwiLi9WaWRlb1BsYXllck1vdXNlSW50ZXJmYWNlXCI7XHJcblxyXG4vKipcclxuICogSGFuZGxlIHRoZSBtb3VzZSBsb2NrZWQgZXZlbnRzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVmlkZW9QbGF5ZXJNb3VzZUxvY2tlZEV2ZW50cyBpbXBsZW1lbnRzIElWaWRlb1BsYXllck1vdXNlSW50ZXJmYWNlIHtcclxuXHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcblxyXG4gICAgdmlkZW9FbGVtZW50UHJvdmlkZXI6IElWaWRlb1BsYXllcjtcclxuICAgIG1vdXNlQ29udHJvbGxlcjogTW91c2VDb250cm9sbGVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHZpZGVvRWxlbWVudFByb3ZpZGVyIC0gVGhlIEhUTUwgVmlkZW8gRWxlbWVudCBwcm92aWRlclxyXG4gICAgICogQHBhcmFtIG1vdXNlQ29udHJvbGxlciAgLSBNb3VzZSBDb250cm9sbGVyXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHZpZGVvRWxlbWVudFByb3ZpZGVyOiBJVmlkZW9QbGF5ZXIsIG1vdXNlQ29udHJvbGxlcjogTW91c2VDb250cm9sbGVyKSB7XHJcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlciA9IHZpZGVvRWxlbWVudFByb3ZpZGVyO1xyXG4gICAgICAgIHRoaXMubW91c2VDb250cm9sbGVyID0gbW91c2VDb250cm9sbGVyO1xyXG5cclxuICAgICAgICBsZXQgdmlkZW9FbGVtZW50ID0gdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKTtcclxuICAgICAgICB0aGlzLnggPSB2aWRlb0VsZW1lbnQud2lkdGggLyAyO1xyXG4gICAgICAgIHRoaXMueSA9IHZpZGVvRWxlbWVudC5oZWlnaHQgLyAyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHdoZW4gdGhlIGxvY2tlZCBzdGF0ZSBDaGFuZ2VkXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUxvY2tTdGF0ZUNoYW5nZSgpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiTG9jayBzdGF0ZSBoYXMgY2hhbmdlZFwiLCA2KTtcclxuICAgICAgICBsZXQgdmlkZW9FbGVtZW50ID0gdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKTtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucG9pbnRlckxvY2tFbGVtZW50ID09PSB2aWRlb0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSAobW91c2VFdmVudCkgPT4gdGhpcy5oYW5kbGVNb3VzZU1vdmUobW91c2VFdmVudCk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9ud2hlZWwgPSAod2hlZWxFdmVudCkgPT4gdGhpcy5oYW5kbGVNb3VzZVdoZWVsKHdoZWVsRXZlbnQpO1xyXG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQub25tb3VzZWRvd24gPSAod2hlZWxFdmVudCkgPT4gdGhpcy5oYW5kbGVNb3VzZURvd24od2hlZWxFdmVudCk7XHJcbiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5vbm1vdXNldXAgPSAobW91c2VFdmVudCkgPT4gdGhpcy5oYW5kbGVNb3VzZVVwKG1vdXNlRXZlbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gbnVsbDtcclxuICAgICAgICAgICAgdmlkZW9FbGVtZW50Lm9ubW91c2Vkb3duID0gbnVsbDtcclxuICAgICAgICAgICAgdmlkZW9FbGVtZW50Lm9ubW91c2V1cCA9IG51bGw7XHJcbiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5vbndoZWVsID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgdGhlIG1vdXNlIG1vdmUgZXZlbnQsIHNlbmRzIHRoZSBtb3VzZSBkYXRhIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIG1vdXNlRXZlbnQgLSBNb3VzZSBFdmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVNb3VzZU1vdmUobW91c2VFdmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIGxldCB2aWRlb0VsZW1lbnQgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpO1xyXG5cclxuICAgICAgICB0aGlzLnggKz0gbW91c2VFdmVudC5tb3ZlbWVudFg7XHJcbiAgICAgICAgdGhpcy55ICs9IG1vdXNlRXZlbnQubW92ZW1lbnRZO1xyXG4gICAgICAgIGlmICh0aGlzLnggPiB2aWRlb0VsZW1lbnQuY2xpZW50V2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy54IC09IHZpZGVvRWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMueSA+IHZpZGVvRWxlbWVudC5jbGllbnRIZWlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy55IC09IHZpZGVvRWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnggPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHZpZGVvRWxlbWVudC5jbGllbnRXaWR0aCArIHRoaXMueDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMueSA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy55ID0gdmlkZW9FbGVtZW50LmNsaWVudEhlaWdodCAtIHRoaXMueTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubW91c2VDb250cm9sbGVyLnNlbmRNb3VzZU1vdmUodGhpcy54LCB0aGlzLnksIG1vdXNlRXZlbnQubW92ZW1lbnRYLCBtb3VzZUV2ZW50Lm1vdmVtZW50WSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgdGhlIG1vdXNlIERvd24gZXZlbnQsIHNlbmRzIHRoZSBtb3VzZSBkYXRhIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIG1vdXNlRXZlbnQgLSBNb3VzZSBFdmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVNb3VzZURvd24obW91c2VFdmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIHRoaXMubW91c2VDb250cm9sbGVyLnNlbmRNb3VzZURvd24obW91c2VFdmVudC5idXR0b24sIG1vdXNlRXZlbnQueCwgbW91c2VFdmVudC55KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgdGhlIG1vdXNlIFVwIGV2ZW50LCBzZW5kcyB0aGUgbW91c2UgZGF0YSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBtb3VzZUV2ZW50IC0gTW91c2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlTW91c2VVcChtb3VzZUV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5tb3VzZUNvbnRyb2xsZXIuc2VuZE1vdXNlVXAobW91c2VFdmVudC5idXR0b24sIG1vdXNlRXZlbnQueCwgbW91c2VFdmVudC55KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZSB0aGUgbW91c2Ugd2hlZWwgZXZlbnQsIHNlbmRzIHRoZSBtb3VzZSB3aGVlbCBkYXRhIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIHdoZWVsRXZlbnQgLSBNb3VzZSBFdmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVNb3VzZVdoZWVsKHdoZWVsRXZlbnQ6IFdoZWVsRXZlbnQpIHtcclxuICAgICAgICB0aGlzLm1vdXNlQ29udHJvbGxlci5zZW5kTW91c2VXaGVlbCh3aGVlbEV2ZW50LmRlbHRhWSwgd2hlZWxFdmVudC54LCB3aGVlbEV2ZW50LnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHRoZSBtb3VzZSBjb250ZXh0IG1lbnUgZXZlbnQsIHNlbmRzIHRoZSBtb3VzZSBkYXRhIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIG1vdXNlRXZlbnQgLSBNb3VzZSBFdmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVDb250ZXh0TWVudShtb3VzZUV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgTG9nZ2VyLkluZm8oTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJvbkNvbnRleHRNZW51XCIpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgV2ViU29ja2V0Q29udHJvbGxlciB9IGZyb20gXCIuLi9XZWJTb2NrZXRzL1dlYlNvY2tldENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgU3RyZWFtQ29udHJvbGxlciB9IGZyb20gXCIuLi9WaWRlb1BsYXllci9TdHJlYW1Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VJbnN0YW5jZVN0YXRlLCBNZXNzYWdlQW5zd2VyLCBNZXNzYWdlQXV0aFJlc3BvbnNlLCBNZXNzYWdlQ29uZmlnIH0gZnJvbSBcIi4uL1dlYlNvY2tldHMvTWVzc2FnZVJlY2VpdmVcIjtcclxuaW1wb3J0IHsgVWlDb250cm9sbGVyIH0gZnJvbSBcIi4uL1VpL1VpQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBGcmVlemVGcmFtZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRnJlZXplRnJhbWUvRnJlZXplRnJhbWVDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IEFma0xvZ2ljIH0gZnJvbSBcIi4uL0Fmay9BZmtMb2dpY1wiO1xyXG5pbXBvcnQgeyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uQ29udHJvbGxlciB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvUGVlckNvbm5lY3Rpb25Db250cm9sbGVyXCJcclxuaW1wb3J0IHsgS2V5Ym9hcmRDb250cm9sbGVyIH0gZnJvbSBcIi4uL0lucHV0cy9LZXlib2FyZENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgSVRvdWNoQ29udHJvbGxlciB9IGZyb20gXCIuLi9JbnB1dHMvSVRvdWNoQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBVZURlc2NyaXB0b3JVaSB9IGZyb20gXCIuLi9VZUluc3RhbmNlTWVzc2FnZS9VZURlc2NyaXB0b3JVaVwiO1xyXG5pbXBvcnQgeyBVZUNvbnRyb2xNZXNzYWdlIH0gZnJvbSBcIi4uL1VlSW5zdGFuY2VNZXNzYWdlL1VlQ29udHJvbE1lc3NhZ2VcIjtcclxuaW1wb3J0IHsgQWdncmVnYXRlZFN0YXRzIH0gZnJvbSBcIi4uL1BlZXJDb25uZWN0aW9uQ29udHJvbGxlci9BZ2dyZWdhdGVkU3RhdHNcIjtcclxuaW1wb3J0IHsgSVdlYlJ0Y1BsYXllckNvbnRyb2xsZXIgfSBmcm9tIFwiLi9JV2ViUnRjUGxheWVyQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBJRGVsZWdhdGUgfSBmcm9tIFwiLi4vRGVsZWdhdGUvSURlbGVnYXRlXCI7XHJcbmltcG9ydCB7IENvbmZpZyB9IGZyb20gXCIuLi9Db25maWcvQ29uZmlnXCI7XHJcbmltcG9ydCB7IEVuY29kZXIsIEluaXRpYWxTZXR0aW5ncywgV2ViUlRDIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0luaXRpYWxTZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBMYXRlbmN5VGVzdFJlc3VsdHMgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvTGF0ZW5jeVRlc3RSZXN1bHRzXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IElucHV0Q29udHJvbGxlciB9IGZyb20gXCIuLi9JbnB1dHMvSW5wdXRDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IE1pY0NvbnRyb2xsZXIgfSBmcm9tIFwiLi4vTWljUGxheWVyL01pY0NvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgVmlkZW9QbGF5ZXIgfSBmcm9tIFwiLi4vVmlkZW9QbGF5ZXIvVmlkZW9QbGF5ZXJcIjtcclxuaW1wb3J0ICogYXMgTWVzc2FnZVJlY2VpdmUgZnJvbSBcIi4uL1dlYlNvY2tldHMvTWVzc2FnZVJlY2VpdmVcIjtcclxuLyoqXHJcbiAqIEVudHJ5IHBvaW50IGZvciB0aGUgV2ViIFJUQyBQbGF5ZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyB3ZWJSdGNQbGF5ZXJDb250cm9sbGVyIGltcGxlbWVudHMgSVdlYlJ0Y1BsYXllckNvbnRyb2xsZXIge1xyXG5cdGNvbmZpZzogQ29uZmlnO1xyXG5cdHNkcENvbnN0cmFpbnRzOiBSVENPZmZlck9wdGlvbnM7XHJcblx0d2ViU29ja2V0Q29udHJvbGxlcjogV2ViU29ja2V0Q29udHJvbGxlcjtcclxuXHRkYXRhQ2hhbm5lbENvbnRyb2xsZXI6IERhdGFDaGFubmVsQ29udHJvbGxlcjtcclxuXHRkYXRhY2hhbm5lbE9wdGlvbnM6IFJUQ0RhdGFDaGFubmVsSW5pdDtcclxuXHR2aWRlb1BsYXllcjogVmlkZW9QbGF5ZXI7XHJcblx0c3RyZWFtQ29udHJvbGxlcjogU3RyZWFtQ29udHJvbGxlcjtcclxuXHRrZXlib2FyZENvbnRyb2xsZXI6IEtleWJvYXJkQ29udHJvbGxlcjtcclxuXHR0b3VjaENvbnRyb2xsZXI6IElUb3VjaENvbnRyb2xsZXI7XHJcblx0dWVDb250cm9sTWVzc2FnZTogVWVDb250cm9sTWVzc2FnZTtcclxuXHR1ZURlc2NyaXB0b3JVaTogVWVEZXNjcmlwdG9yVWk7XHJcblx0cGVlckNvbm5lY3Rpb25Db250cm9sbGVyOiBQZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXI7XHJcblx0dWlDb250cm9sbGVyOiBVaUNvbnRyb2xsZXI7XHJcblx0aW5wdXRDb250cm9sbGVyOiBJbnB1dENvbnRyb2xsZXI7XHJcblx0ZnJlZXplRnJhbWVDb250cm9sbGVyOiBGcmVlemVGcmFtZUNvbnRyb2xsZXI7XHJcblx0c2hvdWxkU2hvd1BsYXlPdmVybGF5OiBib29sZWFuID0gdHJ1ZTtcclxuXHRhZmtMb2dpYzogQWZrTG9naWM7XHJcblx0cGxheWVyRWxlbWVudENsaWVudFJlY3Q6IERPTVJlY3Q7XHJcblx0bGFzdFRpbWVSZXNpemVkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0bWF0Y2hWaWV3cG9ydFJlc29sdXRpb246IGJvb2xlYW47XHJcblx0cmVzaXplVGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD47XHJcblx0bGF0ZW5jeVN0YXJ0VGltZTogbnVtYmVyO1xyXG5cdGRlbGVnYXRlOiBJRGVsZWdhdGU7XHJcblxyXG5cdC8vIGlmIHlvdSBvdmVycmlkZSB0aGUgZGlzY29ubmVjdGlvbiBtZXNzYWdlIGJ5IGNhbGxpbmcgdGhlIGludGVyZmFjZSBtZXRob2Qgc2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZVxyXG5cdC8vIGl0IHdpbGwgdXNlIHRoaXMgcHJvcGVydHkgdG8gc3RvcmUgdGhlIG92ZXJyaWRlIG1lc3NhZ2Ugc3RyaW5nXHJcblx0ZGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZTogc3RyaW5nO1xyXG5cclxuXHQvLyBmb3IgbWljIHN1cHBvcnQgXHJcblx0dXJsUGFyYW1zOiBVUkxTZWFyY2hQYXJhbXM7XHJcblx0bWljQ29udHJvbGxlcjogTWljQ29udHJvbGxlcjtcclxuXHJcblx0LyoqXHJcblx0ICogXHJcblx0ICogQHBhcmFtIGNvbmZpZyAtIHRoZSBmcm9udGVuZCBjb25maWcgb2JqZWN0IFxyXG5cdCAqIEBwYXJhbSBkZWxlZ2F0ZSAtIHRoZSBkZWxlZ2F0ZSBpbnRlcmZhY2Ugb2JqZWN0IFxyXG5cdCAqL1xyXG5cdGNvbnN0cnVjdG9yKGNvbmZpZzogQ29uZmlnLCBkZWxlZ2F0ZTogSURlbGVnYXRlKSB7XHJcblx0XHR0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuXHRcdHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcclxuXHJcblx0XHR0aGlzLnNkcENvbnN0cmFpbnRzID0ge1xyXG5cdFx0XHRvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlLFxyXG5cdFx0XHRvZmZlclRvUmVjZWl2ZVZpZGVvOiB0cnVlXHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gc2V0IHVwIHRoZSBhZmsgbG9naWMgY2xhc3MgYW5kIGNvbm5lY3QgdXAgaXRzIG1ldGhvZCBmb3IgY2xvc2luZyB0aGUgc2lnbmFsaW5nIHNlcnZlciBcclxuXHRcdHRoaXMuYWZrTG9naWMgPSBuZXcgQWZrTG9naWModGhpcy5jb25maWcuY29udHJvbFNjaGVtZSwgdGhpcy5jb25maWcuYWZrVGltZW91dCk7XHJcblx0XHR0aGlzLmFma0xvZ2ljLnNldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUgPSAobWVzc2FnZTogc3RyaW5nKSA9PiB0aGlzLnNldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUobWVzc2FnZSk7XHJcblx0XHR0aGlzLmFma0xvZ2ljLmNsb3NlV2ViU29ja2V0ID0gKCkgPT4gdGhpcy5jbG9zZVNpZ25hbGluZ1NlcnZlcigpO1xyXG5cclxuXHRcdHRoaXMuZnJlZXplRnJhbWVDb250cm9sbGVyID0gbmV3IEZyZWV6ZUZyYW1lQ29udHJvbGxlcih0aGlzLmNvbmZpZy5wbGF5ZXJFbGVtZW50KTtcclxuXHJcblx0XHR0aGlzLnZpZGVvUGxheWVyID0gbmV3IFZpZGVvUGxheWVyKHRoaXMuY29uZmlnLnBsYXllckVsZW1lbnQsIHRoaXMuY29uZmlnLnN0YXJ0VmlkZW9NdXRlZCk7XHJcblx0XHR0aGlzLnN0cmVhbUNvbnRyb2xsZXIgPSBuZXcgU3RyZWFtQ29udHJvbGxlcih0aGlzLnZpZGVvUGxheWVyKTtcclxuXHJcblx0XHR0aGlzLnVpQ29udHJvbGxlciA9IG5ldyBVaUNvbnRyb2xsZXIodGhpcy52aWRlb1BsYXllcik7XHJcblx0XHR0aGlzLnVpQ29udHJvbGxlci5zZXRVcE1vdXNlQW5kRnJlZXplRnJhbWUgPSAoZWxlbWVudDogSFRNTERpdkVsZW1lbnQpID0+IHRoaXMuc2V0VXBNb3VzZUFuZEZyZWV6ZUZyYW1lKGVsZW1lbnQpO1xyXG5cclxuXHRcdHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyID0gbmV3IERhdGFDaGFubmVsQ29udHJvbGxlcigpO1xyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIuaGFuZGxlT25PcGVuID0gKCkgPT4gdGhpcy5oYW5kbGVEYXRhQ2hhbm5lbENvbm5lY3RlZCgpO1xyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIub25MYXRlbmN5VGVzdFJlc3VsdCA9IChsYXRlbmN5VGVzdFJlc3VsdHM6IExhdGVuY3lUZXN0UmVzdWx0cykgPT4gdGhpcy5oYW5kbGVMYXRlbmN5VGVzdFJlc3VsdChsYXRlbmN5VGVzdFJlc3VsdHMpO1xyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIub25WaWRlb0VuY29kZXJBdmdRUCA9IChBdmdRUDogbnVtYmVyKSA9PiB0aGlzLmhhbmRsZVZpZGVvRW5jb2RlckF2Z1FQKEF2Z1FQKTtcclxuXHRcdHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyLk9uSW5pdGlhbFNldHRpbmdzID0gKEluaXRpYWxTZXR0aW5nczogSW5pdGlhbFNldHRpbmdzKSA9PiB0aGlzLmhhbmRsZUluaXRpYWxTZXR0aW5ncyhJbml0aWFsU2V0dGluZ3MpO1xyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIub25RdWFsaXR5Q29udHJvbE93bmVyc2hpcCA9IChoYXNRdWFsaXR5T3duZXJzaGlwOiBib29sZWFuKSA9PiB0aGlzLmhhbmRsZVF1YWxpdHlDb250cm9sT3duZXJzaGlwKGhhc1F1YWxpdHlPd25lcnNoaXApO1xyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIucmVzZXRBZmtXYXJuaW5nVGltZXJPbkRhdGFTZW5kID0gKCkgPT4gdGhpcy5hZmtMb2dpYy5yZXNldEFma1dhcm5pbmdUaW1lcigpO1xyXG5cclxuXHRcdC8vIHNldCB1cCB3ZWJzb2NrZXQgbWV0aG9kc1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyID0gbmV3IFdlYlNvY2tldENvbnRyb2xsZXIodGhpcy5jb25maWcuc2lnbmFsbGluZ1NlcnZlckFkZHJlc3MpO1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLm9uQ29uZmlnID0gKG1lc3NhZ2VDb25maWc6IE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VDb25maWcpID0+IHRoaXMuaGFuZGxlT25Db25maWdNZXNzYWdlKG1lc3NhZ2VDb25maWcpO1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLm9uSW5zdGFuY2VTdGF0ZUNoYW5nZSA9IChpbnN0YW5jZVN0YXRlOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlSW5zdGFuY2VTdGF0ZSkgPT4gdGhpcy5oYW5kbGVJbnN0YW5jZVN0YXRlQ2hhbmdlKGluc3RhbmNlU3RhdGUpO1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLm9uQXV0aGVudGljYXRpb25SZXNwb25zZSA9IChhdXRoUmVzcG9uc2U6IE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VBdXRoUmVzcG9uc2UpID0+IHRoaXMuaGFuZGxlQXV0aGVudGljYXRpb25SZXNwb25zZShhdXRoUmVzcG9uc2UpO1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLm9uV2ViU29ja2V0T25jbG9zZU92ZXJsYXlNZXNzYWdlID0gKGV2ZW50KSA9PiB0aGlzLmRlbGVnYXRlLm9uRGlzY29ubmVjdChgJHtldmVudC5jb2RlfSAtICR7ZXZlbnQucmVhc29ufWApO1xyXG5cclxuXHRcdC8vIHNldCB1cCB0aGUgZmluYWwgd2ViUnRjIHBsYXllciBjb250cm9sbGVyIG1ldGhvZHMgZnJvbSB3aXRoaW4gb3VyIGRlbGVnYXRlIHNvIGEgY29ubmVjdGlvbiBjYW4gYmUgYWN0aXZhdGVkXHJcblx0XHR0aGlzLmRlbGVnYXRlLnNldElXZWJSdGNQbGF5ZXJDb250cm9sbGVyKHRoaXMpO1xyXG5cclxuXHRcdC8vIG5vdyB0aGF0IHRoZSBkZWxlZ2F0ZSBoYXMgZmluaXNoZWQgaW5zdGFudGlhdGluZyBjb25uZWN0IHRoZSByZXN0IG9mIHRoZSBhZmsgbWV0aG9kcyB0byB0aGUgYWZrIGxvZ2ljIGNsYXNzXHJcblx0XHR0aGlzLmFma0xvZ2ljLnNob3dBZmtPdmVybGF5ID0gKCkgPT4gdGhpcy5kZWxlZ2F0ZS5zaG93QWZrT3ZlcmxheSh0aGlzLmFma0xvZ2ljLmNvdW50RG93bik7XHJcblx0XHR0aGlzLmFma0xvZ2ljLnVwZGF0ZUFma0NvdW50ZG93biA9ICgpID0+IHRoaXMuZGVsZWdhdGUudXBkYXRlQWZrT3ZlcmxheSh0aGlzLmFma0xvZ2ljLmNvdW50RG93bik7XHJcblx0XHR0aGlzLmFma0xvZ2ljLmhpZGVDdXJyZW50T3ZlcmxheSA9ICgpID0+IHRoaXMuZGVsZWdhdGUuaGlkZUN1cnJlbnRPdmVybGF5KCk7XHJcblx0XHR0aGlzLndlYlNvY2tldENvbnRyb2xsZXIuc3RvcEFma1dhcm5pbmdUaW1lciA9ICgpID0+IHRoaXMuYWZrTG9naWMuc3RvcEFma1dhcm5pbmdUaW1lcigpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogY29ubmVjdCB1cCB0aGUgb25BZmtDbGljayBhY3Rpb24gd2l0aCBhIG1ldGhvZCBzbyBpdCBjYW4gYmUgZXhwb3NlZCB0byB0aGUgZGVsZWdhdGVcclxuXHQgKi9cclxuXHRvbkFma0NsaWNrKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5hZmtMb2dpYy5vbkFma0NsaWNrKCk7XHJcblxyXG5cdFx0Ly8gaWYgdGhlIHN0cmVhbSBpcyBwYXVzZWQgcGxheSBpdFxyXG5cdFx0aWYgKHRoaXMudmlkZW9QbGF5ZXIudmlkZW9FbGVtZW50LnBhdXNlZCA9PT0gdHJ1ZSkge1xyXG5cdFx0XHR0aGlzLnBsYXlTdHJlYW0oKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlc3RhcnQgdGhlIHN0cmVhbSBhdXRvbWF0aWNpdHkgd2l0aG91dCByZWZyZXNoaW5nIHRoZSBwYWdlXHJcblx0ICovXHJcblx0cmVzdGFydFN0cmVhbUF1dG9tYXRpY2l0eSgpIHtcclxuXHRcdC8vIGlmIHRoZXJlIGlzIG5vIHdlYlNvY2tldENvbnRyb2xsZXIgcmV0dXJuIGltbWVkaWF0ZWx5IG9yIHRoaXMgd2lsbCBub3Qgd29ya1xyXG5cdFx0aWYgKCF0aGlzLndlYlNvY2tldENvbnRyb2xsZXIpIHtcclxuXHRcdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlRoZSBXZWIgU29ja2V0IENvbnRyb2xsZXIgZG9lcyBub3QgZXhpc3Qgc28gdGhpcyB3aWxsIG5vdCB3b3JrIHJpZ2h0IG5vdy5cIik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBpZiBhIHdlYnNvY2tldCBvYmplY3QgaGFzIG5vdCBiZWVuIGNyZWF0ZWQgY29ubmVjdCBub3JtYWxseSB3aXRob3V0IGNsb3NpbmcgXHJcblx0XHRpZiAoIXRoaXMud2ViU29ja2V0Q29udHJvbGxlci53ZWJTb2NrZXQpIHtcclxuXHRcdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkEgd2Vic29ja2V0IGNvbm5lY3Rpb24gaGFzIG5vdCBiZWVuIG1hZGUgeWV0IHNvIHdlIHdpbGwgc3RhcnQgdGhlIHN0cmVhbVwiKTtcclxuXHRcdFx0dGhpcy5kZWxlZ2F0ZS5vbldlYlJ0Y0F1dG9Db25uZWN0KCk7XHJcblx0XHRcdHRoaXMuY29ubmVjdFRvU2lnbmFsbGluZ1NlcnZlcigpO1xyXG5cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIHNldCB0aGUgcmVwbGF5IHN0YXR1cyBzbyB3ZSBnZXQgYSB0ZXh0IG92ZXJsYXkgb3ZlciBhbiBhY3Rpb24gb3ZlcmxheVxyXG5cdFx0XHR0aGlzLmRlbGVnYXRlLnNob3dBY3Rpb25PckVycm9yT25EaXNjb25uZWN0ID0gZmFsc2U7XHJcblxyXG5cdFx0XHQvLyBzZXQgdGhlIGRpc2Nvbm5lY3QgbWVzc2FnZVxyXG5cdFx0XHR0aGlzLnNldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUoXCJSZXN0YXJ0aW5nIHN0cmVhbSBtYW51YWxseVwiKTtcclxuXHJcblx0XHRcdC8vIGNsb3NlIHRoZSBjb25uZWN0aW9uIFxyXG5cdFx0XHR0aGlzLmNsb3NlU2lnbmFsaW5nU2VydmVyKCk7XHJcblxyXG5cdFx0XHQvLyB3YWl0IGZvciB0aGUgY29ubmVjdGlvbiB0byBjbG9zZSBhbmQgcmVzdGFydCB0aGUgY29ubmVjdGlvblxyXG5cdFx0XHRsZXQgYXV0b0Nvbm5lY3RUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5kZWxlZ2F0ZS5vbldlYlJ0Y0F1dG9Db25uZWN0KCk7XHJcblx0XHRcdFx0dGhpcy5jb25uZWN0VG9TaWduYWxsaW5nU2VydmVyKCk7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KGF1dG9Db25uZWN0VGltZW91dCk7XHJcblx0XHRcdH0sIDMwMDApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0cyBpZiB3ZSBhcmUgZW5sYXJnaW5nIHRoZSBkaXNwbGF5IHRvIGZpbGwgdGhlIHdpbmRvdyBmb3IgZnJlZXplIGZyYW1lcyBhbmQgdWkgY29udHJvbGxlclxyXG5cdCAqIEBwYXJhbSBpc0ZpbGxpbmcgaXMgdGhlIGRpc3BsYXkgZmlsbGluZyBvciBub3RcclxuXHQgKi9cclxuXHRzZXRFbmxhcmdlVG9GaWxsRGlzcGxheShpc0ZpbGxpbmc6IGJvb2xlYW4pIHtcclxuXHRcdHRoaXMuZnJlZXplRnJhbWVDb250cm9sbGVyLmZyZWV6ZUZyYW1lLmVubGFyZ2VEaXNwbGF5VG9GaWxsV2luZG93ID0gaXNGaWxsaW5nO1xyXG5cdFx0dGhpcy51aUNvbnRyb2xsZXIuZW5sYXJnZURpc3BsYXlUb0ZpbGxXaW5kb3cgPSBpc0ZpbGxpbmc7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBMb2FkcyBhIGZyZWV6ZSBmcmFtZSBpZiBpdCBpcyByZXF1aXJlZCBvdGhlcndpc2Ugc2hvd3MgdGhlIHBsYXkgb3ZlcmxheVxyXG5cdCAqL1xyXG5cdGxvYWRGcmVlemVGcmFtZU9yU2hvd1BsYXlPdmVybGF5KCkge1xyXG5cdFx0aWYgKHRoaXMuc2hvdWxkU2hvd1BsYXlPdmVybGF5ID09PSB0cnVlKSB7XHJcblx0XHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJzaG93aW5nIHBsYXkgb3ZlcmxheVwiKTtcclxuXHRcdFx0dGhpcy5kZWxlZ2F0ZS5zaG93UGxheU92ZXJsYXkoKTtcclxuXHRcdFx0dGhpcy5yZXNpemVQbGF5ZXJTdHlsZSgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcInNob3dpbmcgZnJlZXplIGZyYW1lXCIpO1xyXG5cdFx0XHR0aGlzLmZyZWV6ZUZyYW1lQ29udHJvbGxlci5zaG93RnJlZXplRnJhbWUoKTtcclxuXHRcdH1cclxuXHRcdHRoaXMudmlkZW9QbGF5ZXIuc2V0VmlkZW9FbmFibGVkKGZhbHNlKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEVuYWJsZSB0aGUgdmlkZW8gYWZ0ZXIgaGlkaW5nIGEgZnJlZXplIGZyYW1lXHJcblx0ICovXHJcblx0SW52YWxpZGF0ZUZyZWV6ZUZyYW1lQW5kRW5hYmxlVmlkZW8oKSB7XHJcblx0XHR0aGlzLmZyZWV6ZUZyYW1lQ29udHJvbGxlci5oaWRlRnJlZXplRnJhbWUoKTtcclxuXHRcdGlmICh0aGlzLnZpZGVvUGxheWVyLnZpZGVvRWxlbWVudCkge1xyXG5cdFx0XHR0aGlzLnZpZGVvUGxheWVyLnNldFZpZGVvRW5hYmxlZCh0cnVlKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFBsYXlzIHRoZSBzdHJlYW0gYXVkaW8gYW5kIHZpZGVvIHNvdXJjZSBhbmQgc2V0cyB1cCBvdGhlciBwaWVjZXMgd2hpbGUgdGhlIHN0cmVhbSBzdGFydHNcclxuXHQgKi9cclxuXHRwbGF5U3RyZWFtKCkge1xyXG5cdFx0aWYgKCF0aGlzLnZpZGVvUGxheWVyLnZpZGVvRWxlbWVudCkge1xyXG5cdFx0XHR0aGlzLmRlbGVnYXRlLnNob3dFcnJvck92ZXJsYXkoXCJDb3VsZCBub3QgcGxheWVyIHZpZGVvIHN0cmVhbSBiZWNhdXNlIHRoZSB2aWRlbyBwbGF5ZXIgd2FzIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkuXCIpO1xyXG5cdFx0XHRMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJDb3VsZCBub3QgcGxheWVyIHZpZGVvIHN0cmVhbSBiZWNhdXNlIHRoZSB2aWRlbyBwbGF5ZXIgd2FzIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkuXCIpO1xyXG5cclxuXHRcdFx0Ly8gc2V0IHRoZSBkaXNjb25uZWN0IG1lc3NhZ2VcclxuXHRcdFx0dGhpcy5zZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKFwiU3RyZWFtIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHlcIik7XHJcblxyXG5cdFx0XHQvLyBjbG9zZSB0aGUgY29ubmVjdGlvbiBcclxuXHRcdFx0dGhpcy5jbG9zZVNpZ25hbGluZ1NlcnZlcigpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5pbnB1dENvbnRyb2xsZXIucmVnaXN0ZXJUb3VjaCh0aGlzLmNvbmZpZy5mYWtlTW91c2VXaXRoVG91Y2hlcywgdGhpcy52aWRlb1BsYXllci52aWRlb0VsZW1lbnQpO1xyXG5cdFx0XHRpZiAodGhpcy5zdHJlYW1Db250cm9sbGVyLmF1ZGlvRWxlbWVudCkge1xyXG5cdFx0XHRcdHRoaXMuc3RyZWFtQ29udHJvbGxlci5hdWRpb0VsZW1lbnQucGxheSgpLnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbGF5VmlkZW8oKTtcclxuXHRcdFx0XHR9KS5jYXRjaCgob25SZWplY3RlZFJlYXNvbikgPT4ge1xyXG5cdFx0XHRcdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBvblJlamVjdGVkUmVhc29uKTtcclxuXHRcdFx0XHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgYXV0b3BsYXlpbmcgdmlkZW8gd2l0aG91dCBpbnRlcmFjdGlvbiAtIHRvIHJlc29sdmUgdGhpcyB3ZSBhcmUgZ29pbmcgdG8gc2hvdyB0aGUgcGxheSBidXR0b24gb3ZlcmxheS5cIik7XHJcblx0XHRcdFx0XHR0aGlzLmRlbGVnYXRlLnNob3dQbGF5T3ZlcmxheSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMucGxheVZpZGVvKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5zaG91bGRTaG93UGxheU92ZXJsYXkgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuc2hvd0ZyZWV6ZUZyYW1lKCk7XHJcblx0XHRcdHRoaXMuZGVsZWdhdGUuaGlkZUN1cnJlbnRPdmVybGF5KCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBQbGF5cyB0aGUgdmlkZW8gc3RyZWFtXHJcblx0ICovXHJcblx0cHJpdmF0ZSBwbGF5VmlkZW8oKSB7XHJcblx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdwbGF5VmlkZScpO1xyXG5cdFx0Ly8gLy8gaGFuZGxlIHBsYXkoKSB3aXRoIC50aGVuIGFzIGl0IGlzIGFuIGFzeW5jaHJvbm91cyBjYWxsICBcclxuXHRcdHRoaXMudmlkZW9QbGF5ZXIudmlkZW9FbGVtZW50LnBsYXkoKS5jYXRjaCgob25SZWplY3RlZFJlYXNvbjogc3RyaW5nKSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLnN0cmVhbUNvbnRyb2xsZXIuYXVkaW9FbGVtZW50LnNyY09iamVjdCkge1xyXG5cdFx0XHRcdHRoaXMuc3RyZWFtQ29udHJvbGxlci5hdWRpb0VsZW1lbnQucGF1c2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIG9uUmVqZWN0ZWRSZWFzb24pO1xyXG5cdFx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGF1dG9wbGF5aW5nIHZpZGVvIHdpdGhvdXQgaW50ZXJhY3Rpb24gLSB0byByZXNvbHZlIHRoaXMgd2UgYXJlIGdvaW5nIHRvIHNob3cgdGhlIHBsYXkgYnV0dG9uIG92ZXJsYXkuXCIpO1xyXG5cdFx0XHR0aGlzLmRlbGVnYXRlLnNob3dQbGF5T3ZlcmxheSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBFbmFibGUgdGhlIHZpZGVvIHRvIHBsYXkgYXV0b21hdGljaXR5IGlmIGVuYWJsZVNwc0F1dG9wbGF5IGlzIHRydWVcclxuXHQgKi9cclxuXHRhdXRvUGxheVZpZGVvT3JTZXRVcFBsYXlPdmVybGF5KCkge1xyXG5cdFx0aWYgKHRoaXMuY29uZmlnLmVuYWJsZVNwc0F1dG9wbGF5ID09PSB0cnVlKSB7XHJcblxyXG5cdFx0XHQvLyBzZXQgdXAgdGhlIGF1dG8gcGxheSBvbiB0aGUgdmlkZW8gZWxlbWVudCAgXHJcblx0XHRcdHRoaXMudmlkZW9QbGF5ZXIudmlkZW9FbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTtcclxuXHJcblx0XHRcdC8vIGF0dGVtcHQgdG8gcGxheSB0aGUgdmlkZW9cclxuXHRcdFx0dGhpcy5wbGF5U3RyZWFtKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmRlbGVnYXRlLnNob3dQbGF5T3ZlcmxheSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHNlbmQgYW5kIHJlcXVlc3QgaW5pdGlhbCBzdGF0c1xyXG5cdFx0dGhpcy51ZUNvbnRyb2xNZXNzYWdlLlNlbmRSZXF1ZXN0SW5pdGlhbFNldHRpbmdzKCk7XHJcblx0XHR0aGlzLnVlQ29udHJvbE1lc3NhZ2UuU2VuZFJlcXVlc3RRdWFsaXR5Q29udHJvbCgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ29ubmVjdCB0byB0aGUgU2lnbmFsaW5nIHNlcnZlclxyXG5cdCAqL1xyXG5cdGNvbm5lY3RUb1NpZ25hbGxpbmdTZXJ2ZXIoKSB7XHJcblx0XHR0aGlzLndlYlNvY2tldENvbnRyb2xsZXIuY29ubmVjdCgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVGhpcyB3aWxsIHN0YXJ0IHRoZSBoYW5kc2hha2UgdG8gdGhlIHNpZ25hbGxpbmcgc2VydmVyXHJcblx0ICogQHBhcmFtIHBlZXJDb25maWcgIC0gUlRDIENvbmZpZ3VyYXRpb24gT3B0aW9ucyBmcm9tIHRoZSBTaWduYWxpbmcgc2VydmVyXHJcblx0ICogQHJlbWFyayBSVEMgUGVlciBDb25uZWN0aW9uIG9uIEljZSBDYW5kaWRhdGUgZXZlbnQgaGF2ZSBpdCBoYW5kbGVkIGJ5IGhhbmRsZSBTZW5kIEljZSBDYW5kaWRhdGVcclxuXHQgKi9cclxuXHRzdGFydFNlc3Npb24ocGVlckNvbmZpZzogUlRDQ29uZmlndXJhdGlvbikge1xyXG5cdFx0Ly8gc2V0IHVwIHVybCBwYXJhbXMgZm9yIFNUVU4sIE1pYyBhbmQgU0ZVXHJcblx0XHR0aGlzLnVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XHJcblxyXG5cdFx0Ly8gY2hlY2sgZm9yIGZvcmNpbmcgdHVyblxyXG5cdFx0aWYgKHRoaXMudXJsUGFyYW1zLmhhcygnRm9yY2VUVVJOJykpIHtcclxuXHRcdFx0Ly8gY2hlY2sgZm9yIGEgdHVybiBzZXJ2ZXJcclxuXHRcdFx0Y29uc3QgaGFzVHVyblNlcnZlciA9IHRoaXMuY2hlY2tUdXJuU2VydmVyQXZhaWxhYmlsaXR5KHBlZXJDb25maWcpO1xyXG5cclxuXHRcdFx0Ly8gY2xvc2UgYW5kIGVycm9yIGlmIHR1cm4gaXMgZm9yY2VkIGFuZCB0aGVyZSBpcyBubyB0dXJuIHNlcnZlclxyXG5cdFx0XHRpZiAoIWhhc1R1cm5TZXJ2ZXIpIHtcclxuXHRcdFx0XHRMb2dnZXIuSW5mbyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIk5vIHR1cm4gc2VydmVyIHdhcyBmb3VuZCBpbiB0aGUgUGVlciBDb25uZWN0aW9uIE9wdGlvbnMuIFRVUk4gY2Fubm90IGJlIGZvcmNlZCwgY2xvc2luZyBjb25uZWN0aW9uLiBQbGVhc2UgdXNlIFNUVU4gaW5zdGVhZFwiKTtcclxuXHRcdFx0XHR0aGlzLnNldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUoXCJUVVJOIGNhbm5vdCBiZSBmb3JjZWQsIGNsb3NpbmcgY29ubmVjdGlvbi4gUGxlYXNlIHVzZSBTVFVOIGluc3RlYWQuXCIpO1xyXG5cdFx0XHRcdHRoaXMuY2xvc2VTaWduYWxpbmdTZXJ2ZXIoKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBzZXQgdXAgdGhlIHBlZXIgY29ubmVjdGlvbiBjb250cm9sbGVyXHJcblx0XHR0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlciA9IG5ldyBQZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIocGVlckNvbmZpZywgdGhpcy51cmxQYXJhbXMuaGFzKCdGb3JjZVRVUk4nKSk7XHJcblxyXG5cdFx0Ly9zZXQgdXAgbWljIGNvbnRyb2xsZXJcclxuXHRcdHRoaXMubWljQ29udHJvbGxlciA9IG5ldyBNaWNDb250cm9sbGVyKHRoaXMudXJsUGFyYW1zKVxyXG5cclxuXHRcdC8vIHNldCB1cCBwZWVyIGNvbm5lY3Rpb24gY29udHJvbGxlciB2aWRlbyBzdGF0c1xyXG5cdFx0dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIub25WaWRlb1N0YXRzID0gKGV2ZW50OiBBZ2dyZWdhdGVkU3RhdHMpID0+IHRoaXMuaGFuZGxlVmlkZW9TdGF0cyhldmVudCk7XHJcblxyXG5cdFx0LyogV2hlbiB0aGUgUGVlciBDb25uZWN0aW9uIFdhbnRzIHRvIHNlbmQgYW4gb2ZmZXIgaGF2ZSBpdCBoYW5kbGVkICovXHJcblx0XHR0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5vblNlbmRXZWJSVENPZmZlciA9IChvZmZlcjogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uSW5pdCkgPT4gdGhpcy5oYW5kbGVTZW5kV2ViUlRDT2ZmZXIob2ZmZXIpO1xyXG5cclxuXHRcdC8qIFdoZW4gdGhlIFBlZXIgY29ubmVjdGlvbiBpY2UgY2FuZGlkYXRlIGlzIGFkZGVkIGhhdmUgaXQgaGFuZGxlZCAqL1xyXG5cdFx0dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIub25QZWVySWNlQ2FuZGlkYXRlID0gKHBlZXJDb25uZWN0aW9uSWNlRXZlbnQ6IFJUQ1BlZXJDb25uZWN0aW9uSWNlRXZlbnQpID0+IHRoaXMuaGFuZGxlU2VuZEljZUNhbmRpZGF0ZShwZWVyQ29ubmVjdGlvbkljZUV2ZW50KTtcclxuXHJcblx0XHQvLyBoYW5kZWwgbWljIGNvbm5lY3Rpb25zIHdpdGggcHJvbWlzZVxyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIuY3JlYXRlRGF0YUNoYW5uZWwodGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIucGVlckNvbm5lY3Rpb24sIFwiY2lycnVzXCIsIHRoaXMuZGF0YWNoYW5uZWxPcHRpb25zKTtcclxuXHJcblx0XHQvLyBzZXQgdXAgd2ViUnRjIHRleHQgb3ZlcmxheXMgXHJcblx0XHR0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5zaG93VGV4dE92ZXJsYXlDb25uZWN0aW5nID0gKCkgPT4gdGhpcy5kZWxlZ2F0ZS5vbldlYlJ0Y0Nvbm5lY3RpbmcoKTtcclxuXHRcdHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLnNob3dUZXh0T3ZlcmxheVNldHVwRmFpbHVyZSA9ICgpID0+IHRoaXMuZGVsZWdhdGUub25XZWJSdGNGYWlsZWQoKTtcclxuXHJcblx0XHQvKiBSVEMgUGVlciBDb25uZWN0aW9uIG9uIFRyYWNrIGV2ZW50IC0+IGhhbmRsZSBvbiB0cmFjayAqL1xyXG5cdFx0dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIub25UcmFjayA9ICh0cmFja0V2ZW50OiBSVENUcmFja0V2ZW50KSA9PiB0aGlzLnN0cmVhbUNvbnRyb2xsZXIuaGFuZGxlT25UcmFjayh0cmFja0V2ZW50KTtcclxuXHJcblx0XHQvKiBTdGFydCB0aGUgSGFuZCBzaGFrZSBwcm9jZXNzIGJ5IGNyZWF0aW5nIGFuIE9mZmVyICovXHJcblx0XHR0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5jcmVhdGVPZmZlcih0aGlzLnNkcENvbnN0cmFpbnRzLCB0aGlzLm1pY0NvbnRyb2xsZXIudXNlTWljKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrcyB0aGUgcGVlciBjb25uZWN0aW9uIG9wdGlvbnMgZm9yIGEgdHVybiBzZXJ2ZXIgYW5kIHJldHVybnMgdHJ1ZSBvciBmYWxzZVxyXG5cdCAqL1xyXG5cdGNoZWNrVHVyblNlcnZlckF2YWlsYWJpbGl0eShvcHRpb25zOiBSVENDb25maWd1cmF0aW9uKSB7XHJcblxyXG5cdFx0Ly8gaWYgaWNlU2VydmVycyBpcyBlbXB0eSByZXR1cm4gZmFsc2UgdGhpcyBzaG91bGQgbm90IGJlIHRoZSBnZW5lcmFsIHVzZSBjYXNlIGJ1dCBpcyBoZXJlIGluY2FzZVxyXG5cdFx0aWYgKCFvcHRpb25zLmljZVNlcnZlcnMpIHtcclxuXHRcdFx0TG9nZ2VyLkluZm8oTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgJ0EgdHVybiBzZXJ2ZXIgd2FzIG5vdCBmb3VuZCcpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gbG9vcCB0aHJvdWdoIHRoZSBpY2Ugc2VydmVycyB0byBjaGVjayBmb3IgYSB0dXJuIHVybFxyXG5cdFx0Zm9yIChjb25zdCBpY2VTZXJ2ZXIgb2Ygb3B0aW9ucy5pY2VTZXJ2ZXJzKSB7XHJcblx0XHRcdGZvciAoY29uc3QgdXJsIG9mIGljZVNlcnZlci51cmxzKSB7XHJcblx0XHRcdFx0aWYgKHVybC5pbmNsdWRlcygndHVybicpKSB7XHJcblx0XHRcdFx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIGBBIHR1cm4gc2VydmVyIHdhcyBmb3VuZCBhdCAke3VybH1gKTtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdExvZ2dlci5JbmZvKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdBIHR1cm4gc2VydmVyIHdhcyBub3QgZm91bmQnKTtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZXMgd2hlbiBhIENvbmZpZyBNZXNzYWdlIGlzIHJlY2VpdmVkIGNvbnRhaW5zIHRoZSBQZWVyIENvbm5lY3Rpb24gT3B0aW9ucyByZXF1aXJlZCAoU1RVTiBhbmQgVFVSTiBTZXJ2ZXIgSW5mbylcclxuXHQgKiBAcGFyYW0gbWVzc2FnZUNvbmZpZyAtIENvbmZpZyBNZXNzYWdlIHJlY2VpdmVkIGZyb20gdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuXHQgKi9cclxuXHRoYW5kbGVPbkNvbmZpZ01lc3NhZ2UobWVzc2FnZUNvbmZpZzogTWVzc2FnZUNvbmZpZykge1xyXG5cclxuXHRcdC8vIFRlbGwgdGhlIFdlYlJ0Y0NvbnRyb2xsZXIgdG8gc3RhcnQgYSBzZXNzaW9uIHdpdGggdGhlIHBlZXIgb3B0aW9ucyBzZW50IGZyb20gdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuXHRcdHRoaXMuc3RhcnRTZXNzaW9uKG1lc3NhZ2VDb25maWcucGVlckNvbm5lY3Rpb25PcHRpb25zKTtcclxuXHJcblx0XHQvLyBXaGVuIHRoZSBzaWduYWxpbmcgc2VydmVyIHNlbmRzIGEgV2ViUlRDIEFuc3dlciBvdmVyIHRoZSB3ZWJzb2NrZXQgY29ubmVjdGlvbiBoYXZlIHRoZSBXZWJSdGNDb250cm9sbGVyIGhhbmRsZSB0aGUgbWVzc2FnZVxyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLm9uV2ViUnRjQW5zd2VyID0gKG1lc3NhZ2VBbnN3ZXI6IE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VBbnN3ZXIpID0+IHRoaXMuaGFuZGxlV2ViUnRjQW5zd2VyKG1lc3NhZ2VBbnN3ZXIpO1xyXG5cclxuXHRcdC8vIFdoZW4gdGhlIHNpZ25hbGluZyBzZXJ2ZXIgc2VuZHMgYSBJY2VDYW5kaWRhdGUgb3ZlciB0aGUgd2Vic29ja2V0IGNvbm5lY3Rpb24gaGF2ZSB0aGUgV2ViUnRjQ29udHJvbGxlciBoYW5kbGUgdGhlIG1lc3NhZ2VcclxuXHRcdHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5vbkljZUNhbmRpZGF0ZSA9IChpY2VDYW5kaWRhdGU6IFJUQ0ljZUNhbmRpZGF0ZUluaXQpID0+IHRoaXMuaGFuZGxlSWNlQ2FuZGlkYXRlKGljZUNhbmRpZGF0ZSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGUgdGhlIFJUQyBBbnN3ZXIgZnJvbSB0aGUgc2lnbmFsaW5nIHNlcnZlclxyXG5cdCAqIEBwYXJhbSBBbnN3ZXIgLSBBbnN3ZXIgTWVzc2FnZSBmcm9tIHRoZSBTaWduYWxpbmcgc2VydmVyXHJcblx0ICovXHJcblx0aGFuZGxlV2ViUnRjQW5zd2VyKEFuc3dlcjogTWVzc2FnZUFuc3dlcikge1xyXG5cdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlRoZXJlIGlzIGFuIGFuc3dlclwiLCA2KTtcclxuXHJcblx0XHRsZXQgc2RwQW5zd2VyOiBSVENTZXNzaW9uRGVzY3JpcHRpb25Jbml0ID0ge1xyXG5cdFx0XHRzZHA6IEFuc3dlci5zZHAsXHJcblx0XHRcdHR5cGU6IFwiYW5zd2VyXCJcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5oYW5kbGVBbnN3ZXIoc2RwQW5zd2VyKTtcclxuXHJcblx0XHQvLyBzdGFydCB0aGUgYWZrIHdhcm5pbmcgdGltZXIgYXMgdGhlIGNvbnRhaW5lciBpcyBub3cgcnVubmluZ1xyXG5cdFx0dGhpcy5hZmtMb2dpYy5zdGFydEFma1dhcm5pbmdUaW1lcigpO1xyXG5cclxuXHRcdC8vIHNob3cgdGhlIG92ZXJsYXkgdGhhdCB3ZSBoYXZlIGFuIGFuc3dlclxyXG5cdFx0dGhpcy5kZWxlZ2F0ZS5vbldlYlJ0Y0Fuc3dlcigpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogV2hlbiBhbiBpY2UgQ2FuZGlkYXRlIGlzIHJlY2VpdmVkIGZyb20gdGhlIFNpZ25hbGluZyBzZXJ2ZXIgYWRkIGl0IHRvIHRoZSBQZWVyIENvbm5lY3Rpb24gQ2xpZW50XHJcblx0ICogQHBhcmFtIGljZUNhbmRpZGF0ZSAtIEljZSBDYW5kaWRhdGUgZnJvbSBTZXJ2ZXJcclxuXHQgKi9cclxuXHRoYW5kbGVJY2VDYW5kaWRhdGUoaWNlQ2FuZGlkYXRlOiBSVENJY2VDYW5kaWRhdGVJbml0KSB7XHJcblx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiV2ViIFJUQyBDb250cm9sbGVyOiBvbldlYlJ0Y0ljZVwiLCA2KTtcclxuXHJcblx0XHRsZXQgY2FuZGlkYXRlID0gbmV3IFJUQ0ljZUNhbmRpZGF0ZShpY2VDYW5kaWRhdGUpO1xyXG5cdFx0dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIuaGFuZGxlT25JY2UoY2FuZGlkYXRlKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgdGhlIGljZSBDYW5kaWRhdGUgdG8gdGhlIHNpZ25hbGluZyBzZXJ2ZXIgdmlhIHdlYnNvY2tldFxyXG5cdCAgICogQHBhcmFtIGljZUV2ZW50IC0gUlRDIFBlZXIgQ29ubmVjdGlvbkljZUV2ZW50KSB7XHJcblx0ICovXHJcblx0aGFuZGxlU2VuZEljZUNhbmRpZGF0ZShpY2VFdmVudDogUlRDUGVlckNvbm5lY3Rpb25JY2VFdmVudCkge1xyXG5cdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIk9uSWNlQ2FuZGlkYXRlXCIsIDYpO1xyXG5cdFx0aWYgKGljZUV2ZW50LmNhbmRpZGF0ZSAmJiBpY2VFdmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlKSB7XHJcblx0XHRcdHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5zZW5kSWNlQ2FuZGlkYXRlKGljZUV2ZW50LmNhbmRpZGF0ZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kIHRoZSBSVEMgT2ZmZXIgU2Vzc2lvbiB0byB0aGUgU2lnbmFsaW5nIHNlcnZlciB2aWEgd2Vic29ja2V0XHJcblx0ICogQHBhcmFtIG9mZmVyIC0gUlRDIFNlc3Npb24gRGVzY3JpcHRpb25cclxuXHQgKi9cclxuXHRoYW5kbGVTZW5kV2ViUlRDT2ZmZXIob2ZmZXI6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbkluaXQpIHtcclxuXHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJTZW5kaW5nIHRoZSBvZmZlciB0byB0aGUgU2VydmVyXCIsIDYpO1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLnNlbmRXZWJSdGNPZmZlcihvZmZlcik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiByZWdpc3RlcnMgdGhlIG1vdXNlIGZvciB1c2UgaW4gSVdlYlJ0Y1BsYXllckNvbnRyb2xsZXJcclxuXHQgKi9cclxuXHRhY3RpdmF0ZVJlZ2lzdGVyTW91c2UoKSB7XHJcblx0XHR0aGlzLmlucHV0Q29udHJvbGxlci5yZWdpc3Rlck1vdXNlKHRoaXMuY29uZmlnLmNvbnRyb2xTY2hlbWUpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0cyB1cCB0aGUgRGF0YSBjaGFubmVsIEtleWJvYXJkLCBNb3VzZSwgVUUgQ29udHJvbCBNZXNzYWdlLCBVRSBEZXNjcmlwdG9yXHJcblx0ICovXHJcblx0aGFuZGxlRGF0YUNoYW5uZWxDb25uZWN0ZWQoKSB7XHJcblx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiRGF0YSBDaGFubmVsIGlzIG9wZW5cIiwgNik7XHJcblxyXG5cdFx0Ly8gc2hvdyB0aGUgY29ubmVjdGVkIG92ZXJsYXkgXHJcblx0XHR0aGlzLmRlbGVnYXRlLm9uV2ViUnRjQ29ubmVjdGVkKCk7XHJcblxyXG5cdFx0dGhpcy5pbnB1dENvbnRyb2xsZXIgPSBuZXcgSW5wdXRDb250cm9sbGVyKHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyLCB0aGlzLnZpZGVvUGxheWVyKTtcclxuXHJcblx0XHR0aGlzLnVlQ29udHJvbE1lc3NhZ2UgPSBuZXcgVWVDb250cm9sTWVzc2FnZSh0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlcik7XHJcblx0XHR0aGlzLnVlRGVzY3JpcHRvclVpID0gbmV3IFVlRGVzY3JpcHRvclVpKHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyKTtcclxuXHJcblx0XHR0aGlzLmFjdGl2YXRlUmVnaXN0ZXJNb3VzZSgpXHJcblx0XHR0aGlzLmlucHV0Q29udHJvbGxlci5yZWdpc3RlcktleUJvYXJkKHRoaXMuY29uZmlnLnN1cHByZXNzQnJvd3NlcktleXMpO1xyXG5cdFx0dGhpcy5pbnB1dENvbnRyb2xsZXIucmVnaXN0ZXJHYW1lUGFkKCk7XHJcblxyXG5cdFx0dGhpcy52aWRlb1BsYXllci5zZXRNb3VzZUVudGVyQW5kTGVhdmVFdmVudHMoKCkgPT4gdGhpcy5pbnB1dENvbnRyb2xsZXIubW91c2VDb250cm9sbGVyLnNlbmRNb3VzZUVudGVyKCksICgpID0+IHRoaXMuaW5wdXRDb250cm9sbGVyLm1vdXNlQ29udHJvbGxlci5zZW5kTW91c2VMZWF2ZSgpKTtcclxuXHJcblx0XHR0aGlzLnJlc2l6ZVBsYXllclN0eWxlKCk7XHJcblxyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIucHJvY2Vzc0ZyZWV6ZUZyYW1lTWVzc2FnZSA9ICh2aWV3KSA9PiB0aGlzLmZyZWV6ZUZyYW1lQ29udHJvbGxlci5wcm9jZXNzRnJlZXplRnJhbWVNZXNzYWdlKHZpZXcsICgpID0+IHRoaXMubG9hZEZyZWV6ZUZyYW1lT3JTaG93UGxheU92ZXJsYXkoKSk7XHJcblx0XHR0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlci5vblVuRnJlZXplRnJhbWUgPSAoKSA9PiB0aGlzLkludmFsaWRhdGVGcmVlemVGcmFtZUFuZEVuYWJsZVZpZGVvKCk7XHJcblxyXG5cdFx0c2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5nZXRTdGF0cygpLCAxMDAwKTtcclxuXHJcblx0XHQvLyBlaXRoZXIgYXV0b3BsYXkgdGhlIHZpZGVvIG9yIHNldCB1cCB0aGUgcGxheSBvdmVybGF5XHJcblx0XHR0aGlzLmF1dG9QbGF5VmlkZW9PclNldFVwUGxheU92ZXJsYXkoKTtcclxuXHJcblx0XHR0aGlzLnJlc2l6ZVBsYXllclN0eWxlKCk7XHJcblxyXG5cdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kVXBkYXRlVmlkZW9TdHJlYW1TaXplKHRoaXMudmlkZW9QbGF5ZXIudmlkZW9FbGVtZW50LmNsaWVudFdpZHRoLCB0aGlzLnZpZGVvUGxheWVyLnZpZGVvRWxlbWVudC5jbGllbnRIZWlnaHQpO1xyXG5cclxuXHRcdHRoaXMuZGVsZWdhdGUub25WaWRlb0luaXRpYWxpc2VkKCk7XHJcblxyXG5cdFx0dGhpcy51aUNvbnRyb2xsZXIudXBkYXRlVmlkZW9TdHJlYW1TaXplID0gKCkgPT4gdGhpcy51cGRhdGVWaWRlb1N0cmVhbVNpemUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZXMgd2hlbiB0aGUgd2ViIHNvY2tldCByZWNlaXZlcyBhbiBhdXRoZW50aWNhdGlvbiByZXNwb25zZVxyXG5cdCAqIEBwYXJhbSBhdXRoUmVzcG9uc2UgLSBBdXRoZW50aWNhdGlvbiBSZXNwb25zZVxyXG5cdCAqL1xyXG5cdGhhbmRsZUF1dGhlbnRpY2F0aW9uUmVzcG9uc2UoYXV0aFJlc3BvbnNlOiBNZXNzYWdlQXV0aFJlc3BvbnNlKSB7XHJcblx0XHR0aGlzLmRlbGVnYXRlLm9uQXV0aGVudGljYXRpb25SZXNwb25zZShhdXRoUmVzcG9uc2UpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB3aGVuIHRoZSBzdHJlYW0gc2l6ZSBjaGFuZ2VzXHJcblx0ICovXHJcblx0dXBkYXRlVmlkZW9TdHJlYW1TaXplKCkge1xyXG5cdFx0Ly8gQ2FsbCB0aGUgc2V0dGVyIGJlZm9yZSBjYWxsaW5nIHRoaXMgZnVuY3Rpb25cclxuXHRcdGlmICghdGhpcy5tYXRjaFZpZXdwb3J0UmVzb2x1dGlvbikge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0aWYgKG5vdyAtIHRoaXMubGFzdFRpbWVSZXNpemVkID4gMTAwMCkge1xyXG5cdFx0XHQvLyBnZXQgdGhlIHJvb3QgZGl2IGZyb20gY29uZmlnIFxyXG5cdFx0XHRpZiAoIXRoaXMuY29uZmlnLnBsYXllckVsZW1lbnQpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kVXBkYXRlVmlkZW9TdHJlYW1TaXplKHRoaXMudmlkZW9QbGF5ZXIudmlkZW9FbGVtZW50LmNsaWVudFdpZHRoLCB0aGlzLnZpZGVvUGxheWVyLnZpZGVvRWxlbWVudC5jbGllbnRIZWlnaHQpXHJcblx0XHRcdHRoaXMubGFzdFRpbWVSZXNpemVkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCAnUmVzaXppbmcgdG9vIG9mdGVuIC0gc2tpcHBpbmcnLCA2KTtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZW91dCk7XHJcblx0XHRcdHRoaXMucmVzaXplVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy51cGRhdGVWaWRlb1N0cmVhbVNpemUsIDEwMDApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB3aGVuIHRoZSBJbnN0YW5jZSBTdGF0ZSBDaGFuZ2VzXHJcblx0ICogQHBhcmFtIGluc3RhbmNlU3RhdGUgIC0gSW5zdGFuY2UgU3RhdGUgXHJcblx0ICovXHJcblx0aGFuZGxlSW5zdGFuY2VTdGF0ZUNoYW5nZShpbnN0YW5jZVN0YXRlOiBNZXNzYWdlSW5zdGFuY2VTdGF0ZSkge1xyXG5cdFx0dGhpcy5kZWxlZ2F0ZS5vbkluc3RhbmNlU3RhdGVDaGFuZ2UoaW5zdGFuY2VTdGF0ZSlcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCB0aGUgZnJlZXplIGZyYW1lIG92ZXJsYXkgdG8gdGhlIHBsYXllciBkaXZcclxuXHQgKiBAcGFyYW0gcGxheWVyRWxlbWVudCAtIFRoZSBkaXYgZWxlbWVudCBvZiB0aGUgUGxheWVyXHJcblx0ICovXHJcblx0c2V0VXBNb3VzZUFuZEZyZWV6ZUZyYW1lKHBsYXllckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0XHQvLyBDYWxjdWxhdGluZyBhbmQgbm9ybWFsaXppbmcgcG9zaXRpb25zIGRlcGVuZHMgb24gdGhlIHdpZHRoIGFuZCBoZWlnaHQgb2YgdGhlIHBsYXllci5cclxuXHRcdHRoaXMucGxheWVyRWxlbWVudENsaWVudFJlY3QgPSBwbGF5ZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cdFx0dGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuZnJlZXplRnJhbWUucmVzaXplKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDbG9zZSB0aGUgQ29ubmVjdGlvbiB0byB0aGUgc2lnbmFsaW5nIHNlcnZlclxyXG5cdCAqL1xyXG5cdGNsb3NlU2lnbmFsaW5nU2VydmVyKCkge1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLmNsb3NlKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGaXJlcyBhIFZpZGVvIFN0YXRzIEV2ZW50IGluIHRoZSBSVEMgUGVlciBDb25uZWN0aW9uIFxyXG5cdCAqL1xyXG5cdGdldFN0YXRzKCkge1xyXG5cdFx0dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIuZ2VuZXJhdGVTdGF0cygpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZCBhIExhdGVuY3kgVGVzdCBSZXF1ZXN0IHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqL1xyXG5cdHNlbmRMYXRlbmN5VGVzdCgpIHtcclxuXHRcdHRoaXMubGF0ZW5jeVN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcblx0XHR0aGlzLnVlQ29udHJvbE1lc3NhZ2Uuc2VuZExhdGVuY3lUZXN0KHRoaXMubGF0ZW5jeVN0YXJ0VGltZSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kIHRoZSBFbmNvZGVyIFNldHRpbmdzIHRvIHRoZSBVRSBJbnN0YW5jZSBhcyBhIFVFIFVJIERlc2NyaXB0b3IuXHJcblx0ICogQHBhcmFtIGVuY29kZXIgLSBFbmNvZGVyIFNldHRpbmdzXHJcblx0ICovXHJcblx0c2VuZEVuY29kZXJTZXR0aW5ncyhlbmNvZGVyOiBFbmNvZGVyKSB7XHJcblx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiLS0tLSAgIEVuY29kZXIgU2V0dGluZ3MgICAgLS0tLVxcblwiICsgSlNPTi5zdHJpbmdpZnkoZW5jb2RlciwgdW5kZWZpbmVkLCA0KSArIFwiXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLCA2KTtcclxuXHJcblx0XHRpZiAoZW5jb2Rlci5SYXRlQ29udHJvbCAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZEVuY29kZXJSYXRlQ29udHJvbChlbmNvZGVyLlJhdGVDb250cm9sKTtcclxuXHRcdH1cclxuXHRcdGlmIChlbmNvZGVyLlRhcmdldEJpdHJhdGUgIT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLnVlRGVzY3JpcHRvclVpLnNlbmRFbmNvZGVyVGFyZ2V0Qml0UmF0ZShlbmNvZGVyLlRhcmdldEJpdHJhdGUpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGVuY29kZXIuTWF4Qml0cmF0ZSAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZEVuY29kZXJNYXhCaXRyYXRlVmJyKGVuY29kZXIuTWF4Qml0cmF0ZSk7XHJcblx0XHR9XHJcblx0XHRpZiAoZW5jb2Rlci5NaW5RUCAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZEVuY29kZXJNaW5RUChlbmNvZGVyLk1pblFQKTtcclxuXHRcdH1cclxuXHRcdGlmIChlbmNvZGVyLk1heFFQICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kRW5jb2Rlck1heFFQKGVuY29kZXIuTWF4UVApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGVuY29kZXIuRmlsbGVyRGF0YSAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZEVuY29kZXJFbmFibGVGaWxsZXJEYXRhKGVuY29kZXIuRmlsbGVyRGF0YSk7XHJcblx0XHR9XHJcblx0XHRpZiAoZW5jb2Rlci5NdWx0aVBhc3MgIT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLnVlRGVzY3JpcHRvclVpLnNlbmRFbmNvZGVyTXVsdGlQYXNzKGVuY29kZXIuTXVsdGlQYXNzKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgdGhlIFdlYlJUQyBTZXR0aW5ncyB0byB0aGUgVUUgSW5zdGFuY2UgYXMgYSBVRSBVSSBEZXNjcmlwdG9yLlxyXG5cdCAqIEBwYXJhbSB3ZWJSVEMgLSBXZWIgUlRDIFNldHRpbmdzIFxyXG5cdCAqL1xyXG5cdHNlbmRXZWJSdGNTZXR0aW5ncyh3ZWJSVEM6IFdlYlJUQykge1xyXG5cdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIi0tLS0gICBXZWJSVEMgU2V0dGluZ3MgICAgLS0tLVxcblwiICsgSlNPTi5zdHJpbmdpZnkod2ViUlRDLCB1bmRlZmluZWQsIDQpICsgXCJcXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsIDYpO1xyXG5cclxuXHRcdGlmICh3ZWJSVEMuRGVncmFkYXRpb25QcmVmICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kV2ViUnRjRGVncmFkYXRpb25QcmVmZXJlbmNlKHdlYlJUQy5EZWdyYWRhdGlvblByZWYpXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHdlYlJUQy5GUFMgIT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLnVlRGVzY3JpcHRvclVpLnNlbmRXZWJSdGNGcHMod2ViUlRDLkZQUyk7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZFdlYlJ0Y01heEZwcyh3ZWJSVEMuRlBTKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAod2ViUlRDLk1pbkJpdHJhdGUgIT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLnVlRGVzY3JpcHRvclVpLnNlbmRXZWJSdGNNaW5CaXRyYXRlKHdlYlJUQy5NaW5CaXRyYXRlKTtcclxuXHRcdH1cclxuXHRcdGlmICh3ZWJSVEMuTWF4Qml0cmF0ZSAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZFdlYlJ0Y01heEJpdHJhdGUod2ViUlRDLk1heEJpdHJhdGUpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHdlYlJUQy5Mb3dRUCAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZFdlYlJ0Y0xvd1FwVGhyZXNob2xkKHdlYlJUQy5Mb3dRUCk7XHJcblx0XHR9XHJcblx0XHRpZiAod2ViUlRDLkhpZ2hRUCAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZFdlYlJ0Y0hpZ2hRcFRocmVzaG9sZCh3ZWJSVEMuSGlnaFFQKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgQWdncmVnYXRlZCBTdGF0cyB0byB0aGUgU2lnbmFsaW5nIFNlcnZlclxyXG5cdCAqIEBwYXJhbSBzdGF0cyAtIEFnZ3JlZ2F0ZWQgU3RhdHNcclxuXHQgKi9cclxuXHRzZW5kU3RhdHNUb1NpZ25hbGxpbmdTZXJ2ZXIoc3RhdHM6IEFnZ3JlZ2F0ZWRTdGF0cykge1xyXG5cdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIi0tLS0gICBTZW5kaW5nIEFnZ3JlZ2F0ZWQgU3RhdHMgdG8gU2lnbmFsaW5nIFNlcnZlciAgIC0tLS1cXG5cIiArIEpTT04uc3RyaW5naWZ5KHN0YXRzLCB1bmRlZmluZWQsIDQpICsgXCJcXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLCA2KTtcclxuXHRcdHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5zZW5kU3RhdHMoc3RhdHMpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZHMgYSBVSSBJbnRlcmFjdGlvbiBEZXNjcmlwdG9yIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqIEBwYXJhbSBtZXNzYWdlIC0gU3RyaW5nIHRvIHNlbmQgdG8gdGhlIFVFIEluc3RhbmNlXHJcblx0ICovXHJcblx0c2VuZFVlVWlEZXNjcmlwdG9yKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIi0tLS0gICBVRSBVSSBJbnRlcmFjdGlvbiBTdHJpbmcgICAtLS0tXFxuXCIgKyBKU09OLnN0cmluZ2lmeShtZXNzYWdlLCB1bmRlZmluZWQsIDQpICsgXCJcXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiwgNik7XHJcblx0XHR0aGlzLnVlRGVzY3JpcHRvclVpLnNlbmRVaUludGVyYWN0aW9uKG1lc3NhZ2UpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZHMgdGhlIFVJIERlc2NyaXB0b3IgYHN0YXQgZnBzYCB0byB0aGUgVUUgSW5zdGFuY2UgXHJcblx0ICovXHJcblx0c2VuZFNob3dGcHMoKTogdm9pZCB7XHJcblx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiLS0tLSAgIFNlbmRpbmcgc2hvdyBzdGF0IHRvIFVFICAgLS0tLVwiLCA2KTtcclxuXHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZFNob3dGcHMoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmRzIGEgcmVxdWVzdCB0byB0aGUgVUUgSW5zdGFuY2UgdG8gaGF2ZSBvd25lcnNoaXAgb2YgUXVhbGl0eVxyXG5cdCAqL1xyXG5cdHNlbmRSZXF1ZXN0UXVhbGl0eUNvbnRyb2xPd25lcnNoaXAoKTogdm9pZCB7XHJcblx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiLS0tLSAgIFNlbmRpbmcgUmVxdWVzdCB0byBDb250cm9sIFF1YWxpdHkgIC0tLS1cIiwgNik7XHJcblx0XHR0aGlzLnVlQ29udHJvbE1lc3NhZ2UuU2VuZFJlcXVlc3RRdWFsaXR5Q29udHJvbCgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB3aGVuIGEgTGF0ZW5jeSBUZXN0IFJlc3VsdCBhcmUgcmVjZWl2ZWQgZnJvbSB0aGUgVUUgSW5zdGFuY2VcclxuXHQgKiBAcGFyYW0gbGF0ZW5jeVRpbWluZ3MgLSBMYXRlbmN5IFRlc3QgVGltaW5nc1xyXG5cdCAqL1xyXG5cdGhhbmRsZUxhdGVuY3lUZXN0UmVzdWx0KGxhdGVuY3lUaW1pbmdzOiBMYXRlbmN5VGVzdFJlc3VsdHMpIHtcclxuXHRcdGxhdGVuY3lUaW1pbmdzLnRlc3RTdGFydFRpbWVNcyA9IHRoaXMubGF0ZW5jeVN0YXJ0VGltZTtcclxuXHRcdGxhdGVuY3lUaW1pbmdzLmJyb3dzZXJSZWNlaXB0VGltZU1zID0gRGF0ZS5ub3coKTtcclxuXHJcblx0XHRsYXRlbmN5VGltaW5ncy5sYXRlbmN5RXhjbHVkaW5nRGVjb2RlID0gfn4obGF0ZW5jeVRpbWluZ3MuYnJvd3NlclJlY2VpcHRUaW1lTXMgLSBsYXRlbmN5VGltaW5ncy50ZXN0U3RhcnRUaW1lTXMpO1xyXG5cdFx0bGF0ZW5jeVRpbWluZ3MudGVzdER1cmF0aW9uID0gfn4obGF0ZW5jeVRpbWluZ3MuVHJhbnNtaXNzaW9uVGltZU1zIC0gbGF0ZW5jeVRpbWluZ3MuUmVjZWlwdFRpbWVNcyk7XHJcblx0XHRsYXRlbmN5VGltaW5ncy5uZXR3b3JrTGF0ZW5jeSA9IH5+KGxhdGVuY3lUaW1pbmdzLmxhdGVuY3lFeGNsdWRpbmdEZWNvZGUgLSBsYXRlbmN5VGltaW5ncy50ZXN0RHVyYXRpb24pO1xyXG5cclxuXHRcdGlmIChsYXRlbmN5VGltaW5ncy5mcmFtZURpc3BsYXlEZWx0YVRpbWVNcyAmJiBsYXRlbmN5VGltaW5ncy5icm93c2VyUmVjZWlwdFRpbWVNcykge1xyXG5cdFx0XHRsYXRlbmN5VGltaW5ncy5lbmRUb0VuZExhdGVuY3kgPSB+fihsYXRlbmN5VGltaW5ncy5mcmFtZURpc3BsYXlEZWx0YVRpbWVNcyArIGxhdGVuY3lUaW1pbmdzLm5ldHdvcmtMYXRlbmN5LCArIGxhdGVuY3lUaW1pbmdzLkNhcHR1cmVUb1NlbmRNcyk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmRlbGVnYXRlLm9uTGF0ZW5jeVRlc3RSZXN1bHQobGF0ZW5jeVRpbWluZ3MpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB3aGVuIHRoZSBFbmNvZGVyIGFuZCBXZWIgUlRDIFNldHRpbmdzIGFyZSByZWNlaXZlZCBmcm9tIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqIEBwYXJhbSBzZXR0aW5ncyAtIEluaXRpYWwgRW5jb2RlciBhbmQgV2ViIFJUQyBTZXR0aW5nc1xyXG5cdCAqL1xyXG5cdGhhbmRsZUluaXRpYWxTZXR0aW5ncyhzZXR0aW5nczogSW5pdGlhbFNldHRpbmdzKSB7XHJcblx0XHR0aGlzLmRlbGVnYXRlLm9uSW5pdGlhbFNldHRpbmdzKHNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZXMgd2hlbiB0aGUgUXVhbnRpemF0aW9uIFBhcmFtZXRlciBhcmUgcmVjZWl2ZWQgZnJvbSB0aGUgVUUgSW5zdGFuY2VcclxuXHQgKiBAcGFyYW0gQXZnUVAgLSBFbmNvZGVycyBRdWFudGl6YXRpb24gUGFyYW1ldGVyXHJcblx0ICovXHJcblx0aGFuZGxlVmlkZW9FbmNvZGVyQXZnUVAoQXZnUVA6IG51bWJlcikge1xyXG5cdFx0dGhpcy5kZWxlZ2F0ZS5vblZpZGVvRW5jb2RlckF2Z1FQKEF2Z1FQKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZsYWcgc2V0IGlmIHRoZSB1c2VyIGhhcyBRdWFsaXR5IE93bmVyc2hpcFxyXG5cdCAqIEBwYXJhbSBoYXNRdWFsaXR5T3duZXJzaGlwIC0gRG9lcyB0aGUgY3VycmVudCBjbGllbnQgaGF2ZSBRdWFsaXR5IE93bmVyc2hpcFxyXG5cdCAqL1xyXG5cdGhhbmRsZVF1YWxpdHlDb250cm9sT3duZXJzaGlwKGhhc1F1YWxpdHlPd25lcnNoaXA6IGJvb2xlYW4pIHtcclxuXHRcdHRoaXMuZGVsZWdhdGUub25RdWFsaXR5Q29udHJvbE93bmVyc2hpcChoYXNRdWFsaXR5T3duZXJzaGlwKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZXMgd2hlbiB0aGUgQWdncmVnYXRlZCBzdGF0cyBhcmUgQ29sbGVjdGVkXHJcblx0ICogQHBhcmFtIHN0YXRzIC0gQWdncmVnYXRlZCBTdGF0c1xyXG5cdCAqL1xyXG5cdGhhbmRsZVZpZGVvU3RhdHMoc3RhdHM6IEFnZ3JlZ2F0ZWRTdGF0cykge1xyXG5cdFx0dGhpcy5kZWxlZ2F0ZS5vblZpZGVvU3RhdHMoc3RhdHMpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0KiBUbyBSZXNpemUgdGhlIFZpZGVvIFBsYXllciBlbGVtZW50XHJcblx0Ki9cclxuXHRyZXNpemVQbGF5ZXJTdHlsZSgpOiB2b2lkIHtcclxuXHRcdHRoaXMudWlDb250cm9sbGVyLnJlc2l6ZVBsYXllclN0eWxlKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgdGhlIG92ZXJyaWRkZW4gZGlzY29ubmVjdCBtZXNzYWdlXHJcblx0ICovXHJcblx0Z2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZSgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMuZGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCB0aGUgb3ZlcnJpZGUgZm9yIHRoZSBkaXNjb25uZWN0IG1lc3NhZ2VcclxuXHQgKi9cclxuXHRzZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0dGhpcy5kaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlID0gbWVzc2FnZTtcclxuXHR9XHJcbn0iLCIvKipcclxuICogVGhlIFR5cGVzIG9mIE1lc3NhZ2VzIHRoYXQgd2lsbCBiZSByZWNlaXZlZFxyXG4gKi9cclxuZXhwb3J0IGVudW0gTWVzc2FnZVJlY3ZUeXBlcyB7XHJcbiAgICBBVVRIRU5USUNBVElPTl9SRVFVSVJFRCA9IFwiYXV0aGVudGljYXRpb25SZXF1aXJlZFwiLFxyXG4gICAgQVVUSEVOVElDQVRJT05fUkVTUE9OU0UgPSBcImF1dGhlbnRpY2F0aW9uUmVzcG9uc2VcIixcclxuICAgIElOU1RBTkNFX1NUQVRFID0gXCJpbnN0YW5jZVN0YXRlXCIsXHJcbiAgICBDT05GSUcgPSBcImNvbmZpZ1wiLFxyXG4gICAgUExBWUVSX0NPVU5UID0gXCJwbGF5ZXJDb3VudFwiLFxyXG4gICAgQU5TV0VSID0gXCJhbnN3ZXJcIixcclxuICAgIElDRV9DQU5ESURBVEUgPSBcImljZUNhbmRpZGF0ZVwiLFxyXG4gICAgUElORyA9IFwicGluZ1wiXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUeXBlcyBvZiBBdXRoZW50aWNhdGlvbiByZXBvc2VzIFxyXG4gKi9cclxuZXhwb3J0IGVudW0gTWVzc2FnZUF1dGhSZXNwb25zZU91dGNvbWVUeXBlIHtcclxuICAgIFJFRElSRUNUID0gXCJSRURJUkVDVFwiLFxyXG4gICAgSU5WQUxJRF9UT0tFTiA9IFwiSU5WQUxJRF9UT0tFTlwiLFxyXG4gICAgQVVUSEVOVElDQVRFRCA9IFwiQVVUSEVOVElDQVRFRFwiLFxyXG4gICAgRVJST1IgPSBcIkVSUk9SXCJcclxufVxyXG5cclxuLyoqXHJcbiAqIFN0YXRlcyBvZiB0aGUgVUUgSW5zdGFuY2VcclxuICovXHJcbmV4cG9ydCBlbnVtIEluc3RhbmNlU3RhdGUge1xyXG4gICAgVU5BTExPQ0FURUQgPSBcIlVOQUxMT0NBVEVEXCIsXHJcbiAgICBQRU5ESU5HID0gXCJQRU5ESU5HXCIsXHJcbiAgICBGQUlMRUQgPSBcIkZBSUxFRFwiLFxyXG4gICAgUkVBRFkgPSBcIlJFQURZXCJcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbmNyZXRlIFJlY2VpdmVkIE1lc3NhZ2Ugd3JhcHBlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VSZWN2IHtcclxuICAgIHR5cGU6IHN0cmluZztcclxuICAgIGlkOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGlvbiBSZXF1aXJlZCBNZXNzYWdlIHdyYXBwZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlQXV0aFJlcXVpcmVkIGV4dGVuZHMgTWVzc2FnZVJlY3YgeyB9XHJcblxyXG4vKipcclxuICogQXV0aGVudGljYXRpb24gUmVzcG9uc2UgTWVzc2FnZSB3cmFwcGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUF1dGhSZXNwb25zZSBleHRlbmRzIE1lc3NhZ2VSZWN2IHtcclxuICAgIG91dGNvbWU6IE1lc3NhZ2VBdXRoUmVzcG9uc2VPdXRjb21lVHlwZTtcclxuICAgIHJlZGlyZWN0OiBzdHJpbmc7XHJcbiAgICBlcnJvcjogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogSW5zdGFuY2UgU3RhdGUgTWVzc2FnZSB3cmFwcGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUluc3RhbmNlU3RhdGUgZXh0ZW5kcyBNZXNzYWdlUmVjdiB7XHJcbiAgICBzdGF0ZTogSW5zdGFuY2VTdGF0ZTtcclxuICAgIGRldGFpbHM6IHN0cmluZztcclxuICAgIHByb2dyZXNzOiBudW1iZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25maWcgTWVzc2FnZSBXcmFwcGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUNvbmZpZyBleHRlbmRzIE1lc3NhZ2VSZWN2IHtcclxuICAgIHBlZXJDb25uZWN0aW9uT3B0aW9uczogUlRDQ29uZmlndXJhdGlvbjsgXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQbGF5ZXIgQ291bnQgTWVzc2FnZSB3cmFwcGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZVBsYXllckNvdW50IGV4dGVuZHMgTWVzc2FnZVJlY3Yge1xyXG4gICAgY291bnQ6IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFdlYiBSVEMgb2ZmZXIgQW5zd2VyIE1lc3NhZ2Ugd3JhcHBlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VBbnN3ZXIgZXh0ZW5kcyBNZXNzYWdlUmVjdiB7XHJcbiAgICBzZHA6IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIEljZSBDYW5kaWRhdGUgTWVzc2FnZSB3cmFwcGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUljZUNhbmRpZGF0ZSBleHRlbmRzIE1lc3NhZ2VSZWN2IHtcclxuICAgIGNhbmRpZGF0ZTogUlRDSWNlQ2FuZGlkYXRlSW5pdDtcclxufSIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IEFnZ3JlZ2F0ZWRTdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvQWdncmVnYXRlZFN0YXRzXCI7XHJcbmltcG9ydCB7IENhbmRpZGF0ZVBhaXJTdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvQ2FuZGlkYXRlUGFpclN0YXRzXCI7XHJcbmltcG9ydCB7IENhbmRpZGF0ZVN0YXQgfSBmcm9tIFwiLi4vUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL0NhbmRpZGF0ZVN0YXRcIjtcclxuaW1wb3J0IHsgZGF0YUNoYW5uZWxTdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvRGF0YUNoYW5uZWxTdGF0c1wiO1xyXG5pbXBvcnQgeyBpbmJvdW5kQXVkaW9TdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvSW5ib3VuZEF1ZGlvU3RhdHNcIjtcclxuaW1wb3J0IHsgaW5ib3VuZFZpZGVvU3RhdHMgfSBmcm9tIFwiLi4vUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL0luYm91bmRWaWRlb1N0YXRzXCI7XHJcbmltcG9ydCB7IE91dEJvdW5kVmlkZW9TdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvT3V0Qm91bmRWaWRlb1N0YXRzXCI7XHJcblxyXG4vKipcclxuICogVGhlIFNlbmQgVHlwZXMgdGhhdCBhcmUgcHVzaGVkIGZyb20gdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuICovXHJcbmV4cG9ydCBlbnVtIE1lc3NhZ2VTZW5kVHlwZXMge1xyXG4gICAgSUNFX0NBTkRJREFURSA9IFwiaWNlQ2FuZGlkYXRlXCIsXHJcbiAgICBTVEFUUyA9IFwic3RhdHNcIixcclxuICAgIEFVVEhFTlRJQ0FUSU9OX1JFUVVFU1QgPSBcImF1dGhlbnRpY2F0aW9uUmVxdWVzdFwiLFxyXG4gICAgUkVRVUVTVF9JTlNUQU5DRSA9IFwicmVxdWVzdEluc3RhbmNlXCIsXHJcbiAgICBPRkZFUiA9IFwib2ZmZXJcIixcclxuICAgIFBPTkcgPSBcInBvbmdcIlxyXG59XHJcblxyXG4vKipcclxuICogQSBXcmFwcGVyIGZvciB0aGUgbWVzc2FnZSB0byBzZW5kIHRvIHRoZSBzaWduYWxpbmcgc2VydmVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZVNlbmQgaW1wbGVtZW50cyBTZW5kIHtcclxuICAgIHR5cGU6IE1lc3NhZ2VTZW5kVHlwZXM7XHJcbiAgICBwZWVyQ29ubmVjdGlvbk9wdGlvbnM6IE9iamVjdDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFR1cm5zIHRoZSB3cmFwcGVyIGludG8gYSBKU09OIFN0cmluZ1xyXG4gICAgICogQHJldHVybnMgLSBKU09OIFN0cmluZyBvZiB0aGUgTWVzc2FnZSB0byBzZW5kXHJcbiAgICAgKi9cclxuICAgIHBheWxvYWQoKSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlNlbmRpbmcgPT4gXFxuXCIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLCB1bmRlZmluZWQsIDQpLCA2KTtcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2VuZCB7XHJcbiAgICAvKipcclxuICAgICAqIFR1cm5zIHRoZSB3cmFwcGVyIGludG8gYSBKU09OIFN0cmluZ1xyXG4gICAgICogQHJldHVybnMgLSBKU09OIFN0cmluZyBvZiB0aGUgTWVzc2FnZSB0byBzZW5kXHJcbiAgICAgKi9cclxuICAgIHBheWxvYWQ6ICgpID0+IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIEF1dGggUmVxdWVzdCBNZXNzYWdlIFdyYXBwZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlQXV0aFJlcXVlc3QgZXh0ZW5kcyBNZXNzYWdlU2VuZCB7XHJcbiAgICB0b2tlbjogc3RyaW5nO1xyXG4gICAgcHJvdmlkZXI6IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB0b2tlbiAtIFRva2VuIFByb3ZpZGVkIGJ5IHRoZSBBdXRoIFByb3ZpZGVyXHJcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXIgLSBOYW1lIG9mIHRoZSBwcm92aWRlciB0aGF0IGlzIHJlZ2lzdGVyZWQgaW4gdGhlIGF1dGggcGx1Z2luXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHRva2VuOiBzdHJpbmcsIHByb3ZpZGVyOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IE1lc3NhZ2VTZW5kVHlwZXMuQVVUSEVOVElDQVRJT05fUkVRVUVTVDtcclxuICAgICAgICB0aGlzLnRva2VuID0gdG9rZW47XHJcbiAgICAgICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSW5zdGFuY2UgUmVxdWVzdCBNZXNzYWdlIFdyYXBwZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlUG9uZyBleHRlbmRzIE1lc3NhZ2VTZW5kIHtcclxuXHJcbiAgICB0aW1lOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IodGltZTogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBNZXNzYWdlU2VuZFR5cGVzLlBPTkc7XHJcbiAgICAgICAgdGhpcy50aW1lID0gdGltZVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSW5zdGFuY2UgUmVxdWVzdCBNZXNzYWdlIFdyYXBwZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlUmVxdWVzdEluc3RhbmNlIGV4dGVuZHMgTWVzc2FnZVNlbmQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBNZXNzYWdlU2VuZFR5cGVzLlJFUVVFU1RfSU5TVEFOQ0U7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZ2dyZWdhdGVkIFN0YXRzIE1lc3NhZ2UgV3JhcHBlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VTdGF0cyBleHRlbmRzIE1lc3NhZ2VTZW5kIHtcclxuICAgIGluYm91bmRWaWRlb1N0YXRzOiBpbmJvdW5kVmlkZW9TdGF0cztcclxuICAgIGluYm91bmRBdWRpb1N0YXRzOiBpbmJvdW5kQXVkaW9TdGF0cztcclxuICAgIGNhbmRpZGF0ZVBhaXI6IENhbmRpZGF0ZVBhaXJTdGF0c1xyXG4gICAgZGF0YUNoYW5uZWxTdGF0czogZGF0YUNoYW5uZWxTdGF0cztcclxuICAgIGxvY2FsQ2FuZGlkYXRlczogQXJyYXk8Q2FuZGlkYXRlU3RhdD47XHJcbiAgICByZW1vdGVDYW5kaWRhdGVzOiBBcnJheTxDYW5kaWRhdGVTdGF0PjtcclxuICAgIG91dGJvdW5kVmlkZW9TdGF0czogT3V0Qm91bmRWaWRlb1N0YXRzO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGFnZ3JlZ2F0ZWRTdGF0cyAtIEFnZ3JlZ2F0ZWQgU3RhdHMgXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGFnZ3JlZ2F0ZWRTdGF0czogQWdncmVnYXRlZFN0YXRzKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBNZXNzYWdlU2VuZFR5cGVzLlNUQVRTXHJcbiAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cyA9IGFnZ3JlZ2F0ZWRTdGF0cy5pbmJvdW5kVmlkZW9TdGF0cztcclxuICAgICAgICB0aGlzLmluYm91bmRBdWRpb1N0YXRzID0gYWdncmVnYXRlZFN0YXRzLmluYm91bmRBdWRpb1N0YXRzO1xyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlUGFpciA9IGFnZ3JlZ2F0ZWRTdGF0cy5jYW5kaWRhdGVQYWlyO1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxTdGF0cyA9IGFnZ3JlZ2F0ZWRTdGF0cy5kYXRhQ2hhbm5lbFN0YXRzXHJcbiAgICAgICAgdGhpcy5sb2NhbENhbmRpZGF0ZXMgPSBhZ2dyZWdhdGVkU3RhdHMubG9jYWxDYW5kaWRhdGVzO1xyXG4gICAgICAgIHRoaXMucmVtb3RlQ2FuZGlkYXRlcyA9IGFnZ3JlZ2F0ZWRTdGF0cy5yZW1vdGVDYW5kaWRhdGVzO1xyXG4gICAgICAgIHRoaXMub3V0Ym91bmRWaWRlb1N0YXRzID0gYWdncmVnYXRlZFN0YXRzLm91dEJvdW5kVmlkZW9TdGF0cztcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqICBXZWIgUlRDIE9mZmVyIG1lc3NhZ2Ugd3JhcHBlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VXZWJSVENPZmZlciBleHRlbmRzIE1lc3NhZ2VTZW5kIHtcclxuICAgIHNkcDogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIG9mZmVyIC0gR2VuZXJhdGVkIFdlYiBSVEMgT2ZmZXJcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob2ZmZXI/OiBSVENTZXNzaW9uRGVzY3JpcHRpb25Jbml0KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBNZXNzYWdlU2VuZFR5cGVzLk9GRkVSO1xyXG5cclxuICAgICAgICBpZiAob2ZmZXIpIHtcclxuICAgICAgICAgICAgdGhpcy50eXBlID0gb2ZmZXIudHlwZSBhcyBNZXNzYWdlU2VuZFR5cGVzO1xyXG4gICAgICAgICAgICB0aGlzLnNkcCA9IG9mZmVyLnNkcDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSVEMgSWNlIENhbmRpZGF0ZSBXcmFwcGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUljZUNhbmRpZGF0ZSBpbXBsZW1lbnRzIFNlbmQge1xyXG4gICAgY2FuZGlkYXRlOiBSVENJY2VDYW5kaWRhdGU7XHJcbiAgICB0eXBlOiBNZXNzYWdlU2VuZFR5cGVzO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGNhbmRpZGF0ZSAtIFJUQyBJY2UgQ2FuZGlkYXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNhbmRpZGF0ZTogUlRDSWNlQ2FuZGlkYXRlKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gTWVzc2FnZVNlbmRUeXBlcy5JQ0VfQ0FORElEQVRFO1xyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlID0gY2FuZGlkYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHVybnMgdGhlIHdyYXBwZXIgaW50byBhIEpTT04gU3RyaW5nXHJcbiAgICAgKiBAcmV0dXJucyAtIEpTT04gU3RyaW5nIG9mIHRoZSBNZXNzYWdlIHRvIHNlbmRcclxuICAgICAqL1xyXG4gICAgcGF5bG9hZCgpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiU2VuZGluZyA9PiBcXG5cIiArIEpTT04uc3RyaW5naWZ5KHRoaXMsIHVuZGVmaW5lZCwgNCksIDYpO1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IEFnZ3JlZ2F0ZWRTdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvQWdncmVnYXRlZFN0YXRzXCI7XHJcbmltcG9ydCAqIGFzIE1lc3NhZ2VSZWNlaXZlIGZyb20gXCIuL01lc3NhZ2VSZWNlaXZlXCI7XHJcbmltcG9ydCAqIGFzIE1lc3NhZ2VTZW5kIGZyb20gXCIuL01lc3NhZ2VTZW5kXCI7XHJcblxyXG4vLyBkZWNsYXJlIHRoZSBuZXcgbWV0aG9kIGZvciB0aGUgd2Vic29ja2V0IGludGVyZmFjZVxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgICBpbnRlcmZhY2UgV2ViU29ja2V0IHtcclxuICAgICAgICBvbm1lc3NhZ2ViaW5hcnk/KGV2ZW50PzogTWVzc2FnZUV2ZW50KTogdm9pZDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBjb250cm9sbGVyIGZvciB0aGUgV2ViU29ja2V0IGFuZCBhbGwgYXNzb2NpYXRlZCBtZXRob2RzIFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFdlYlNvY2tldENvbnRyb2xsZXIge1xyXG4gICAgV1NfT1BFTl9TVEFURSA9IDE7XHJcbiAgICBhZGRyZXNzOiBzdHJpbmc7XHJcbiAgICB3ZWJTb2NrZXQ6IFdlYlNvY2tldDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBBZGRyZXNzIC0gVGhlIEFkZHJlc3Mgb2YgdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoQWRkcmVzczogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gQWRkcmVzcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbm5lY3QgdG8gdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuICAgICAqIEByZXR1cm5zIC0gSWYgdGhlcmUgaXMgYSBjb25uZWN0aW9uXHJcbiAgICAgKi9cclxuICAgIGNvbm5lY3QoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCB0aGlzLmFkZHJlc3MsIDYpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0ID0gbmV3IFdlYlNvY2tldCh0aGlzLmFkZHJlc3MpO1xyXG4gICAgICAgICAgICB0aGlzLndlYlNvY2tldC5vbm9wZW4gPSAoZXZlbnQpID0+IHRoaXMuaGFuZGxlT25PcGVuKGV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQub25lcnJvciA9IChldmVudCkgPT4gdGhpcy5oYW5kbGVPbkVycm9yKGV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQub25jbG9zZSA9IChldmVudCkgPT4gdGhpcy5oYW5kbGVPbkNsb3NlKGV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB0aGlzLmhhbmRsZU9uTWVzc2FnZShldmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0Lm9ubWVzc2FnZWJpbmFyeSA9IChldmVudCkgPT4gdGhpcy5oYW5kZWxPbk1lc3NhZ2VCaW5hcnkoZXZlbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBMb2dnZXIuRXJyb3IoZXJyb3IsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGF0IGhhcHBlbnMgd2hlbiBhIG1lc3NhZ2UgaXMgcmVjZWl2ZWQgaW4gYmluYXJ5IGZvcm1cclxuICAgICAqIEBwYXJhbSBldmVudCAtIE1lc3NhZ2UgUmVjZWl2ZWRcclxuICAgICAqL1xyXG4gICAgaGFuZGVsT25NZXNzYWdlQmluYXJ5KGV2ZW50OiBNZXNzYWdlRXZlbnQpIHtcclxuICAgICAgICAvLyBpZiB0aGUgZXZlbnQgaXMgZW1wdHkgcmV0dXJuXHJcbiAgICAgICAgaWYgKCFldmVudCB8fCAhZXZlbnQuZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBoYW5kZWwgdGhlIGJpbmFyeSBhbmQgdGhlbiBoYW5kZWwgdGhlIG1lc3NhZ2VcclxuICAgICAgICBldmVudC5kYXRhLnRleHQoKS50aGVuKChtZXNzYWdlU3RyaW5nOiBhbnkpID0+IHtcclxuXHJcbiAgICAgICAgICAgIC8vIGJ1aWxkIGEgbmV3IG1lc3NhZ2VcclxuICAgICAgICAgICAgbGV0IGNvbnN0cnVjdGVkTWVzc2FnZSA9IG5ldyBNZXNzYWdlRXZlbnQoJ21lc3NhZ2VGcm9tQmluYXJ5Jywge1xyXG4gICAgICAgICAgICAgICAgZGF0YTogbWVzc2FnZVN0cmluZ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNlbmQgdGhlIG5ldyBzdHJpbmdpZmllZCBldmVudCBiYWNrIGludG8gYG9ubWVzc2FnZWBcclxuICAgICAgICAgICAgdGhpcy5oYW5kZWxPbk1lc3NhZ2VCaW5hcnkoY29uc3RydWN0ZWRNZXNzYWdlKTtcclxuXHJcbiAgICAgICAgfSkuY2F0Y2goKGVycm9yOiBFcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgYEZhaWxlZCB0byBwYXJzZSBiaW5hcnkgYmxvYiBmcm9tIHdlYnNvY2tldCwgcmVhc29uOiAke2Vycm9yfWApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGF0IGhhcHBlbnMgd2hlbiBhIG1lc3NhZ2UgaXMgcmVjZWl2ZWRcclxuICAgICAqIEBwYXJhbSBldmVudCAtIE1lc3NhZ2UgUmVjZWl2ZWRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25NZXNzYWdlKGV2ZW50OiBNZXNzYWdlRXZlbnQpIHtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2Vic29ja2V0IG1lc3NhZ2UgaXMgYmluYXJ5LCBpZiBzbywgc3RyaW5naWZ5IGl0LlxyXG4gICAgICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEgaW5zdGFuY2VvZiBCbG9iKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGVsT25NZXNzYWdlQmluYXJ5KGV2ZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1lc3NhZ2U6IE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VSZWN2ID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwicmVjZWl2ZWQgPT4gXFxuXCIgKyBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGV2ZW50LmRhdGEpLCB1bmRlZmluZWQsIDQpLCA2KTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlUmVjdlR5cGVzLlBJTkc6IHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBzZW5kIG91ciBwb25nIHBheWxvYWQgYmFjayB0byB0aGUgc2lnbmFsbGluZyBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBuZXcgTWVzc2FnZVNlbmQuTWVzc2FnZVBvbmcobmV3IERhdGUoKS5nZXRUaW1lKCkpLnBheWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlUmVjdlR5cGVzLlBJTkcgKyBcIjogXCIgKyBwYXlsb2FkLCA2KTtcclxuICAgICAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LnNlbmQocGF5bG9hZClcclxuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VSZWN2VHlwZXMuQVVUSEVOVElDQVRJT05fUkVRVUlSRUQ6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJBVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLCA2KTtcclxuICAgICAgICAgICAgICAgIGxldCBhdXRoZW50aWNhdGlvblJlcXVpcmVkOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlQXV0aFJlcXVpcmVkID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdXJsX3N0cmluZyA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgICAgICAgICAgbGV0IHVybCA9IG5ldyBVUkwodXJsX3N0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGF1dGhSZXF1ZXN0ID0gbmV3IE1lc3NhZ2VTZW5kLk1lc3NhZ2VBdXRoUmVxdWVzdCh1cmwuc2VhcmNoUGFyYW1zLmdldChcImNvZGVcIiksIHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwicHJvdmlkZXJcIikpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LnNlbmQoYXV0aFJlcXVlc3QucGF5bG9hZCgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VSZWN2VHlwZXMuQVVUSEVOVElDQVRJT05fUkVTUE9OU0U6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJBVVRIRU5USUNBVElPTl9SRVNQT05TRVwiLCA2KTtcclxuICAgICAgICAgICAgICAgIGxldCBhdXRoZW50aWNhdGlvblJlc3BvbnNlOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlQXV0aFJlc3BvbnNlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQXV0aGVudGljYXRpb25SZXNwb25zZShhdXRoZW50aWNhdGlvblJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF1dGhlbnRpY2F0aW9uUmVzcG9uc2Uub3V0Y29tZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUF1dGhSZXNwb25zZU91dGNvbWVUeXBlLlJFRElSRUNUOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYXV0aGVudGljYXRpb25SZXNwb25zZS5yZWRpcmVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUF1dGhSZXNwb25zZU91dGNvbWVUeXBlLkFVVEhFTlRJQ0FURUQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlVzZXIgaXMgYXV0aGVudGljYXRlZCBhbmQgbm93IHJlcXVlc3RpbmcgYW4gaW5zdGFuY2VcIiwgNik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndlYlNvY2tldC5zZW5kKG5ldyBNZXNzYWdlU2VuZC5NZXNzYWdlUmVxdWVzdEluc3RhbmNlKCkucGF5bG9hZCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUF1dGhSZXNwb25zZU91dGNvbWVUeXBlLklOVkFMSURfVE9LRU46IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLkluZm8oTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJBdXRoZW50aWNhdGlvbiBlcnJvciA6IEludmFsaWQgVG9rZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VBdXRoUmVzcG9uc2VPdXRjb21lVHlwZS5FUlJPUjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXIuSW5mbyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkF1dGhlbnRpY2F0aW9uIEVycm9yIGZyb20gc2VydmVyIENoZWNrIHdoYXQgeW91IGFyZSBzZW5kaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJUaGUgT3V0Y29tZSBNZXNzYWdlIGhhcyBub3QgYmVlbiBoYW5kbGVkIDogdGhpcyBpcyByZWFsbHkgYmFkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VSZWN2VHlwZXMuSU5TVEFOQ0VfU1RBVEU6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJJTlNUQU5DRV9TVEFURVwiLCA2KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnN0YW5jZVN0YXRlOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlSW5zdGFuY2VTdGF0ZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uSW5zdGFuY2VTdGF0ZUNoYW5nZShpbnN0YW5jZVN0YXRlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZVJlY2VpdmUuTWVzc2FnZVJlY3ZUeXBlcy5DT05GSUc6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJDT05GSUdcIiwgNik7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29uZmlnOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlQ29uZmlnID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Db25maWcoY29uZmlnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZVJlY2VpdmUuTWVzc2FnZVJlY3ZUeXBlcy5QTEFZRVJfQ09VTlQ6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJQTEFZRVJfQ09VTlRcIiwgNik7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGxheWVyQ291bnQ6IE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VQbGF5ZXJDb3VudCA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiUGxheWVyIENvdW50OiBcIiArIChwbGF5ZXJDb3VudC5jb3VudCAtIDEpLCA2KTtcclxuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VSZWN2VHlwZXMuQU5TV0VSOiB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiQU5TV0VSXCIsIDYpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGFuc3dlcjogTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUFuc3dlciA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uV2ViUnRjQW5zd2VyKGFuc3dlcik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VSZWN2VHlwZXMuSUNFX0NBTkRJREFURToge1xyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIklDRV9DQU5ESURBVEVcIiwgNik7XHJcbiAgICAgICAgICAgICAgICBsZXQgaWNlQ2FuZGlkYXRlOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlSWNlQ2FuZGlkYXRlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25JY2VDYW5kaWRhdGUoaWNlQ2FuZGlkYXRlLmNhbmRpZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJFcnJvciBNZXNzYWdlIHR5cGUgbm90IERlZmluZWRcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgd2hlbiB0aGUgV2Vic29ja2V0IGlzIG9wZW5lZCBcclxuICAgICAqIEBwYXJhbSBldmVudCAtIE5vdCBVc2VkXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZU9uT3BlbihldmVudDogRXZlbnQpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiQ29ubmVjdGVkIHRvIHRoZSBzaWduYWxsaW5nIHNlcnZlciB2aWEgV2ViU29ja2V0XCIsIDYpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGVuIHRoZXJlIGlzIGFuIGVycm9yIG9uIHRoZSB3ZWJzb2NrZXRcclxuICAgICAqIEBwYXJhbSBldmVudCAtIEVycm9yIFBheWxvYWRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25FcnJvcihldmVudDogRXZlbnQpIHtcclxuICAgICAgICBMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgJ1dlYlNvY2tldCBlcnJvcjogJyk7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBldmVudC50b1N0cmluZygpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgd2hlbiB0aGUgV2Vic29ja2V0IGlzIGNsb3NlZFxyXG4gICAgICogQHBhcmFtIGV2ZW50IC0gQ2xvc2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25DbG9zZShldmVudDogQ2xvc2VFdmVudCkge1xyXG4gICAgICAgIHRoaXMub25XZWJTb2NrZXRPbmNsb3NlT3ZlcmxheU1lc3NhZ2UoZXZlbnQpO1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJEaXNjb25uZWN0ZWQgdG8gdGhlIHNpZ25hbGxpbmcgc2VydmVyIHZpYSBXZWJTb2NrZXQ6IFwiICsgSlNPTi5zdHJpbmdpZnkoZXZlbnQuY29kZSkgKyBcIiAtIFwiICsgZXZlbnQucmVhc29uKTtcclxuICAgICAgICB0aGlzLnN0b3BBZmtXYXJuaW5nVGltZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFuIG92ZXJyaWRlIGZvciBzdG9wcGluZyB0aGUgYWZrIHdhcm5pbmcgdGltZXJcclxuICAgICAqL1xyXG4gICAgc3RvcEFma1dhcm5pbmdUaW1lcigpIHsgfVxyXG5cclxuICAgIHNlbmRXZWJSdGNPZmZlcihvZmZlcjogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uSW5pdCkge1xyXG4gICAgICAgIGxldCBwYXlsb2FkID0gbmV3IE1lc3NhZ2VTZW5kLk1lc3NhZ2VXZWJSVENPZmZlcihvZmZlcik7XHJcbiAgICAgICAgdGhpcy53ZWJTb2NrZXQuc2VuZChwYXlsb2FkLnBheWxvYWQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kcyBhbiBSVEMgSWNlIENhbmRpZGF0ZSB0byB0aGUgU2VydmVyXHJcbiAgICAgKiBAcGFyYW0gY2FuZGlkYXRlIC0gUlRDIEljZSBDYW5kaWRhdGVcclxuICAgICAqL1xyXG4gICAgc2VuZEljZUNhbmRpZGF0ZShjYW5kaWRhdGU6IFJUQ0ljZUNhbmRpZGF0ZSkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJTZW5kaW5nIEljZSBDYW5kaWRhdGVcIik7XHJcbiAgICAgICAgaWYgKHRoaXMud2ViU29ja2V0ICYmIHRoaXMud2ViU29ja2V0LnJlYWR5U3RhdGUgPT09IHRoaXMuV1NfT1BFTl9TVEFURSkge1xyXG4gICAgICAgICAgICAvL3dzLnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnaWNlQ2FuZGlkYXRlJywgY2FuZGlkYXRlOiBjYW5kaWRhdGUgfSkpO1xyXG4gICAgICAgICAgICBsZXQgSWNlQ2FuZGlkYXRlID0gbmV3IE1lc3NhZ2VTZW5kLk1lc3NhZ2VJY2VDYW5kaWRhdGUoY2FuZGlkYXRlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LnNlbmQoSWNlQ2FuZGlkYXRlLnBheWxvYWQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xvc2VzIHRoZSBXZWJzb2NrZXQgY29ubmVjdGlvblxyXG4gICAgICovXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLndlYlNvY2tldC5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgdGhlIEFnZ3JlZ2F0ZWQgU3RhdHMgdG8gdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuICAgICAqIEBwYXJhbSBzdGF0cyAtIFN0YXRzIFBheWxvYWRcclxuICAgICAqL1xyXG4gICAgc2VuZFN0YXRzKHN0YXRzOiBBZ2dyZWdhdGVkU3RhdHMpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBNZXNzYWdlU2VuZC5NZXNzYWdlU3RhdHMoc3RhdHMpO1xyXG4gICAgICAgIHRoaXMud2ViU29ja2V0LnNlbmQoZGF0YS5wYXlsb2FkKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBFdmVudCB1c2VkIGZvciBEaXNwbGF5aW5nIHdlYnNvY2tldCBjbG9zZWQgbWVzc2FnZXMgKi9cclxuICAgIG9uV2ViU29ja2V0T25jbG9zZU92ZXJsYXlNZXNzYWdlKGV2ZW50OiBDbG9zZUV2ZW50KSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBNZXNzYWdlIENvbnRhaW5zIHRoZSBwYXlsb2FkIG9mIHRoZSBwZWVyIGNvbm5lY3Rpb24gb3B0aW9ucyB1c2VkIGZvciB0aGUgUlRDIFBlZXIgaGFuZCBzaGFrZVxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VDb25maWcgLSBDb25maWcgTWVzc2FnZSByZWNlaXZlZCBmcm9tIGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuICAgICAqL1xyXG4gICAgb25Db25maWcobWVzc2FnZUNvbmZpZzogTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUNvbmZpZykgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWNlQ2FuZGlkYXRlIC0gSWNlIENhbmRpZGF0ZSBzZW50IGZyb20gdGhlIFNpZ25hbGluZyBzZXJ2ZXIgc2VydmVyJ3MgUlRDIGhhbmQgc2hha2VcclxuICAgICAqL1xyXG4gICAgb25JY2VDYW5kaWRhdGUoaWNlQ2FuZGlkYXRlOiBSVENJY2VDYW5kaWRhdGVJbml0KSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IGlzIGZpcmVkIHdoZW4gdGhlIHdlYnNvY2tldCByZWNlaXZlcyB0aGUgYW5zd2VyIGZvciB0aGUgUlRDIHBlZXIgQ29ubmVjdGlvblxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VBbnN3ZXIgLSBUaGUgUlRDIEFuc3dlciBwYXlsb2FkIGZyb20gdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuICAgICAqL1xyXG4gICAgb25XZWJSdGNBbnN3ZXIobWVzc2FnZUFuc3dlcjogTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUFuc3dlcikgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCBmaXJlZCB3aXRoIHRoZSB3ZWJzb2NrZXQgcmVjZWl2ZXMgYSBpbnN0YW5jZSBzdGF0ZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlU3RhdGUgLSBVRSBJbnN0YW5jZSBTdGF0ZVxyXG4gICAgICovXHJcbiAgICBvbkluc3RhbmNlU3RhdGVDaGFuZ2UoaW5zdGFuY2VTdGF0ZTogTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUluc3RhbmNlU3RhdGUpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgZmlyZWQgd2l0aCB0aGUgd2Vic29ja2V0IHJlY2VpdmVzIGEgQXV0aGVudGljYXRpb24gUmVzcG9uc2VcclxuICAgICAqIEBwYXJhbSBhdXRoUmVzcG9uc2UgLSBBdXRoZW50aWNhdGlvbiBSZXNwb25zZVxyXG4gICAgICovXHJcbiAgICBvbkF1dGhlbnRpY2F0aW9uUmVzcG9uc2UoYXV0aFJlc3BvbnNlOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlQXV0aFJlc3BvbnNlKSB7IH1cclxufVxyXG5cclxuXHJcbi8qIDUyNGY0ZDRkICovIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJleHBvcnQgeyB3ZWJSdGNQbGF5ZXJDb250cm9sbGVyIH0gZnJvbSBcIi4vV2ViUnRjUGxheWVyL1dlYlJ0Y1BsYXllckNvbnRyb2xsZXJcIlxyXG5leHBvcnQgeyBDb25maWcsIENvbnRyb2xTY2hlbWVUeXBlIH0gZnJvbSBcIi4vQ29uZmlnL0NvbmZpZ1wiXHJcbmV4cG9ydCB7IElEZWxlZ2F0ZSB9IGZyb20gXCIuL0RlbGVnYXRlL0lEZWxlZ2F0ZVwiXHJcbmV4cG9ydCB7IERlbGVnYXRlQmFzZSB9IGZyb20gXCIuL0RlbGVnYXRlL0RlbGVnYXRlQmFzZVwiXHJcbmV4cG9ydCB7IElXZWJSdGNQbGF5ZXJDb250cm9sbGVyIH0gZnJvbSBcIi4vV2ViUnRjUGxheWVyL0lXZWJSdGNQbGF5ZXJDb250cm9sbGVyXCJcclxuXHJcbmV4cG9ydCB7IElPdmVybGF5IH0gZnJvbSAnLi9PdmVybGF5L0lPdmVybGF5JztcclxuZXhwb3J0IHsgSVRleHRPdmVybGF5IH0gZnJvbSAnLi9PdmVybGF5L0lUZXh0T3ZlcmxheSc7XHJcbmV4cG9ydCB7IElBY3Rpb25PdmVybGF5IH0gZnJvbSBcIi4vT3ZlcmxheS9JQWN0aW9uT3ZlcmxheVwiXHJcbmV4cG9ydCB7IElBZmtPdmVybGF5IH0gZnJvbSAnLi9PdmVybGF5L0lBZmtPdmVybGF5JztcclxuZXhwb3J0IHsgQWZrTG9naWMgfSBmcm9tICcuL0Fmay9BZmtMb2dpYyc7XHJcblxyXG5leHBvcnQgeyBMYXRlbmN5VGVzdFJlc3VsdHMgfSBmcm9tIFwiLi9EYXRhQ2hhbm5lbC9MYXRlbmN5VGVzdFJlc3VsdHNcIjtcclxuZXhwb3J0IHsgRW5jb2RlciwgSW5pdGlhbFNldHRpbmdzLCBXZWJSVEMgfSBmcm9tICcuL0RhdGFDaGFubmVsL0luaXRpYWxTZXR0aW5ncyc7XHJcbmV4cG9ydCB7IEFnZ3JlZ2F0ZWRTdGF0cyB9IGZyb20gJy4vUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL0FnZ3JlZ2F0ZWRTdGF0cyc7XHJcbmV4cG9ydCB7IE1lc3NhZ2VJbnN0YW5jZVN0YXRlLCBJbnN0YW5jZVN0YXRlLCBNZXNzYWdlQXV0aFJlc3BvbnNlLCBNZXNzYWdlQXV0aFJlc3BvbnNlT3V0Y29tZVR5cGUgfSBmcm9tICcuL1dlYlNvY2tldHMvTWVzc2FnZVJlY2VpdmUnO1xyXG5leHBvcnQgeyBMb2dnZXIgfSBmcm9tICcuL0xvZ2dlci9Mb2dnZXInO1xyXG5cclxuZGVjbGFyZSB2YXIgTElCUkFSWV9WRVJTSU9OOiBzdHJpbmc7XHJcbmV4cG9ydCBjb25zdCB2ZXJzaW9uID0gTElCUkFSWV9WRVJTSU9OO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=